<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>sas.plottools.PlotPanel &mdash; SasView 3.1.2 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '3.1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="SasView 3.1.2 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">SasView 3.1.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for sas.plottools.PlotPanel</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot panel.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">wx</span>
<span class="c"># Try a normal import first</span>
<span class="c"># If it fails, try specifying a version</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="c">#Use the WxAgg back end. The Wx one takes too long to render</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s">&#39;WXAgg&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_wxagg</span> <span class="kn">import</span> <span class="n">FigureCanvasWxAgg</span>
<span class="kn">from</span> <span class="nn">matplotlib.figure</span> <span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">transform</span>
<span class="kn">from</span> <span class="nn">plottables</span> <span class="kn">import</span> <span class="n">Data1D</span>
<span class="c">#TODO: make the plottables interactive</span>
<span class="kn">from</span> <span class="nn">binder</span> <span class="kn">import</span> <span class="n">BindArtist</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">import</span> <span class="n">FontProperties</span>
<span class="n">DEBUG</span> <span class="o">=</span> <span class="bp">False</span>

<span class="kn">from</span> <span class="nn">plottables</span> <span class="kn">import</span> <span class="n">Graph</span>
<span class="kn">from</span> <span class="nn">TextDialog</span> <span class="kn">import</span> <span class="n">TextDialog</span>
<span class="kn">from</span> <span class="nn">LabelDialog</span> <span class="kn">import</span> <span class="n">LabelDialog</span>
<span class="kn">import</span> <span class="nn">operator</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">pylab</span>
<span class="n">DEFAULT_CMAP</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">jet</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="kn">from</span> <span class="nn">..guiframe.events</span> <span class="kn">import</span> <span class="n">StatusEvent</span>
<span class="kn">from</span> <span class="nn">.toolbar</span> <span class="kn">import</span> <span class="n">NavigationToolBar</span><span class="p">,</span> <span class="n">PlotPrintout</span><span class="p">,</span> <span class="n">bind</span>

<div class="viewcode-block" id="show_tree"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.show_tree">[docs]</a><span class="k">def</span> <span class="nf">show_tree</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Handy function for displaying a tree of graph objects&quot;&quot;&quot;</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s">&quot;-&quot;</span><span class="o">*</span><span class="n">d</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
    <span class="k">if</span> <span class="s">&#39;get_children&#39;</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_children</span><span class="p">():</span> <span class="n">show_tree</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">d</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</div>
<span class="kn">from</span> <span class="nn">convert_units</span> <span class="kn">import</span> <span class="n">convert_unit</span>


<span class="k">def</span> <span class="nf">_rescale</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">pt</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bal</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rescale (lo,hi) by step, returning the new (lo,hi)</span>
<span class="sd">        The scaling is centered on pt, with positive values of step</span>
<span class="sd">        driving lo/hi away from pt and negative values pulling them in.</span>
<span class="sd">        If bal is given instead of point, it is already in [0,1] coordinates.</span>

<span class="sd">        This is a helper function for step-based zooming.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># Convert values into the correct scale for a linear transformation</span>
    <span class="c"># TODO: use proper scale transformers</span>
    <span class="n">loprev</span> <span class="o">=</span> <span class="n">lo</span>
    <span class="n">hiprev</span> <span class="o">=</span> <span class="n">hi</span>
    <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">lo</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">lo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">lo</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">lo</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">hi</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">hi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">hi</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">pt</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>

    <span class="c"># Compute delta from axis range * %, or 1-% if persent is negative</span>
    <span class="k">if</span> <span class="n">step</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">hi</span> <span class="o">-</span> <span class="n">lo</span><span class="p">)</span> <span class="o">*</span> <span class="n">step</span> <span class="o">/</span> <span class="mi">100</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">hi</span> <span class="o">-</span> <span class="n">lo</span><span class="p">)</span> <span class="o">*</span> <span class="n">step</span> <span class="o">/</span> <span class="p">(</span><span class="mi">100</span> <span class="o">-</span> <span class="n">step</span><span class="p">)</span>

    <span class="c"># Add scale factor proportionally to the lo and hi values,</span>
    <span class="c"># preserving the</span>
    <span class="c"># point under the mouse</span>
    <span class="k">if</span> <span class="n">bal</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bal</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">pt</span> <span class="o">-</span> <span class="n">lo</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">hi</span> <span class="o">-</span> <span class="n">lo</span><span class="p">)</span>
    <span class="n">lo</span> <span class="o">=</span> <span class="n">lo</span> <span class="o">-</span> <span class="p">(</span><span class="n">bal</span> <span class="o">*</span> <span class="n">delta</span><span class="p">)</span>
    <span class="n">hi</span> <span class="o">=</span> <span class="n">hi</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">bal</span><span class="p">)</span> <span class="o">*</span> <span class="n">delta</span>

    <span class="c"># Convert transformed values back to the original scale</span>
    <span class="k">if</span> <span class="n">scale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lo</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mi">250</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">hi</span> <span class="o">&gt;=</span> <span class="mi">250</span><span class="p">):</span>
            <span class="n">lo</span> <span class="o">=</span> <span class="n">loprev</span>
            <span class="n">hi</span> <span class="o">=</span> <span class="n">hiprev</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mf">10.</span><span class="p">,</span> <span class="n">lo</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mf">10.</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span>


<div class="viewcode-block" id="PlotPanel"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel">[docs]</a><span class="k">class</span> <span class="nc">PlotPanel</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The PlotPanel has a Figure and a Canvas. OnSize events simply set a</span>
<span class="sd">    flag, and the actually redrawing of the</span>
<span class="sd">    figure is triggered by an Idle event.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">xtransform</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">ytransform</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s">&#39;log_{10}&#39;</span><span class="p">,</span>
                 <span class="n">color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s">&quot;parent&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dimension</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gotLegend</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c"># to begin, legend is not picked.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_pos_loc</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_collections_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">dpi</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#39;#b3b3b3&#39;</span>
        <span class="kn">from</span> <span class="nn">canvas</span> <span class="kn">import</span> <span class="n">FigureCanvas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">FigureCanvas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetColor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resizeflag</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_SetSize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=.</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yscale</span> <span class="o">=</span> <span class="s">&#39;linear&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xscale</span> <span class="o">=</span> <span class="s">&#39;linear&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">)</span>
        <span class="c">#add toolbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_toolbar</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_toolbar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sizer</span><span class="p">)</span>

        <span class="c"># Graph object to manage the plottables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>

        <span class="c">#Boolean value to keep track of whether current legend is</span>
        <span class="c">#visible or not</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_on</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_on</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c">#Location of legend, default is 0 or &#39;best&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legendLoc</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loc_labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_loc_label</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_CONTEXT_MENU</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onContextMenu</span><span class="p">)</span>

        <span class="c"># Define some constants</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorlist</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;k&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbollist</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;o&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;^&#39;</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">,</span> <span class="s">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;+&#39;</span><span class="p">,</span>
                           <span class="s">&#39;s&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;h&#39;</span><span class="p">,</span> <span class="s">&#39;H&#39;</span><span class="p">,</span> <span class="s">&#39;p&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">]</span>

        <span class="c">#List of texts currently on the plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c">#User scale</span>
        <span class="k">if</span> <span class="n">xtransform</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">=</span> <span class="n">xtransform</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;log10(x)&quot;</span>
        <span class="k">if</span> <span class="n">ytransform</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">=</span> <span class="n">ytransform</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;log10(y)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">=</span> <span class="s">&quot;--&quot;</span>
        <span class="c"># keep track if the previous transformation of x</span>
        <span class="c"># and y in Property dialog</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prevXtrans</span> <span class="o">=</span> <span class="s">&quot;log10(x)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prevYtrans</span> <span class="o">=</span> <span class="s">&quot;log10(y)&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scroll_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;scroll_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onWheel</span><span class="p">)</span>
        <span class="c">#taking care of dragging</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">motion_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;motion_notify_event&#39;</span><span class="p">,</span>
                                                 <span class="bp">self</span><span class="o">.</span><span class="n">onMouseMotion</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">press_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;button_press_event&#39;</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">onLeftDown</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pick_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;pick_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onPick</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">release_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;button_release_event&#39;</span><span class="p">,</span>
                                                  <span class="bp">self</span><span class="o">.</span><span class="n">onLeftUp</span><span class="p">)</span>

        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_RIGHT_DOWN</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onLeftDown</span><span class="p">)</span>
        <span class="c"># to turn axis off whenn resizing the panel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resizing</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">leftdown</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leftup</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mousemotion</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="p">]</span>
        <span class="c">## Fit dialog</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fit_dialog</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c"># Interactor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span> <span class="o">=</span> <span class="n">BindArtist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="c">#self.selected_plottable = None</span>

        <span class="c"># new data for the fit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span> <span class="o">=</span> <span class="n">Data1D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[],</span> <span class="n">y</span><span class="o">=</span><span class="p">[],</span> <span class="n">dy</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="o">.</span><span class="n">symbol</span> <span class="o">=</span> <span class="mi">13</span>
        <span class="c">#self.fit_result = Data1D(x=[], y=[],dx=None, dy=None)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Fit&quot;</span>
        <span class="c"># For fit Dialog initial display</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmin</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmax</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xminView</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmaxView</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xlo</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xhi</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale_ylo</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale_yhi</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Avalue</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bvalue</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ErrAvalue</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ErrBvalue</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Chivalue</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c"># for 2D scale</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="o">!=</span> <span class="s">&#39;linear&#39;</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="s">&#39;log_{10}&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qx_data</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmin_2D</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmax_2D</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ymin_2D</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ymax_2D</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c">## store reference to the current plotted vmin and vmax of plotted image</span>
        <span class="c">##z range in linear scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c">#index array</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index_x</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index_y</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c">#number of bins</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_bins</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_bins</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c">## default color map</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span> <span class="o">=</span> <span class="n">DEFAULT_CMAP</span>

        <span class="c"># Dragging info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">begDrag</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xInit</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yInit</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xFinal</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yFinal</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c">#axes properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_font</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_color</span> <span class="o">=</span> <span class="s">&#39;black&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_tick</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_font</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_unit</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_color</span> <span class="o">=</span> <span class="s">&#39;black&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_tick</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c"># check if zoomed.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_zoomed</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c"># Plottables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plots</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c"># Default locations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_save_location</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="c"># let canvas know about axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">set_panel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ly</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">q_ctrl</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c">#Bind focus to change the border color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_SET_FOCUS</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_set_focus</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_KILL_FOCUS</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_kill_focus</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_SetInitialSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pixels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">GetClientSize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">pixels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="n">pixels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_dpi</span><span class="p">(),</span>
                                    <span class="n">pixels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_dpi</span><span class="p">(),</span> <span class="n">forward</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<div class="viewcode-block" id="PlotPanel.On_Paint"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.On_Paint">[docs]</a>    <span class="k">def</span> <span class="nf">On_Paint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.on_set_focus"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.on_set_focus">[docs]</a>    <span class="k">def</span> <span class="nf">on_set_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send to the parenet the current panel on focus</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># light blue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#39;#0099f7&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_caption</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">send_focus_to_datapanel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_caption</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.on_kill_focus"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.on_kill_focus">[docs]</a>    <span class="k">def</span> <span class="nf">on_kill_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the panel color</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># light grey</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s">&#39;#b3b3b3&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.set_resizing"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.set_resizing">[docs]</a>    <span class="k">def</span> <span class="nf">set_resizing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resizing</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the resizing (True/False)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>  <span class="c"># Not implemented</span>
</div>
<div class="viewcode-block" id="PlotPanel.schedule_full_draw"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.schedule_full_draw">[docs]</a>    <span class="k">def</span> <span class="nf">schedule_full_draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Put self in schedule to full redraw list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>  <span class="c"># Not implemented</span>
</div>
<div class="viewcode-block" id="PlotPanel.add_toolbar"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.add_toolbar">[docs]</a>    <span class="k">def</span> <span class="nf">add_toolbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        add toolbar</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_toolbar</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span> <span class="o">=</span> <span class="n">NavigationToolBar</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">canvas</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
        <span class="n">bind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EVT_TOOL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onResetGraph</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">_NTB2_RESET</span><span class="p">)</span>
        <span class="n">bind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EVT_TOOL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onContextMenu</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">_NTB2_HOME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">Realize</span><span class="p">()</span>
        <span class="c">## The &#39;SetToolBar()&#39; is not working on MAC: JHC</span>
        <span class="c">#if IS_MAC:</span>
        <span class="c"># Mac platform (OSX 10.3, MacPython) does not seem to cope with</span>
        <span class="c"># having a toolbar in a sizer. This work-around gets the buttons</span>
        <span class="c"># back, but at the expense of having the toolbar at the top</span>
        <span class="c">#self.SetToolBar(self.toolbar)</span>
        <span class="c">#else:</span>
        <span class="c"># On Windows platform, default window size is incorrect, so set</span>
        <span class="c"># toolbar width to figure width.</span>
        <span class="n">tw</span><span class="p">,</span> <span class="n">th</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">GetSizeTuple</span><span class="p">()</span>
        <span class="n">fw</span><span class="p">,</span> <span class="n">fh</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">GetSizeTuple</span><span class="p">()</span>
        <span class="c"># By adding toolbar in sizer, we are able to put it at the bottom</span>
        <span class="c"># of the frame - so appearance is closer to GTK version.</span>
        <span class="c"># As noted above, doesn&#39;t work for Mac.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="n">fw</span><span class="p">,</span> <span class="n">th</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">)</span>

        <span class="c"># update the axes menu on the toolbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.onLeftDown"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onLeftDown">[docs]</a>    <span class="k">def</span> <span class="nf">onLeftDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        left button down and ready to drag</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Check that the LEFT button was pressed</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">leftdown</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span>
            <span class="k">if</span> <span class="n">ax</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xInit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yInit</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">pos_x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">)</span>  <span class="c"># / size_x</span>
                    <span class="n">pos_y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">)</span>  <span class="c"># / size_y</span>
                    <span class="n">pos_x</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%8.3g</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">pos_x</span>
                    <span class="n">pos_y</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%8.3g</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">pos_y</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">pos_x</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">pos_y</span><span class="p">)</span>
                    <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">))</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="PlotPanel.onLeftUp"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onLeftUp">[docs]</a>    <span class="k">def</span> <span class="nf">onLeftUp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dragging is done</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Check that the LEFT button was released</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">leftdown</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mousemotion</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">leftup</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="c">#release the legend</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gotLegend</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gotLegend</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_legend_alpha</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.set_legend_alpha"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.set_legend_alpha">[docs]</a>    <span class="k">def</span> <span class="nf">set_legend_alpha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set legend alpha</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">legendPatch</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.onPick"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onPick">[docs]</a>    <span class="k">def</span> <span class="nf">onPick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        On pick legend</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">legend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">artist</span> <span class="o">==</span> <span class="n">legend</span><span class="p">:</span>
            <span class="c">#gets the box of the legend.</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span>
            <span class="c">#get mouse coordinates at time of pick.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouse_x</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">mouseevent</span><span class="o">.</span><span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouse_y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">mouseevent</span><span class="o">.</span><span class="n">y</span>
            <span class="c">#get legend coordinates at time of pick.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend_x</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">xmin</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend_y</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">ymin</span>
            <span class="c">#indicates we picked up the legend.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gotLegend</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_legend_alpha</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_on_legend_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        On legend in motion</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="c"># Event occurred inside a plotting area</span>
        <span class="n">lo_x</span><span class="p">,</span> <span class="n">hi_x</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="n">lo_y</span><span class="p">,</span> <span class="n">hi_y</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="c"># How much the mouse moved.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">mouse_diff_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_x</span> <span class="o">-</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">mouse_diff_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse_y</span> <span class="o">-</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span>
        <span class="c"># Put back inside</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">lo_x</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">lo_x</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">hi_x</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">hi_x</span>
        <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">lo_y</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">lo_y</span>
        <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">hi_y</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">hi_y</span>
        <span class="c"># Move the legend from its previous location by that same amount</span>
        <span class="n">loc_in_canvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_x</span> <span class="o">-</span> <span class="n">mouse_diff_x</span><span class="p">,</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">legend_y</span> <span class="o">-</span> <span class="n">mouse_diff_y</span>
        <span class="c"># Transform into legend coordinate system</span>
        <span class="n">trans_axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">transAxes</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
        <span class="n">loc_in_norm_axes</span> <span class="o">=</span> <span class="n">trans_axes</span><span class="o">.</span><span class="n">transform_point</span><span class="p">(</span><span class="n">loc_in_canvas</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_pos_loc</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">loc_in_norm_axes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">_loc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_pos_loc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resizing</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">set_resizing</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resizing</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<div class="viewcode-block" id="PlotPanel.onMouseMotion"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onMouseMotion">[docs]</a>    <span class="k">def</span> <span class="nf">onMouseMotion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        check if the left button is press and the mouse in moving.</span>
<span class="sd">        computer delta for x and y coordinates and then calls draghelper</span>
<span class="sd">        to perform the drag</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cusor_line</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gotLegend</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_on_legend_motion</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_toolbar</span><span class="p">:</span>
            <span class="c">#Disable dragging without the toolbar to allow zooming with toolbar</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mousemotion</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftdown</span> <span class="o">==</span> <span class="bp">True</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mousemotion</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span>
            <span class="k">if</span> <span class="n">ax</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>  <span class="c"># the dragging is perform inside the figure</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xFinal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yFinal</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span>
                <span class="c"># Check whether this is the first point</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xInit</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xInit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xFinal</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">yInit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yFinal</span>

                <span class="n">xdelta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xFinal</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">xInit</span>
                <span class="n">ydelta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yFinal</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">yInit</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xscale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span><span class="p">:</span>
                    <span class="n">xdelta</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xFinal</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xInit</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yscale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span><span class="p">:</span>
                    <span class="n">ydelta</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yFinal</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yInit</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_dragHelper</span><span class="p">(</span><span class="n">xdelta</span><span class="p">,</span> <span class="n">ydelta</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c"># no dragging is perform elsewhere</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_dragHelper</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.cusor_line"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.cusor_line">[docs]</a>    <span class="k">def</span> <span class="nf">cusor_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</div>
    <span class="k">def</span> <span class="nf">_offset_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Zoom and offset the graph to the last known settings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xhi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xlo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scale_xlo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xhi</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale_yhi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale_ylo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scale_ylo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale_yhi</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_dragHelper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdelta</span><span class="p">,</span> <span class="n">ydelta</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        dragging occurs here</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Event occurred inside a plotting area</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
            <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="n">newlo</span><span class="p">,</span> <span class="n">newhi</span> <span class="o">=</span> <span class="n">lo</span> <span class="o">-</span> <span class="n">xdelta</span><span class="p">,</span> <span class="n">hi</span> <span class="o">-</span> <span class="n">xdelta</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xscale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">lo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">newlo</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">lo</span><span class="p">)</span> <span class="o">-</span> <span class="n">xdelta</span>
                <span class="k">if</span> <span class="n">hi</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">newhi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">hi</span><span class="p">)</span> <span class="o">-</span> <span class="n">xdelta</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xscale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xlo</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">newlo</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xhi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">newhi</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">newlo</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">newhi</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xlo</span> <span class="o">=</span> <span class="n">newlo</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xhi</span> <span class="o">=</span> <span class="n">newhi</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">newlo</span><span class="p">,</span> <span class="n">newhi</span><span class="p">)</span>

            <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
            <span class="n">newlo</span><span class="p">,</span> <span class="n">newhi</span> <span class="o">=</span> <span class="n">lo</span> <span class="o">-</span> <span class="n">ydelta</span><span class="p">,</span> <span class="n">hi</span> <span class="o">-</span> <span class="n">ydelta</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yscale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">lo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">newlo</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">lo</span><span class="p">)</span> <span class="o">-</span> <span class="n">ydelta</span>
                <span class="k">if</span> <span class="n">hi</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">newhi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">hi</span><span class="p">)</span> <span class="o">-</span> <span class="n">ydelta</span>
            <span class="k">if</span>  <span class="bp">self</span><span class="o">.</span><span class="n">yscale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_ylo</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">newlo</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_yhi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">newhi</span><span class="p">)</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">newlo</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">newhi</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_ylo</span> <span class="o">=</span> <span class="n">newlo</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_yhi</span> <span class="o">=</span> <span class="n">newhi</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">newlo</span><span class="p">,</span> <span class="n">newhi</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>

<div class="viewcode-block" id="PlotPanel.resetFitView"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.resetFitView">[docs]</a>    <span class="k">def</span> <span class="nf">resetFitView</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        For fit Dialog initial display</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmin</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmax</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xminView</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmaxView</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xlo</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xhi</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale_ylo</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scale_yhi</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Avalue</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bvalue</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ErrAvalue</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ErrBvalue</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Chivalue</span> <span class="o">=</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="PlotPanel.onWheel"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onWheel">[docs]</a>    <span class="k">def</span> <span class="nf">onWheel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process mouse wheel as zoom events</span>

<span class="sd">        :param event: Wheel event</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">step</span>

        <span class="k">if</span> <span class="n">ax</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># Event occurred inside a plotting area</span>
            <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">_rescale</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span>
                              <span class="n">pt</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">())</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">xscale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span> <span class="ow">or</span> <span class="n">lo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xlo</span> <span class="o">=</span> <span class="n">lo</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xhi</span> <span class="o">=</span> <span class="n">hi</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">))</span>

            <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
            <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">_rescale</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">pt</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">,</span>
                              <span class="n">scale</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">())</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">yscale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span> <span class="ow">or</span> <span class="n">lo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_ylo</span> <span class="o">=</span> <span class="n">lo</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_scale_yhi</span> <span class="o">=</span> <span class="n">hi</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># Check if zoom happens in the axes</span>
            <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span>

            <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
                <span class="n">insidex</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">insidex</span><span class="p">:</span>
                    <span class="n">xdata</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
                <span class="n">insidey</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">insidey</span><span class="p">:</span>
                    <span class="n">_</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform_point</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">xdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
                <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">_rescale</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span>
                                  <span class="n">bal</span><span class="o">=</span><span class="n">xdata</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xscale</span><span class="p">())</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">xscale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span> <span class="ow">or</span> <span class="n">lo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xlo</span> <span class="o">=</span> <span class="n">lo</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xhi</span> <span class="o">=</span> <span class="n">hi</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">ydata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
                <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">_rescale</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span> <span class="n">bal</span><span class="o">=</span><span class="n">ydata</span><span class="p">,</span>
                                  <span class="n">scale</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">get_yscale</span><span class="p">())</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">yscale</span> <span class="o">==</span> <span class="s">&#39;log&#39;</span> <span class="ow">or</span> <span class="n">lo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_scale_ylo</span> <span class="o">=</span> <span class="n">lo</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_scale_yhi</span> <span class="o">=</span> <span class="n">hi</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.returnTrans"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.returnTrans">[docs]</a>    <span class="k">def</span> <span class="nf">returnTrans</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return values and labels used by Fit Dialog</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Avalue</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Bvalue</span><span class="p">,</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">ErrAvalue</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ErrBvalue</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Chivalue</span>
</div>
<div class="viewcode-block" id="PlotPanel.setTrans"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.setTrans">[docs]</a>    <span class="k">def</span> <span class="nf">setTrans</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xtrans</span><span class="p">,</span> <span class="n">ytrans</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        :param xtrans: set x transformation on Property dialog</span>
<span class="sd">        :param ytrans: set y transformation on Property dialog</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prevXtrans</span> <span class="o">=</span> <span class="n">xtrans</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prevYtrans</span> <span class="o">=</span> <span class="n">ytrans</span>
</div>
<div class="viewcode-block" id="PlotPanel.onFitting"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onFitting">[docs]</a>    <span class="k">def</span> <span class="nf">onFitting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        when clicking on linear Fit on context menu , display Fitting Dialog</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">plot_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventObject</span><span class="p">()</span>
        <span class="n">event_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_selected_from_menu</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span> <span class="n">event_id</span><span class="p">)</span>
        <span class="n">plotlist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">returnPlottable</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">selected_plottable</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">plotlist</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">selected_plottable</span><span class="p">:</span>
                    <span class="n">plot_dict</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">plotlist</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plot_dict</span> <span class="o">=</span> <span class="n">plotlist</span>
        <span class="kn">from</span> <span class="nn">fitDialog</span> <span class="kn">import</span> <span class="n">LinearFit</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">plot_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="n">plot_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">dlg</span> <span class="o">=</span> <span class="n">LinearFit</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">plottable</span><span class="o">=</span><span class="n">first_item</span><span class="p">,</span>
                            <span class="n">push_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">onFitDisplay</span><span class="p">,</span>
                            <span class="n">transform</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">returnTrans</span><span class="p">,</span>
                            <span class="n">title</span><span class="o">=</span><span class="s">&#39;Linear Fit&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xmin</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">)</span><span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xmax</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">)</span>\
                <span class="ow">and</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xminView</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">)</span><span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xmaxView</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">):</span>
                <span class="n">dlg</span><span class="o">.</span><span class="n">setFitRange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xminView</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmaxView</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmax</span><span class="p">)</span>
            <span class="n">dlg</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.set_selected_from_menu"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.set_selected_from_menu">[docs]</a>    <span class="k">def</span> <span class="nf">set_selected_from_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">menu</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set selected_plottable from context menu selection</span>

<span class="sd">        :param menu: context menu item</span>
<span class="sd">        :param id: menu item id</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">GetHelpString</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">plot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">selected_plottable</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">id</span>
                <span class="k">break</span>
</div>
<div class="viewcode-block" id="PlotPanel.linear_plottable_fit"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.linear_plottable_fit">[docs]</a>    <span class="k">def</span> <span class="nf">linear_plottable_fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            when clicking on linear Fit on context menu, display Fitting Dialog</span>

<span class="sd">            :param plot: PlotPanel owning the graph</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">fitDialog</span> <span class="kn">import</span> <span class="n">LinearFit</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fit_dialog</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fit_dialog</span> <span class="o">=</span> <span class="n">LinearFit</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">plot</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onFitDisplay</span><span class="p">,</span>
                                     <span class="bp">self</span><span class="o">.</span><span class="n">returnTrans</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Linear Fit&#39;</span><span class="p">)</span>
        <span class="c"># Set the zoom area</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xhi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xlo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fit_dialog</span><span class="o">.</span><span class="n">set_fit_region</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scale_xlo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scale_xhi</span><span class="p">)</span>
        <span class="c"># Register the close event</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fit_dialog</span><span class="o">.</span><span class="n">register_close</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_linear_fit_close</span><span class="p">)</span>
        <span class="c"># Show a non-model dialog</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fit_dialog</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_linear_fit_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A fit dialog was closed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fit_dialog</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">_onProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        when clicking on Properties on context menu ,</span>
<span class="sd">        The Property dialog is displayed</span>
<span class="sd">        The user selects a transformation for x or y value and</span>
<span class="sd">        a new plot is displayed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fit_dialog</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fit_dialog</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fit_dialog</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">plot_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">returnPlottable</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">plot_list</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">first_item</span> <span class="o">=</span> <span class="n">plot_list</span><span class="o">.</span><span class="n">keys</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">first_item</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="kn">from</span> <span class="nn">PropertyDialog</span> <span class="kn">import</span> <span class="n">Properties</span>
                <span class="n">dial</span> <span class="o">=</span> <span class="n">Properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Properties&#39;</span><span class="p">)</span>
                <span class="n">dial</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prevXtrans</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prevYtrans</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">dial</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">=</span> <span class="n">dial</span><span class="o">.</span><span class="n">getValues</span><span class="p">()</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">==</span> <span class="s">&quot;Linear y vs x&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;x&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;y&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">=</span> <span class="s">&quot;--&quot;</span>
                        <span class="n">dial</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">==</span> <span class="s">&quot;Guinier lny vs x^(2)&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;x^(2)&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;ln(y)&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">=</span> <span class="s">&quot;--&quot;</span>
                        <span class="n">dial</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">==</span> <span class="s">&quot;XS Guinier ln(y*x) vs x^(2)&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;x^(2)&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;ln(y*x)&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">=</span> <span class="s">&quot;--&quot;</span>
                        <span class="n">dial</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">==</span> <span class="s">&quot;Porod y*x^(4) vs x^(4)&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">=</span> <span class="s">&quot;x^(4)&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">=</span> <span class="s">&quot;y*x^(4)&quot;</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">=</span> <span class="s">&quot;--&quot;</span>
                        <span class="n">dial</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_onEVT_FUNC_PROPERTY</span><span class="p">()</span>
                <span class="n">dial</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

<div class="viewcode-block" id="PlotPanel.set_yscale"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.set_yscale">[docs]</a>    <span class="k">def</span> <span class="nf">set_yscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the scale on Y-axis</span>

<span class="sd">        :param scale: the scale of y-axis</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">nonposy</span><span class="o">=</span><span class="s">&#39;clip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yscale</span> <span class="o">=</span> <span class="n">scale</span>
</div>
<div class="viewcode-block" id="PlotPanel.get_yscale"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.get_yscale">[docs]</a>    <span class="k">def</span> <span class="nf">get_yscale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        :return: Y-axis scale</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">yscale</span>
</div>
<div class="viewcode-block" id="PlotPanel.set_xscale"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.set_xscale">[docs]</a>    <span class="k">def</span> <span class="nf">set_xscale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the scale on x-axis</span>

<span class="sd">        :param scale: the scale of x-axis</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xscale</span> <span class="o">=</span> <span class="n">scale</span>
</div>
<div class="viewcode-block" id="PlotPanel.get_xscale"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.get_xscale">[docs]</a>    <span class="k">def</span> <span class="nf">get_xscale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        :return: x-axis scale</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xscale</span>
</div>
<div class="viewcode-block" id="PlotPanel.SetColor"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.SetColor">[docs]</a>    <span class="k">def</span> <span class="nf">SetColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rgbtuple</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set figure and canvas colours to be the same</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rgbtuple</span><span class="p">:</span>
            <span class="n">rgbtuple</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings</span><span class="o">.</span><span class="n">GetColour</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_COLOUR_BTNFACE</span><span class="p">)</span><span class="o">.</span><span class="n">Get</span><span class="p">()</span>
        <span class="n">col</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="o">/</span> <span class="mf">255.0</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">rgbtuple</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="o">*</span><span class="n">rgbtuple</span><span class="p">))</span>
</div>
    <span class="k">def</span> <span class="nf">_onSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resizeflag</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">_onIdle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resizeflag</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_resizeflag</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_SetSize</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_SetSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pixels</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method can be called to force the Plot to be a desired size,</span>
<span class="sd">         which defaults to the ClientSize of the panel</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pixels</span><span class="p">:</span>
            <span class="n">pixels</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetClientSize</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">pixels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">pixels</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_dpi</span><span class="p">(),</span>
                                    <span class="nb">float</span><span class="p">(</span><span class="n">pixels</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">get_dpi</span><span class="p">())</span>

<div class="viewcode-block" id="PlotPanel.draw"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Where the actual drawing happens</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.legend_picker"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.legend_picker">[docs]</a>    <span class="k">def</span> <span class="nf">legend_picker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">legend</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Pick up the legend patch</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">legendPatch</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.get_loc_label"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.get_loc_label">[docs]</a>    <span class="k">def</span> <span class="nf">get_loc_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Associates label to a specific legend location</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_labels</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">_labels</span><span class="p">[</span><span class="s">&#39;best&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">_labels</span><span class="p">[</span><span class="s">&#39;upper right&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">_labels</span><span class="p">[</span><span class="s">&#39;upper left&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">_labels</span><span class="p">[</span><span class="s">&#39;lower left&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">_labels</span><span class="p">[</span><span class="s">&#39;lower right&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">_labels</span><span class="p">[</span><span class="s">&#39;right&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">_labels</span><span class="p">[</span><span class="s">&#39;center left&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">_labels</span><span class="p">[</span><span class="s">&#39;center right&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">_labels</span><span class="p">[</span><span class="s">&#39;lower center&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">_labels</span><span class="p">[</span><span class="s">&#39;upper center&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">_labels</span><span class="p">[</span><span class="s">&#39;center&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="k">return</span> <span class="n">_labels</span>
</div>
<div class="viewcode-block" id="PlotPanel.onSaveImage"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onSaveImage">[docs]</a>    <span class="k">def</span> <span class="nf">onSaveImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Implement save image</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">save_figure</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.onContextMenu"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onContextMenu">[docs]</a>    <span class="k">def</span> <span class="nf">onContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Default context menu for a plot panel</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Slicer plot popup menu</span>
        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">slicerpop</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Menu</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s">&#39;&amp;Save image&#39;</span><span class="p">,</span> <span class="s">&#39;Save image as PNG&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onSaveImage</span><span class="p">)</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s">&#39;&amp;Printer setup&#39;</span><span class="p">,</span> <span class="s">&#39;Set image size&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onPrinterSetup</span><span class="p">)</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s">&#39;&amp;Print image&#39;</span><span class="p">,</span> <span class="s">&#39;Print image &#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onPrint</span><span class="p">)</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s">&#39;&amp;Copy&#39;</span><span class="p">,</span> <span class="s">&#39;Copy to the clipboard&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnCopyFigureMenu</span><span class="p">)</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s">&#39;&amp;Properties&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onProperties</span><span class="p">)</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s">&#39;&amp;Linear Fit&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onFitting</span><span class="p">)</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s">&#39;&amp;Toggle Legend On/Off&#39;</span><span class="p">,</span> <span class="s">&#39;Toggle Legend On/Off&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onLegend</span><span class="p">)</span>

        <span class="n">loc_menu</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Menu</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loc_labels</span><span class="p">:</span>
            <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
            <span class="n">loc_menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">label</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onChangeLegendLoc</span><span class="p">)</span>
        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendMenu</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s">&#39;&amp;Modify Legend Location&#39;</span><span class="p">,</span> <span class="n">loc_menu</span><span class="p">)</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s">&#39;&amp;Modify Y Axis Label&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_yaxis_label</span><span class="p">)</span>
        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s">&#39;&amp;Modify X Axis Label&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_xaxis_label</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c"># mouse event</span>
            <span class="n">pos_evt</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPosition</span><span class="p">()</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ScreenToClient</span><span class="p">(</span><span class="n">pos_evt</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c"># toolbar event</span>
            <span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">GetPositionTuple</span><span class="p">()</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">PopupMenu</span><span class="p">(</span><span class="n">slicerpop</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.onToolContextMenu"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onToolContextMenu">[docs]</a>    <span class="k">def</span> <span class="nf">onToolContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ContextMenu from toolbar</span>

<span class="sd">        :param event: toolbar event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># reset postion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">selected_plottable</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">selected_plottable</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">onContextMenu</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

<span class="c"># modified kieranrcampbell ILL june2012</span></div>
<div class="viewcode-block" id="PlotPanel.onLegend"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onLegend">[docs]</a>    <span class="k">def</span> <span class="nf">onLegend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">legOnOff</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Toggles whether legend is visible/not visible</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_on</span> <span class="o">=</span> <span class="n">legOnOff</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_on</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_legend</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># sort them by labels</span>
            <span class="n">handles</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
            <span class="n">hl</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="p">),</span>
                        <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">handles2</span><span class="p">,</span> <span class="n">labels2</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">hl</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_collections_list</span> <span class="o">=</span> <span class="n">handles2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles2</span><span class="p">,</span> <span class="n">labels2</span><span class="p">,</span>
                                              <span class="n">prop</span><span class="o">=</span><span class="n">FontProperties</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
                                              <span class="n">loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">legendLoc</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">set_picker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend_picker</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">set_axes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.onChangeLegendLoc"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onChangeLegendLoc">[docs]</a>    <span class="k">def</span> <span class="nf">onChangeLegendLoc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes legend loc based on user input</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventObject</span><span class="p">()</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="n">GetLabel</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ChangeLegendLoc</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.ChangeLegendLoc"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.ChangeLegendLoc">[docs]</a>    <span class="k">def</span> <span class="nf">ChangeLegendLoc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes legend loc based on user input</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legendLoc</span> <span class="o">=</span> <span class="n">label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_pos_loc</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c"># sort them by labels</span>
        <span class="n">handles</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
        <span class="n">hl</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="p">),</span>
                    <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">handles2</span><span class="p">,</span> <span class="n">labels2</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">hl</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_collections_list</span> <span class="o">=</span> <span class="n">handles2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles2</span><span class="p">,</span> <span class="n">labels2</span><span class="p">,</span>
                                          <span class="n">prop</span><span class="o">=</span><span class="n">FontProperties</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
                                          <span class="n">loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">legendLoc</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">set_picker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend_picker</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">set_axes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.remove_legend"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.remove_legend">[docs]</a>    <span class="k">def</span> <span class="nf">remove_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove legend for ax or the current axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">gca</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">gca</span><span class="p">()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend_</span> <span class="o">=</span> <span class="bp">None</span>
</div>
    <span class="k">def</span> <span class="nf">_on_addtext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allows you to add text to the plot</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pos_x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">pos_y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">1.00</span>

        <span class="n">textdial</span> <span class="o">=</span> <span class="n">TextDialog</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Add Custom Text&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">textdial</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">FONT</span> <span class="o">=</span> <span class="n">FontProperties</span><span class="p">()</span>
                <span class="n">label</span> <span class="o">=</span> <span class="n">textdial</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
                <span class="n">xpos</span> <span class="o">=</span> <span class="n">pos_x</span>
                <span class="n">ypos</span> <span class="o">=</span> <span class="n">pos_y</span>
                <span class="n">font</span> <span class="o">=</span> <span class="n">FONT</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">textdial</span><span class="o">.</span><span class="n">getSize</span><span class="p">())</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_family</span><span class="p">(</span><span class="n">textdial</span><span class="o">.</span><span class="n">getFamily</span><span class="p">())</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="n">textdial</span><span class="o">.</span><span class="n">getStyle</span><span class="p">())</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_weight</span><span class="p">(</span><span class="n">textdial</span><span class="o">.</span><span class="n">getWeight</span><span class="p">())</span>
                <span class="n">colour</span> <span class="o">=</span> <span class="n">textdial</span><span class="o">.</span><span class="n">getColor</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">label</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">xpos</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">ypos</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">new_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">xpos</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">ypos</span><span class="p">),</span> <span class="n">label</span><span class="p">,</span>
                                                 <span class="n">fontproperties</span><span class="o">=</span><span class="n">font</span><span class="p">,</span>
                                                 <span class="n">color</span><span class="o">=</span><span class="n">colour</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">textList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_text</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Add Text: Error. Check your property values...&quot;</span>
                    <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">msg</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span>
        <span class="n">textdial</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
        <span class="c">#Have a pop up box come up for user to type in the</span>
        <span class="c">#text that they want to add...then create text Plottable</span>
        <span class="c">#based on this and plot it at user designated coordinates</span>

<div class="viewcode-block" id="PlotPanel.onGridOnOff"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onGridOnOff">[docs]</a>    <span class="k">def</span> <span class="nf">onGridOnOff</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gridon_off</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allows ON/OFF Grid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_on</span> <span class="o">=</span> <span class="n">gridon_off</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_on_xaxis_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allows you to add text to the plot</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xaxis_label</span><span class="p">,</span> <span class="n">xaxis_unit</span><span class="p">,</span> <span class="n">xaxis_font</span><span class="p">,</span> <span class="n">xaxis_color</span><span class="p">,</span> \
                     <span class="n">is_ok</span><span class="p">,</span> <span class="n">is_tick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_axis_label</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_ok</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span> <span class="o">=</span> <span class="n">xaxis_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span> <span class="o">=</span> <span class="n">xaxis_unit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_font</span> <span class="o">=</span> <span class="n">xaxis_font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_color</span> <span class="o">=</span> <span class="n">xaxis_color</span>
        <span class="k">if</span> <span class="n">is_tick</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_tick</span> <span class="o">=</span> <span class="n">xaxis_font</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># 2D</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span><span class="p">,</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_font</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_tick</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># 1D</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_zoom_plot</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_check_zoom_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check the zoom range and plot (1D only)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xlo</span><span class="p">,</span> <span class="n">xhi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
        <span class="n">ylo</span><span class="p">,</span> <span class="n">yhi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
        <span class="c">## Set the view scale for all plots</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_onEVT_FUNC_PROPERTY</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_zoomed</span><span class="p">:</span>
            <span class="c"># Recover the x,y limits</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">xlo</span><span class="p">,</span> <span class="n">xhi</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">ylo</span><span class="p">,</span> <span class="n">yhi</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_zoomed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">toolbar_zoomed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">GetToolEnabled</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">wx_ids</span><span class="p">[</span><span class="s">&#39;Back&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_zoomed</span> <span class="ow">or</span> <span class="n">toolbar_zoomed</span>

    <span class="nd">@is_zoomed.setter</span>
    <span class="k">def</span> <span class="nf">is_zoomed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_zoomed</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_on_yaxis_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allows you to add text to the plot</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">yaxis_label</span><span class="p">,</span> <span class="n">yaxis_unit</span><span class="p">,</span> <span class="n">yaxis_font</span><span class="p">,</span> <span class="n">yaxis_color</span><span class="p">,</span> \
                        <span class="n">is_ok</span><span class="p">,</span> <span class="n">is_tick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_axis_label</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_ok</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span> <span class="o">=</span> <span class="n">yaxis_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_unit</span> <span class="o">=</span> <span class="n">yaxis_unit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_font</span> <span class="o">=</span> <span class="n">yaxis_font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_color</span> <span class="o">=</span> <span class="n">yaxis_color</span>
        <span class="k">if</span> <span class="n">is_tick</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_tick</span> <span class="o">=</span> <span class="n">yaxis_font</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># 2D</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_unit</span><span class="p">,</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_font</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_tick</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># 1D</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_zoom_plot</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_on_axis_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modify axes labels</span>

<span class="sd">        :param axis: x or y axis [string]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_ok</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s">&#39;Modify </span><span class="si">%s</span><span class="s"> axis label&#39;</span> <span class="o">%</span> <span class="n">axis</span>
        <span class="n">font</span> <span class="o">=</span> <span class="s">&#39;serif&#39;</span>
        <span class="n">colour</span> <span class="o">=</span> <span class="s">&#39;black&#39;</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="s">&#39;x&#39;</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_unit</span>
        <span class="n">textdial</span> <span class="o">=</span> <span class="n">TextDialog</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">textdial</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">FONT</span> <span class="o">=</span> <span class="n">FontProperties</span><span class="p">()</span>
                <span class="n">font</span> <span class="o">=</span> <span class="n">FONT</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">textdial</span><span class="o">.</span><span class="n">getSize</span><span class="p">())</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_family</span><span class="p">(</span><span class="n">textdial</span><span class="o">.</span><span class="n">getFamily</span><span class="p">())</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="n">textdial</span><span class="o">.</span><span class="n">getStyle</span><span class="p">())</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_weight</span><span class="p">(</span><span class="n">textdial</span><span class="o">.</span><span class="n">getWeight</span><span class="p">())</span>
                <span class="n">unit</span> <span class="o">=</span> <span class="n">textdial</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span>
                <span class="n">colour</span> <span class="o">=</span> <span class="n">textdial</span><span class="o">.</span><span class="n">getColor</span><span class="p">()</span>
                <span class="n">is_tick</span> <span class="o">=</span> <span class="n">textdial</span><span class="o">.</span><span class="n">getTickLabel</span><span class="p">()</span>
                <span class="n">label_temp</span> <span class="o">=</span> <span class="n">textdial</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">label_temp</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;\</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="s">&quot;</span><span class="se">\\</span><span class="s">&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Add Label: Error. Can not use double &#39;</span><span class="se">\\</span><span class="s">&#39; &quot;</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot;characters...&quot;</span>
                        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">msg</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">label</span> <span class="o">=</span> <span class="n">label_temp</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Add Label: Error. Check your property values...&quot;</span>
                    <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">msg</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">is_ok</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">is_tick</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">textdial</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">label</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">font</span><span class="p">,</span> <span class="n">colour</span><span class="p">,</span> <span class="n">is_ok</span><span class="p">,</span> <span class="n">is_tick</span>

    <span class="k">def</span> <span class="nf">_on_removetext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes all text from the plot.</span>
<span class="sd">        Eventually, add option to remove specific text boxes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num_text</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textList</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">num_text</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Remove Text: Nothing to remove.  &quot;</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">msg</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="k">return</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textList</span><span class="p">[</span><span class="n">num_text</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">text_remove</span> <span class="o">=</span> <span class="n">txt</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>
            <span class="n">txt</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Removed Text: &#39;</span><span class="si">%s</span><span class="s">&#39;. &quot;</span> <span class="o">%</span> <span class="n">text_remove</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">msg</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Remove Text: Error occurred. &quot;</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">msg</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textList</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>

<div class="viewcode-block" id="PlotPanel.properties"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.properties">[docs]</a>    <span class="k">def</span> <span class="nf">properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set some properties of the graph.</span>
<span class="sd">        The set of properties is not yet determined.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># The particulars of how they are stored and manipulated (e.g., do</span>
        <span class="c"># we want an inventory internally) is not settled.  I&#39;ve used a</span>
        <span class="c"># property dictionary for now.</span>
        <span class="c">#</span>
        <span class="c"># How these properties interact with a user defined style file is</span>
        <span class="c"># even less clear.</span>

        <span class="c"># Properties defined by plot</span>
        
        <span class="c"># Ricardo:</span>
        <span class="c"># A empty label &quot;$$&quot; will prevent the panel from displaying! </span>
        
        <span class="k">if</span> <span class="n">prop</span><span class="p">[</span><span class="s">&quot;xlabel&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">r&quot;$</span><span class="si">%s</span><span class="s">$&quot;</span><span class="o">%</span><span class="n">prop</span><span class="p">[</span><span class="s">&quot;xlabel&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">prop</span><span class="p">[</span><span class="s">&quot;ylabel&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">r&quot;$</span><span class="si">%s</span><span class="s">$&quot;</span><span class="o">%</span><span class="n">prop</span><span class="p">[</span><span class="s">&quot;ylabel&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">prop</span><span class="p">[</span><span class="s">&quot;title&quot;</span><span class="p">])</span>
        
</div>
<div class="viewcode-block" id="PlotPanel.clear"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reset the plot&quot;&quot;&quot;</span>
        <span class="c"># TODO: Redraw is brutal.  Render to a backing store and swap in</span>
        <span class="c"># TODO: rather than redrawing on the fly.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.render"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.render">[docs]</a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Commit the plot after all objects are drawn&quot;&quot;&quot;</span>
        <span class="c"># TODO: this is when the backing store should be swapped in.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_on</span><span class="p">:</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">texts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textList</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">handles</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
                <span class="c"># sort them by labels</span>
                <span class="n">hl</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="p">),</span>
                            <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">handles2</span><span class="p">,</span> <span class="n">labels2</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">hl</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">line_collections_list</span> <span class="o">=</span> <span class="n">handles2</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles2</span><span class="p">,</span> <span class="n">labels2</span><span class="p">,</span>
                                        <span class="n">prop</span><span class="o">=</span><span class="n">FontProperties</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
                                        <span class="n">loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">legendLoc</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">set_picker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">legend_picker</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">set_axes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">set_zorder</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">prop</span><span class="o">=</span><span class="n">FontProperties</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
                                        <span class="n">loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">legendLoc</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.xaxis"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.xaxis">[docs]</a>    <span class="k">def</span> <span class="nf">xaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;black&#39;</span><span class="p">,</span> <span class="n">t_font</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;xaxis label and units.</span>

<span class="sd">        Axis labels know about units.</span>

<span class="sd">        We need to do this so that we can detect when axes are not</span>
<span class="sd">        commesurate.  Currently this is ignored other than for formatting</span>
<span class="sd">        purposes.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xcolor</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">if</span> <span class="n">units</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;{&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">units</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;$&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">units</span> <span class="o">=</span> <span class="s">&#39;$&#39;</span> <span class="o">+</span> <span class="n">units</span> <span class="o">+</span> <span class="s">&#39;$&#39;</span>
        <span class="k">if</span> <span class="n">label</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;{&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">label</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;$&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s">&#39;$&#39;</span> <span class="o">+</span> <span class="n">label</span> <span class="o">+</span> <span class="s">&#39;$&#39;</span>
        <span class="k">if</span> <span class="n">units</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">label</span> <span class="o">+</span> <span class="s">&quot; (&quot;</span> <span class="o">+</span> <span class="n">units</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span>
        <span class="k">if</span> <span class="n">font</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">fontproperties</span><span class="o">=</span><span class="n">font</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">t_font</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_ticks</span><span class="p">():</span>
                    <span class="n">tick</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">set_fontproperties</span><span class="p">(</span><span class="n">t_font</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_ticklines</span><span class="p">():</span>
                    <span class="n">size</span> <span class="o">=</span> <span class="n">t_font</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
                    <span class="n">line</span><span class="o">.</span><span class="n">set_markersize</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="PlotPanel.yaxis"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.yaxis">[docs]</a>    <span class="k">def</span> <span class="nf">yaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;black&#39;</span><span class="p">,</span> <span class="n">t_font</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;yaxis label and units.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ycolor</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">if</span> <span class="n">units</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;{&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">units</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;$&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">units</span> <span class="o">=</span> <span class="s">&#39;$&#39;</span> <span class="o">+</span> <span class="n">units</span> <span class="o">+</span> <span class="s">&#39;$&#39;</span>
        <span class="k">if</span> <span class="n">label</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;{&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">label</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;$&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s">&#39;$&#39;</span> <span class="o">+</span> <span class="n">label</span> <span class="o">+</span> <span class="s">&#39;$&#39;</span>
        <span class="k">if</span> <span class="n">units</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">label</span> <span class="o">+</span> <span class="s">&quot; (&quot;</span> <span class="o">+</span> <span class="n">units</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span>
        <span class="k">if</span> <span class="n">font</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">fontproperties</span><span class="o">=</span><span class="n">font</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">t_font</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">tick_label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">get_yticklabels</span><span class="p">():</span>
                    <span class="n">tick_label</span><span class="o">.</span><span class="n">set_fontproperties</span><span class="p">(</span><span class="n">t_font</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_ticklines</span><span class="p">():</span>
                    <span class="n">size</span> <span class="o">=</span> <span class="n">t_font</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
                    <span class="n">line</span><span class="o">.</span><span class="n">set_markersize</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
        <span class="k">pass</span>
</div>
    <span class="k">def</span> <span class="nf">_connect_to_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Bind the xlim change notification to the callback&quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">process_xlim</span><span class="p">(</span><span class="n">axes</span><span class="p">):</span>
            <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">subplot</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="n">callback</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;xlim_changed&#39;</span><span class="p">,</span> <span class="n">process_xlim</span><span class="p">)</span>

<div class="viewcode-block" id="PlotPanel.interactive_points"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.interactive_points">[docs]</a>    <span class="k">def</span> <span class="nf">interactive_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">symbol</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">label</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">hide_error</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draw markers with error bars&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">name</span>
        <span class="kn">from</span> <span class="nn">plottable_interactor</span> <span class="kn">import</span> <span class="n">PointInteractor</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">PointInteractor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="n">zorder</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">markersize</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">markersize</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">markersize</span>
        <span class="n">p</span><span class="o">.</span><span class="n">points</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="n">dy</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="n">symbol</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="n">zorder</span><span class="p">,</span>
                 <span class="n">markersize</span><span class="o">=</span><span class="n">markersize</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">hide_error</span><span class="o">=</span><span class="n">hide_error</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yscale</span><span class="p">,</span> <span class="n">nonposy</span><span class="o">=</span><span class="s">&#39;clip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xscale</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.interactive_curve"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.interactive_curve">[docs]</a>    <span class="k">def</span> <span class="nf">interactive_curve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                          <span class="n">symbol</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draw markers with error bars&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">id</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">name</span>
        <span class="kn">from</span> <span class="nn">plottable_interactor</span> <span class="kn">import</span> <span class="n">PointInteractor</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">PointInteractor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="n">zorder</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">curve</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="n">dy</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="n">symbol</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="n">zorder</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yscale</span><span class="p">,</span> <span class="n">nonposy</span><span class="o">=</span><span class="s">&#39;clip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xscale</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.plottable_selected"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.plottable_selected">[docs]</a>    <span class="k">def</span> <span class="nf">plottable_selected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called to register a plottable as selected</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c">#TODO: check that it really is in the list of plottables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">selected_plottable</span> <span class="o">=</span> <span class="nb">id</span>
</div>
<div class="viewcode-block" id="PlotPanel.points"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.points">[docs]</a>    <span class="k">def</span> <span class="nf">points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
               <span class="n">color</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">marker_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
               <span class="nb">id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">hide_error</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draw markers with error bars&quot;&quot;&quot;</span>

        <span class="c"># Convert tuple (lo,hi) to array [(x-lo),(hi-x)]</span>
        <span class="k">if</span> <span class="n">dx</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(()):</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">dx</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dx</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">))</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dy</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">dy</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(()):</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">y</span> <span class="o">-</span> <span class="n">dy</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">y</span><span class="p">))</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dx</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">dy</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_color</span><span class="p">(</span><span class="n">color</span><span class="p">),</span>
                              <span class="n">marker</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_symbol</span><span class="p">(</span><span class="n">symbol</span><span class="p">),</span>
                              <span class="n">markersize</span><span class="o">=</span><span class="n">marker_size</span><span class="p">,</span>
                              <span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
                              <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">hide_error</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">col</span><span class="p">,</span>
                                  <span class="n">marker</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_symbol</span><span class="p">(</span><span class="n">symbol</span><span class="p">),</span>
                                  <span class="n">markersize</span><span class="o">=</span><span class="n">marker_size</span><span class="p">,</span>
                                  <span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
                                  <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="n">dy</span><span class="p">,</span> <span class="n">xerr</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                      <span class="n">ecolor</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">capsize</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
                                      <span class="n">barsabove</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                                      <span class="n">mec</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">mfc</span><span class="o">=</span><span class="n">col</span><span class="p">,</span>
                                      <span class="n">marker</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_symbol</span><span class="p">(</span><span class="n">symbol</span><span class="p">),</span>
                                      <span class="n">markersize</span><span class="o">=</span><span class="n">marker_size</span><span class="p">,</span>
                                      <span class="n">lolims</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">uplims</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                                      <span class="n">xlolims</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">xuplims</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yscale</span><span class="p">,</span> <span class="n">nonposy</span><span class="o">=</span><span class="s">&#39;clip&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xscale</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_onToggleScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        toggle axis and replot image</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">zmin_2D_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span>
        <span class="n">zmax_2D_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">==</span> <span class="s">&#39;log_{10}&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="s">&#39;linear&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">zmin_2D_temp</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">zmax_2D_temp</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="s">&#39;log_{10}&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c"># min log value: no log(negative)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">zmin_2D_temp</span> <span class="o">=</span> <span class="o">-</span><span class="mi">32</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">zmin_2D_temp</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">zmax_2D_temp</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">qx_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qx_data</span><span class="p">,</span>
                   <span class="n">qy_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">xmin_2D</span><span class="p">,</span>
                   <span class="n">xmax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">xmax_2D</span><span class="p">,</span>
                   <span class="n">ymin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ymin_2D</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ymax_2D</span><span class="p">,</span>
                   <span class="n">cmap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cmap</span><span class="p">,</span> <span class="n">zmin</span><span class="o">=</span><span class="n">zmin_2D_temp</span><span class="p">,</span>
                   <span class="n">zmax</span><span class="o">=</span><span class="n">zmax_2D_temp</span><span class="p">)</span>

<div class="viewcode-block" id="PlotPanel.image"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.image">[docs]</a>    <span class="k">def</span> <span class="nf">image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">qx_data</span><span class="p">,</span> <span class="n">qy_data</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span>
              <span class="n">zmin</span><span class="p">,</span> <span class="n">zmax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
              <span class="n">label</span><span class="o">=</span><span class="s">&#39;data2D&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">DEFAULT_CMAP</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render the current data</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qx_data</span> <span class="o">=</span> <span class="n">qx_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span> <span class="o">=</span> <span class="n">qy_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmin_2D</span> <span class="o">=</span> <span class="n">xmin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmax_2D</span> <span class="o">=</span> <span class="n">xmax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ymin_2D</span> <span class="o">=</span> <span class="n">ymin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ymax_2D</span> <span class="o">=</span> <span class="n">ymax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span> <span class="o">=</span> <span class="n">zmin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span> <span class="o">=</span> <span class="n">zmax</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="c"># If we don&#39;t have any data, skip.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_matrix</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="c"># check scale</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">==</span> <span class="s">&#39;log_{10}&#39;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span>  <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span> <span class="o">&lt;=</span> <span class="mi">0</span>  <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="n">output</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">zmin_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span>
                    <span class="n">output</span><span class="p">[</span><span class="n">output</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="n">output</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">])</span>
                    <span class="c">#In log scale Negative values are not correct in general</span>
                    <span class="c">#output[output&lt;=0] = math.log(numpy.min(output[output&gt;0]))</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">zmin_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span>
                    <span class="n">output</span><span class="p">[</span><span class="n">output</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>
                    <span class="n">output</span><span class="p">[</span><span class="n">output</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">32</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">zmin_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span>
                    <span class="n">output</span><span class="p">[</span><span class="n">output</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="n">output</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">])</span>
                    <span class="c">#In log scale Negative values are not correct in general</span>
                    <span class="c">#output[output&lt;=0] = math.log(numpy.min(output[output&gt;0]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="c">#Too many problems in 2D plot with scale</span>
                <span class="k">pass</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">zmin_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span> <span class="o">=</span> <span class="n">cmap</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimension</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="c">#Re-adjust colorbar</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">right</span><span class="o">=.</span><span class="mi">8</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=.</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">im</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">&#39;nearest&#39;</span><span class="p">,</span>
                                     <span class="n">origin</span><span class="o">=</span><span class="s">&#39;lower&#39;</span><span class="p">,</span>
                                     <span class="n">vmin</span><span class="o">=</span><span class="n">zmin_temp</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span><span class="p">,</span>
                                     <span class="n">cmap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cmap</span><span class="p">,</span>
                                     <span class="n">extent</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xmin_2D</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xmax_2D</span><span class="p">,</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">ymin_2D</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ymax_2D</span><span class="p">))</span>

            <span class="n">cbax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.84</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># clear the previous 2D from memory</span>
            <span class="c"># mpl is not clf, so we do</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">right</span><span class="o">=.</span><span class="mi">8</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=.</span><span class="mi">1</span><span class="p">)</span>

            <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_bins</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">Y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y_bins</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="c"># mpl &gt;= 1.0.0</span>
                <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">gca</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s">&#39;3d&#39;</span><span class="p">)</span>
                <span class="c">#ax.disable_mouse_rotation()</span>
                <span class="n">cbax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.84</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">])</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">disable_mouse_rotation</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="c"># mpl &lt; 1.0.0</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;PlotPanel could not import Axes3D&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="n">ax</span> <span class="o">=</span> <span class="n">Axes3D</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
                <span class="n">cbax</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">resizing</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">im</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot_surface</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">rstride</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cstride</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
                                 <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">antialiased</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">cbax</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_frame_on</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">cb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">shrink</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cbax</span><span class="p">)</span>
        <span class="n">cb</span><span class="o">.</span><span class="n">update_bruteforce</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
        <span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s">&#39;$&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">+</span> <span class="s">&#39;$&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimension</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_build_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build a matrix for 2d plot from a vector</span>
<span class="sd">        Returns a matrix (image) with ~ square binning</span>
<span class="sd">        Requirement: need 1d array formats of</span>
<span class="sd">        self.data, self.qx_data, and self.qy_data</span>
<span class="sd">        where each one corresponds to z, x, or y axis values</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># No qx or qy given in a vector format</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qx_data</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span> <span class="o">==</span> <span class="bp">None</span> \
                <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">qx_data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c"># do we need deepcopy here?</span>
            <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

        <span class="c"># maximum # of loops to fillup_pixels</span>
        <span class="c"># otherwise, loop could never stop depending on data</span>
        <span class="n">max_loop</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="c"># get the x and y_bin arrays.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_bins</span><span class="p">()</span>
        <span class="c"># set zero to None</span>

        <span class="c">#Note: Can not use scipy.interpolate.Rbf:</span>
        <span class="c"># &#39;cause too many data points (&gt;10000)&lt;=JHC.</span>
        <span class="c"># 1d array to use for weighting the data point averaging</span>
        <span class="c">#when they fall into a same bin.</span>
        <span class="n">weights_data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">size</span><span class="p">])</span>
        <span class="c"># get histogram of ones w/len(data); this will provide</span>
        <span class="c">#the weights of data on each bins</span>
        <span class="n">weights</span><span class="p">,</span> <span class="n">xedges</span><span class="p">,</span> <span class="n">yedges</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">histogram2d</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span><span class="p">,</span>
                                                    <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qx_data</span><span class="p">,</span>
                                                    <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">y_bins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_bins</span><span class="p">],</span>
                                                    <span class="n">weights</span><span class="o">=</span><span class="n">weights_data</span><span class="p">)</span>
        <span class="c"># get histogram of data, all points into a bin in a way of summing</span>
        <span class="n">image</span><span class="p">,</span> <span class="n">xedges</span><span class="p">,</span> <span class="n">yedges</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">histogram2d</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span><span class="p">,</span>
                                                  <span class="n">y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qx_data</span><span class="p">,</span>
                                                  <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">y_bins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_bins</span><span class="p">],</span>
                                                  <span class="n">weights</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="c"># Now, normalize the image by weights only for weights&gt;1: </span>
        <span class="c"># If weight == 1, there is only one data point in the bin so</span>
        <span class="c"># that no normalization is required.</span>
        <span class="n">image</span><span class="p">[</span><span class="n">weights</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span><span class="p">[</span><span class="n">weights</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">weights</span><span class="p">[</span><span class="n">weights</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span>
        <span class="c"># Set image bins w/o a data point (weight==0) as None (was set to zero</span>
        <span class="c"># by histogram2d.)</span>
        <span class="n">image</span><span class="p">[</span><span class="n">weights</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c"># Fill empty bins with 8 nearest neighbors only when at least</span>
        <span class="c">#one None point exists</span>
        <span class="n">loop</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c"># do while loop until all vacant bins are filled up up</span>
        <span class="c">#to loop = max_loop</span>
        <span class="k">while</span> <span class="ow">not</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="n">weights</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]))</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">loop</span> <span class="o">&gt;=</span> <span class="n">max_loop</span><span class="p">:</span>  <span class="c"># this protects never-ending loop</span>
                <span class="k">break</span>
            <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fillup_pixels</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="n">weights</span><span class="p">)</span>
            <span class="n">loop</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">image</span>

    <span class="k">def</span> <span class="nf">_get_bins</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get bins</span>
<span class="sd">        set x_bins and y_bins into self, 1d arrays of the index with</span>
<span class="sd">        ~ square binning</span>
<span class="sd">        Requirement: need 1d array formats of</span>
<span class="sd">        self.qx_data, and self.qy_data</span>
<span class="sd">        where each one corresponds to  x, or y axis values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># No qx or qy given in a vector format</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qx_data</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span> <span class="o">==</span> <span class="bp">None</span> \
                <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">qx_data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c"># do we need deepcopy here?</span>
            <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

        <span class="c"># find max and min values of qx and qy</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">qx_data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">xmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">qx_data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">ymin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>

        <span class="c"># calculate the range of qx and qy: this way, it is a little</span>
        <span class="c"># more independent</span>
        <span class="n">x_size</span> <span class="o">=</span> <span class="n">xmax</span> <span class="o">-</span> <span class="n">xmin</span>
        <span class="n">y_size</span> <span class="o">=</span> <span class="n">ymax</span> <span class="o">-</span> <span class="n">ymin</span>

        <span class="c"># estimate the # of pixels on each axes</span>
        <span class="n">npix_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span><span class="p">))))</span>
        <span class="n">npix_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qy_data</span><span class="p">)</span> <span class="o">/</span> <span class="n">npix_y</span><span class="p">))</span>

        <span class="c"># bin size: x- &amp; y-directions</span>
        <span class="n">xstep</span> <span class="o">=</span> <span class="n">x_size</span> <span class="o">/</span> <span class="p">(</span><span class="n">npix_x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">ystep</span> <span class="o">=</span> <span class="n">y_size</span> <span class="o">/</span> <span class="p">(</span><span class="n">npix_y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># max and min taking account of the bin sizes</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmax</span> <span class="o">+</span> <span class="n">xstep</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">xmin</span> <span class="o">=</span> <span class="n">xmin</span> <span class="o">-</span> <span class="n">xstep</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="n">ymax</span> <span class="o">+</span> <span class="n">ystep</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">ymin</span> <span class="o">=</span> <span class="n">ymin</span> <span class="o">-</span> <span class="n">ystep</span> <span class="o">/</span> <span class="mf">2.0</span>

        <span class="c"># store x and y bin centers in q space</span>
        <span class="n">x_bins</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">npix_x</span><span class="p">)</span>
        <span class="n">y_bins</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">npix_y</span><span class="p">)</span>

        <span class="c">#set x_bins and y_bins</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_bins</span> <span class="o">=</span> <span class="n">x_bins</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_bins</span> <span class="o">=</span> <span class="n">y_bins</span>

    <span class="k">def</span> <span class="nf">_fillup_pixels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill z values of the empty cells of 2d image matrix</span>
<span class="sd">        with the average over up-to next nearest neighbor points</span>

<span class="sd">        :param image: (2d matrix with some zi = None)</span>

<span class="sd">        :return: image (2d array )</span>

<span class="sd">        :TODO: Find better way to do for-loop below</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># No image matrix given</span>
        <span class="k">if</span> <span class="n">image</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndim</span><span class="p">(</span><span class="n">image</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span> \
                <span class="ow">or</span> <span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> \
                <span class="ow">or</span> <span class="n">weights</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">image</span>
        <span class="c"># Get bin size in y and x directions</span>
        <span class="n">len_y</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="n">len_x</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">temp_image</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">len_y</span><span class="p">,</span> <span class="n">len_x</span><span class="p">])</span>
        <span class="n">weit</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">len_y</span><span class="p">,</span> <span class="n">len_x</span><span class="p">])</span>
        <span class="c"># do for-loop for all pixels</span>
        <span class="k">for</span> <span class="n">n_y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">n_x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="mi">1</span><span class="p">])):</span>
                <span class="c"># find only null pixels</span>
                <span class="k">if</span> <span class="n">weights</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]):</span>
                    <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c"># find 4 nearest neighbors</span>
                    <span class="c"># check where or not it is at the corner</span>
                    <span class="k">if</span> <span class="n">n_y</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span><span class="p">]):</span>
                        <span class="n">temp_image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span>
                        <span class="n">weit</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">n_x</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]):</span>
                        <span class="n">temp_image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="n">image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                        <span class="n">weit</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">n_y</span> <span class="o">!=</span> <span class="n">len_y</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span><span class="p">]):</span>
                        <span class="n">temp_image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span>
                        <span class="n">weit</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">n_x</span> <span class="o">!=</span> <span class="n">len_x</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]):</span>
                        <span class="n">temp_image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="n">image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                        <span class="n">weit</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="c"># go 4 next nearest neighbors when no non-zero</span>
                    <span class="c"># neighbor exists</span>
                    <span class="k">if</span> <span class="n">n_y</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">n_x</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span>\
                         <span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]):</span>
                        <span class="n">temp_image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                        <span class="n">weit</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">n_y</span> <span class="o">!=</span> <span class="n">len_y</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">n_x</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> \
                        <span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]):</span>
                        <span class="n">temp_image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                        <span class="n">weit</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">n_y</span> <span class="o">!=</span> <span class="n">len_y</span> <span class="ow">and</span> <span class="n">n_x</span> <span class="o">!=</span> <span class="n">len_x</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> \
                        <span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]):</span>
                        <span class="n">temp_image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                        <span class="n">weit</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">n_y</span> <span class="o">!=</span> <span class="n">len_y</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">n_x</span> <span class="o">!=</span> <span class="n">len_x</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> \
                        <span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]):</span>
                        <span class="n">temp_image</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="n">image</span><span class="p">[</span><span class="n">n_y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">n_x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                        <span class="n">weit</span><span class="p">[</span><span class="n">n_y</span><span class="p">][</span><span class="n">n_x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c"># get it normalized</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="p">(</span><span class="n">weit</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">image</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_image</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="o">/</span> <span class="n">weit</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">image</span>

<div class="viewcode-block" id="PlotPanel.curve"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.curve">[docs]</a>    <span class="k">def</span> <span class="nf">curve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draw a line on a graph, possibly with confidence intervals.&quot;&quot;&quot;</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
                          <span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yscale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xscale</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a particular colour&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorlist</span><span class="p">[</span><span class="n">c</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorlist</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_symbol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a particular symbol&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbollist</span><span class="p">[</span><span class="n">s</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">symbollist</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">_replot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remove_fit</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rescale the plottables according to the latest</span>
<span class="sd">        user selection and update the plot</span>

<span class="sd">        :param remove_fit: Fit line will be removed if True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">reset_scale</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_onEVT_FUNC_PROPERTY</span><span class="p">(</span><span class="n">remove_fit</span><span class="o">=</span><span class="n">remove_fit</span><span class="p">)</span>
        <span class="c">#TODO: Why do we have to have the following line?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="o">.</span><span class="n">reset_view</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_onEVT_FUNC_PROPERTY</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remove_fit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Receive the x and y transformation from myDialog,</span>
<span class="sd">        Transforms x and y in View</span>
<span class="sd">        and set the scale</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># The logic should be in the right order</span>
        <span class="c"># Delete first, and then get the whole list...</span>
        <span class="k">if</span> <span class="n">remove_fit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ly</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">q_ctrl</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="nb">list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">returnPlottable</span><span class="p">()</span>
        <span class="c"># Changing the scale might be incompatible with</span>
        <span class="c"># currently displayed data (for instance, going</span>
        <span class="c"># from ln to log when all plotted values have</span>
        <span class="c"># negative natural logs).</span>
        <span class="c"># Go linear and only change the scale at the end.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s">&quot;linear&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s">&quot;linear&quot;</span><span class="p">)</span>
        <span class="n">_xscale</span> <span class="o">=</span> <span class="s">&#39;linear&#39;</span>
        <span class="n">_yscale</span> <span class="o">=</span> <span class="s">&#39;linear&#39;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span><span class="p">)</span>

            <span class="c"># control axis labels from the panel itself</span>
            <span class="n">yname</span><span class="p">,</span> <span class="n">yunits</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">yname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span>
                <span class="n">yunits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_unit</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span> <span class="o">=</span> <span class="n">yname</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_unit</span> <span class="o">=</span> <span class="n">yunits</span>
            <span class="n">xname</span><span class="p">,</span> <span class="n">xunits</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">xname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span> <span class="o">=</span> <span class="n">xname</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span> <span class="o">=</span> <span class="n">xunits</span>
            <span class="c"># Goes through all possible scales</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">==</span> <span class="s">&quot;x&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformX</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toX</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToX</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_xaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">==</span> <span class="s">&quot;x^(2)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformX</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toX2</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToX2</span><span class="p">)</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">xunits</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_xaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">^{2}&quot;</span> <span class="o">%</span> <span class="n">xname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">==</span> <span class="s">&quot;x^(4)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformX</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toX4</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToX4</span><span class="p">)</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">xunits</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_xaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">^{4}&quot;</span> <span class="o">%</span> <span class="n">xname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">==</span> <span class="s">&quot;ln(x)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformX</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toLogX</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToLogX</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_xaxis_transformed</span><span class="p">(</span><span class="s">&quot;\ln</span><span class="se">\\</span><span class="s"> </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">==</span> <span class="s">&quot;log10(x)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformX</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toX_pos</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToX_pos</span><span class="p">)</span>
                <span class="n">_xscale</span> <span class="o">=</span> <span class="s">&#39;log&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_xaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span> <span class="o">==</span> <span class="s">&quot;log10(x^(4))&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformX</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toX4</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToX4</span><span class="p">)</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">xunits</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_xaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">^{4}&quot;</span> <span class="o">%</span> <span class="n">xname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xunits</span><span class="p">)</span>
                <span class="n">_xscale</span> <span class="o">=</span> <span class="s">&#39;log&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">==</span> <span class="s">&quot;ln(y)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toLogX</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToLogX</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;\ln</span><span class="se">\\</span><span class="s"> </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">==</span> <span class="s">&quot;y&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toX</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToX</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">==</span> <span class="s">&quot;log10(y)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toX_pos</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToX_pos</span><span class="p">)</span>
                <span class="n">_yscale</span> <span class="o">=</span> <span class="s">&#39;log&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">==</span> <span class="s">&quot;y^(2)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toX2</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToX2</span><span class="p">)</span>
                <span class="n">yunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">yunits</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">^{2}&quot;</span> <span class="o">%</span> <span class="n">yname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">==</span> <span class="s">&quot;1/y&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toOneOverX</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errOneOverX</span><span class="p">)</span>
                <span class="n">yunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">yunits</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;1/</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">==</span> <span class="s">&quot;y*x^(4)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toYX4</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToYX4</span><span class="p">)</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> \ \ </span><span class="si">%s</span><span class="s">^{4}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="p">),</span>
                                              <span class="s">&quot;</span><span class="si">%s%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yunits</span><span class="p">,</span> <span class="n">xunits</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">==</span> <span class="s">&quot;1/sqrt(y)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toOneOverSqrtX</span><span class="p">,</span>
                                <span class="n">transform</span><span class="o">.</span><span class="n">errOneOverSqrtX</span><span class="p">)</span>
                <span class="n">yunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">yunits</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;1/\sqrt{</span><span class="si">%s</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="n">yname</span><span class="p">,</span>
                                              <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">==</span> <span class="s">&quot;ln(y*x)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toLogXY</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToLogXY</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;\ln (</span><span class="si">%s</span><span class="s"> \ \ </span><span class="si">%s</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="p">),</span>
                                              <span class="s">&quot;</span><span class="si">%s%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yunits</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">==</span> <span class="s">&quot;ln(y*x^(2))&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toLogYX2</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToLogYX2</span><span class="p">)</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;\ln (</span><span class="si">%s</span><span class="s"> \ \ </span><span class="si">%s</span><span class="s">^{2})&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="p">),</span>
                                              <span class="s">&quot;</span><span class="si">%s%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yunits</span><span class="p">,</span> <span class="n">xunits</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">==</span> <span class="s">&quot;ln(y*x^(4))&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toLogYX4</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToLogYX4</span><span class="p">)</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;\ln (</span><span class="si">%s</span><span class="s"> \ \ </span><span class="si">%s</span><span class="s">^{4})&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="p">),</span>
                                              <span class="s">&quot;</span><span class="si">%s%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yunits</span><span class="p">,</span> <span class="n">xunits</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span> <span class="o">==</span> <span class="s">&quot;log10(y*x^(4))&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toYX4</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToYX4</span><span class="p">)</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span><span class="p">)</span>
                <span class="n">_yscale</span> <span class="o">=</span> <span class="s">&#39;log&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> \ \ </span><span class="si">%s</span><span class="s">^{4}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="p">),</span>
                                              <span class="s">&quot;</span><span class="si">%s%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yunits</span><span class="p">,</span> <span class="n">xunits</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">==</span> <span class="s">&quot;Guinier lny vs x^(2)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformX</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toX2</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToX2</span><span class="p">)</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">xunits</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_xaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">^{2}&quot;</span> <span class="o">%</span> <span class="n">xname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xunits</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toLogX</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToLogX</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;\ln\ \ </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">yunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewModel</span> <span class="o">==</span> <span class="s">&quot;Porod y*x^(4) vs x^(4)&quot;</span><span class="p">:</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformX</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toX4</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToX4</span><span class="p">)</span>
                <span class="n">xunits</span> <span class="o">=</span> <span class="n">convert_unit</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_xaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">^{4}&quot;</span> <span class="o">%</span> <span class="n">xname</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">xunits</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">transformY</span><span class="p">(</span><span class="n">transform</span><span class="o">.</span><span class="n">toYX4</span><span class="p">,</span> <span class="n">transform</span><span class="o">.</span><span class="n">errToYX4</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">_yaxis_transformed</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> \ \ </span><span class="si">%s</span><span class="s">^{4}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yname</span><span class="p">,</span> <span class="n">xname</span><span class="p">),</span>
                                              <span class="s">&quot;</span><span class="si">%s%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yunits</span><span class="p">,</span> <span class="n">xunits</span><span class="p">))</span>
            <span class="n">item</span><span class="o">.</span><span class="n">transformView</span><span class="p">()</span>

        <span class="c"># set new label and units</span>
        <span class="n">yname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">prop</span><span class="p">[</span><span class="s">&quot;ylabel&quot;</span><span class="p">]</span>
        <span class="n">yunits</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">xname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">prop</span><span class="p">[</span><span class="s">&quot;xlabel&quot;</span><span class="p">]</span>
        <span class="n">xunits</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">resetFitView</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prevXtrans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xLabel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prevYtrans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yLabel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="n">_xscale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="n">_yscale</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">(</span><span class="n">xname</span><span class="p">,</span> <span class="n">xunits</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_font</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_tick</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="n">yname</span><span class="p">,</span> <span class="n">yunits</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_font</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_tick</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">texts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textList</span>
        <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>

<div class="viewcode-block" id="PlotPanel.onFitDisplay"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onFitDisplay">[docs]</a>    <span class="k">def</span> <span class="nf">onFitDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tempx</span><span class="p">,</span> <span class="n">tempy</span><span class="p">,</span> <span class="n">xminView</span><span class="p">,</span>
                     <span class="n">xmaxView</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a new plottable into the graph .In this case this plottable</span>
<span class="sd">        will be used to fit some data</span>

<span class="sd">        :param tempx: The x data of fit line</span>
<span class="sd">        :param tempy: The y data of fit line</span>
<span class="sd">        :param xminView: the lower bound of fitting range</span>
<span class="sd">        :param xminView: the upper bound of  fitting range</span>
<span class="sd">        :param xmin: the lowest value of data to fit to the line</span>
<span class="sd">        :param xmax: the highest value of data to fit to the line</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Saving value to redisplay in Fit Dialog when it is opened again</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Avalue</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Bvalue</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ErrAvalue</span><span class="p">,</span> \
                      <span class="bp">self</span><span class="o">.</span><span class="n">ErrBvalue</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Chivalue</span> <span class="o">=</span> <span class="n">func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xminView</span> <span class="o">=</span> <span class="n">xminView</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmaxView</span> <span class="o">=</span> <span class="n">xmaxView</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmin</span> <span class="o">=</span> <span class="n">xmin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xmax</span> <span class="o">=</span> <span class="n">xmax</span>
        <span class="c">#In case need to change the range of data plotted</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">returnPlottable</span><span class="p">():</span>
            <span class="n">item</span><span class="o">.</span><span class="n">onFitRange</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="c"># Create new data plottable with result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">tempx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">tempy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="o">.</span><span class="n">dx</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="o">.</span><span class="n">dy</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c">#Load the view with the new values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="o">.</span><span class="n">reset_view</span><span class="p">()</span>
        <span class="c"># Add the new plottable to the graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fit_result</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_offset_graph</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.onChangeCaption"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onChangeCaption">[docs]</a>    <span class="k">def</span> <span class="nf">onChangeCaption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="c"># get current caption</span>
        <span class="n">old_caption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_caption</span>
        <span class="c"># Get new caption dialog</span>
        <span class="n">dial</span> <span class="o">=</span> <span class="n">LabelDialog</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Modify Window Title&#39;</span><span class="p">,</span> <span class="n">old_caption</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dial</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="n">new_caption</span> <span class="o">=</span> <span class="n">dial</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>

            <span class="c"># send to guiframe to change the panel caption</span>
            <span class="n">caption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">on_change_caption</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_name</span><span class="p">,</span>
                                                    <span class="n">old_caption</span><span class="p">,</span> <span class="n">new_caption</span><span class="p">)</span>

            <span class="c"># also set new caption in plot_panels list</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">plot_panels</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">uid</span><span class="p">]</span><span class="o">.</span><span class="n">window_caption</span> <span class="o">=</span> <span class="n">caption</span>
            <span class="c"># set new caption</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window_caption</span> <span class="o">=</span> <span class="n">caption</span>

        <span class="n">dial</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.onResetGraph"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onResetGraph">[docs]</a>    <span class="k">def</span> <span class="nf">onResetGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the graph by plotting the full range of data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">returnPlottable</span><span class="p">():</span>
            <span class="n">item</span><span class="o">.</span><span class="n">onReset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_onEVT_FUNC_PROPERTY</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_zoomed</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.onPrint"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onPrint">[docs]</a>    <span class="k">def</span> <span class="nf">onPrint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">print_figure</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotPanel.onPrinterSetup"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onPrinterSetup">[docs]</a>    <span class="k">def</span> <span class="nf">onPrinterSetup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">Printer_Setup</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="PlotPanel.onPrinterPreview"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.onPrinterPreview">[docs]</a>    <span class="k">def</span> <span class="nf">onPrinterPreview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Matplotlib camvas can no longer print itself.  Thus need to do</span>
<span class="sd">        everything ourselves: need to create a printpreview frame to to</span>
<span class="sd">        see the preview but needs a parent frame object.  Also needs a</span>
<span class="sd">        printout object (just as any printing task).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c">#check if parent is a frame.  If not keep getting the higher</span>
            <span class="c">#parent till we find a frame</span>
            <span class="n">_plot</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_plot</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
                <span class="n">_plot</span> <span class="o">=</span> <span class="n">_plot</span><span class="o">.</span><span class="n">GetParent</span><span class="p">()</span>
                <span class="k">assert</span> <span class="n">_plot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>

            <span class="c">#now create the printpeview object</span>
            <span class="n">_preview</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">PrintPreview</span><span class="p">(</span><span class="n">PlotPrintout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">),</span>
                                       <span class="n">PlotPrintout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">))</span>
            <span class="c">#and tie it to a printpreview frame then show it</span>
            <span class="n">_frame</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">PreviewFrame</span><span class="p">(</span><span class="n">_preview</span><span class="p">,</span> <span class="n">_plot</span><span class="p">,</span> <span class="s">&quot;Print Preview&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">650</span><span class="p">))</span>
            <span class="n">_frame</span><span class="o">.</span><span class="n">Centre</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>
            <span class="n">_frame</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span>
            <span class="n">_frame</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="k">pass</span>
</div>
<div class="viewcode-block" id="PlotPanel.OnCopyFigureMenu"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.PlotPanel.OnCopyFigureMenu">[docs]</a>    <span class="k">def</span> <span class="nf">OnCopyFigureMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Copy the current figure to clipboard</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">copy_figure</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;Error in copy Image&quot;</span>


<span class="c">#---------------------------------------------------------------</span></div></div>
<div class="viewcode-block" id="NoRepaintCanvas"><a class="viewcode-back" href="../../../dev/api/sas.plottools.html#sas.plottools.PlotPanel.NoRepaintCanvas">[docs]</a><span class="k">class</span> <span class="nc">NoRepaintCanvas</span><span class="p">(</span><span class="n">FigureCanvasWxAgg</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    We subclass FigureCanvasWxAgg, overriding the _onPaint method, so that</span>
<span class="sd">    the draw method is only called for the first two paint events. After that,</span>
<span class="sd">    the canvas will only be redrawn when it is resized.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">FigureCanvasWxAgg</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_drawn</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">_onPaint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when wxPaintEvt is generated</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isRealized</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">realize</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_drawn</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">repaint</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_drawn</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui_repaint</span><span class="p">(</span><span class="n">drawDC</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">PaintDC</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">SasView 3.1.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, The SasView Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>