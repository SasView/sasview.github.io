<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>sas.perspectives.calculator.resolution_calculator_panel &mdash; SasView 3.1.2 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '3.1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="SasView 3.1.2 documentation" href="../../../../index.html" />
    <link rel="up" title="sas.perspectives.calculator" href="../calculator.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">SasView 3.1.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../calculator.html" accesskey="U">sas.perspectives.calculator</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for sas.perspectives.calculator.resolution_calculator_panel</h1><div class="highlight"><pre>
<span class="c"># pylint: disable=attribute-defined-outside-init</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This software was developed by the University of Tennessee as part of the</span>
<span class="sd">Distributed Data Analysis of Neutron Scattering Experiments (DANSE)</span>
<span class="sd">project funded by the US National Science Foundation.</span>

<span class="sd">See the license text in license.txt</span>

<span class="sd">copyright 2008, 2009, 2010 University of Tennessee</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">wx</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="c">#Use the WxAgg back end. The Wx one takes too long to render</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s">&#39;WXAgg&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_wxagg</span> <span class="kn">import</span> <span class="n">FigureCanvasWxAgg</span> <span class="k">as</span> <span class="n">FigureCanvas</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_wxagg</span> <span class="kn">import</span> <span class="n">NavigationToolbar2Wx</span> <span class="k">as</span> <span class="n">Toolbar</span>
<span class="kn">from</span> <span class="nn">matplotlib.backend_bases</span> <span class="kn">import</span> <span class="n">FigureManagerBase</span>
<span class="c"># Wx-Pylab magic for displaying plots within an application&#39;s window.</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">_pylab_helpers</span>
<span class="c"># The Figure object is used to create backend-independent plot representations.</span>
<span class="kn">from</span> <span class="nn">matplotlib.figure</span> <span class="kn">import</span> <span class="n">Figure</span>

<span class="c">#from sas.guicomm.events import StatusEvent</span>
<span class="kn">from</span> <span class="nn">sas.calculator.resolution_calculator</span> <span class="kn">import</span> <span class="n">ResolutionCalculator</span>
<span class="kn">from</span> <span class="nn">sas.guiframe.events</span> <span class="kn">import</span> <span class="n">StatusEvent</span>
<span class="kn">from</span> <span class="nn">sas.perspectives.calculator.calculator_widgets</span> <span class="kn">import</span> <span class="n">OutputTextCtrl</span>
<span class="kn">from</span> <span class="nn">sas.perspectives.calculator.calculator_widgets</span> <span class="kn">import</span> <span class="n">InputTextCtrl</span>
<span class="kn">from</span> <span class="nn">wx.lib.scrolledpanel</span> <span class="kn">import</span> <span class="n">ScrolledPanel</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">fabs</span>
<span class="kn">from</span> <span class="nn">sas.perspectives.calculator</span> <span class="kn">import</span> <span class="n">calculator_widgets</span> <span class="k">as</span> <span class="n">widget</span>
<span class="kn">from</span> <span class="nn">sas.guiframe.documentation_window</span> <span class="kn">import</span> <span class="n">DocumentationWindow</span>

<span class="n">_BOX_WIDTH</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">_Q_DEFAULT</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="c">#Slit length panel size</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;win32&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">PANEL_TOP</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">PANEL_WIDTH</span> <span class="o">=</span> <span class="mi">525</span>
    <span class="n">PANEL_HEIGHT</span> <span class="o">=</span> <span class="mi">653</span>
    <span class="n">FONT_VARIANT</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">IS_WIN</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">PANEL_TOP</span> <span class="o">=</span> <span class="mi">60</span>
    <span class="n">PANEL_WIDTH</span> <span class="o">=</span> <span class="mi">540</span>
    <span class="n">PANEL_HEIGHT</span> <span class="o">=</span> <span class="mi">662</span>
    <span class="n">FONT_VARIANT</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">IS_WIN</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">_SOURCE_MASS</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Alpha&#39;</span><span class="p">:</span><span class="mf">6.64465620E-24</span><span class="p">,</span>
                <span class="s">&#39;Deuteron&#39;</span><span class="p">:</span><span class="mf">3.34358320E-24</span><span class="p">,</span>
                <span class="s">&#39;Neutron&#39;</span><span class="p">:</span><span class="mf">1.67492729E-24</span><span class="p">,</span>
                <span class="s">&#39;Photon&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                <span class="s">&#39;Proton&#39;</span><span class="p">:</span><span class="mf">1.67262137E-24</span><span class="p">,</span>
                <span class="s">&#39;Triton&#39;</span><span class="p">:</span><span class="mf">5.00826667E-24</span><span class="p">}</span>

<div class="viewcode-block" id="ResolutionCalculatorPanel"><a class="viewcode-back" href="../../../../dev/api/sas.perspectives.calculator.html#sas.perspectives.calculator.resolution_calculator_panel.ResolutionCalculatorPanel">[docs]</a><span class="k">class</span> <span class="nc">ResolutionCalculatorPanel</span><span class="p">(</span><span class="n">ScrolledPanel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Provides the Resolution calculator GUI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">## Internal nickname for the window, used by the AUI manager</span>
    <span class="n">window_name</span> <span class="o">=</span> <span class="s">&quot;SAS Resolution Estimator&quot;</span>
    <span class="c">## Name to appear on the window title bar</span>
    <span class="n">window_caption</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="c">## Flag to tell the AUI manager to put this panel in the center pane</span>
    <span class="n">CENTER_PANE</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&quot;size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">PANEL_WIDTH</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">PANEL_HEIGHT</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&quot;style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FULL_REPAINT_ON_RESIZE</span>
        <span class="n">ScrolledPanel</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetupScrolling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>

        <span class="c"># input defaults</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qx</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qy</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c"># dQ defaults</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_r</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_phi</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_1d</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c"># monchromatic or polychromatic</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wave_color</span> <span class="o">=</span> <span class="s">&#39;mono&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_wave</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_dic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c"># dQ 2d image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c"># results of sigmas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_strings</span> <span class="o">=</span> <span class="s">&#39; &#39;</span>
        <span class="c">#Font size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetWindowVariant</span><span class="p">(</span><span class="n">variant</span><span class="o">=</span><span class="n">FONT_VARIANT</span><span class="p">)</span>
        <span class="c"># Object that receive status event</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span> <span class="o">=</span> <span class="n">ResolutionCalculator</span><span class="p">()</span>
        <span class="c"># Source selection dic</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_mass</span> <span class="o">=</span> <span class="n">_SOURCE_MASS</span>
        <span class="c">#layout attribute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hint_sizer</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c"># detector coordinate of estimation of sigmas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">det_coordinate</span> <span class="o">=</span> <span class="s">&#39;cartesian&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_cb</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_do_layout</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_define_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Define the main sizers building to build this application.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_l_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_spacer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_frame</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticBoxSizer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_frame</span><span class="p">,</span>
                                                  <span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box_source</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_caption</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">boxsizer_source</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticBoxSizer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">box_source</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intensity_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_spread_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_aperture_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_aperture_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source2sample_distance_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2sample_distance_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2detector_distance_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_size_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_pix_size_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hint_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_layout_mass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing mass</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get the mass</span>
        <span class="n">mass_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">mass</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Source: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_hint</span> <span class="o">=</span> <span class="s">&quot;Mass of Neutrons m = </span><span class="si">%s</span><span class="s"> [g]&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">mass</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_cb</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                     <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">CB_READONLY</span><span class="p">,</span>
                                     <span class="n">name</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">mass_value</span><span class="p">)</span>
        <span class="c"># Sort source name because wx2.9 on Mac does not support CB_SORT</span>
        <span class="c"># Custom sorting</span>
        <span class="n">source_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_mass</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">name_source</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">source_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name_source</span><span class="p">)</span>
        <span class="n">source_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">source_list</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">source_cb</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">source_list</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">idx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_cb</span><span class="o">.</span><span class="n">SetStringSelection</span><span class="p">(</span><span class="s">&quot;Neutron&quot;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_COMBOBOX</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_cb</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_source_selection</span><span class="p">)</span>

        <span class="c"># combo box for color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wave_color_cb</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                         <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">CB_READONLY</span><span class="p">,</span>
                                         <span class="n">name</span><span class="o">=</span><span class="s">&#39;color&#39;</span><span class="p">)</span>
        <span class="c"># two choices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wave_color_cb</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="s">&#39;Monochromatic&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wave_color_cb</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="s">&#39;TOF&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wave_color_cb</span><span class="o">.</span><span class="n">SetStringSelection</span><span class="p">(</span><span class="s">&quot;Monochromatic&quot;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_COMBOBOX</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wave_color_cb</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_source_color</span><span class="p">)</span>

        <span class="n">source_hint</span> <span class="o">=</span> <span class="s">&quot;Source Selection: Affect on&quot;</span>
        <span class="n">source_hint</span> <span class="o">+=</span> <span class="s">&quot; the gravitational contribution.</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="n">source_hint</span> <span class="o">+=</span> <span class="s">&quot;Mass of </span><span class="si">%s</span><span class="s">: m = </span><span class="si">%s</span><span class="s"> [g]&quot;</span> <span class="o">%</span> \
                            <span class="p">(</span><span class="s">&#39;Neutron&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">mass</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_txt</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">source_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="bp">self</span><span class="o">.</span><span class="n">mass_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                 <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_cb</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                 <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wave_color_cb</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">_layout_intensity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing intensity</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get the intensity</span>
        <span class="n">intensity_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">intensity</span><span class="p">)</span>
        <span class="n">intensity_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;[counts/s]&#39;</span><span class="p">)</span>
        <span class="n">intensity_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Intensity: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intensity_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                           <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">intensity_hint</span> <span class="o">=</span> <span class="s">&quot;Intensity of Neutrons&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intensity_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">intensity_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intensity_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">intensity_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intensity_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">intensity_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intensity_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                      <span class="p">(</span><span class="n">intensity_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>


    <span class="k">def</span> <span class="nf">_layout_wavelength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing wavelength</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get the wavelength</span>
        <span class="n">wavelength_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">get_wavelength</span><span class="p">())</span>
        <span class="n">wavelength_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;[A]&#39;</span><span class="p">)</span>
        <span class="n">wavelength_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Wavelength: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                            <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">wavelength_hint</span> <span class="o">=</span> <span class="s">&quot;Wavelength of Neutrons&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">wavelength_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">wavelength_hint</span><span class="p">)</span>

        <span class="c"># get the spectrum</span>
        <span class="n">spectrum_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">get_default_spectrum</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_dic</span><span class="p">[</span><span class="s">&#39;Add new&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_dic</span><span class="p">[</span><span class="s">&#39;Flat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spectrum_value</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Spectrum: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                       <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">CB_READONLY</span><span class="p">,</span>
                                       <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
                                       <span class="n">name</span><span class="o">=</span><span class="s">&#39;spectrum&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="s">&#39;Add new&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="s">&#39;Flat&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_COMBOBOX</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_spectrum_cb</span><span class="p">)</span>
        <span class="n">spectrum_hint</span> <span class="o">=</span> <span class="s">&quot;Wavelength Spectrum: Intensity vs. wavelength&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">SetStringSelection</span><span class="p">(</span><span class="s">&#39;Flat&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">spectrum_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">wavelength_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                       <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wavelength_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                       <span class="p">(</span><span class="n">wavelength_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                       <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spectrum_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
                                       <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_txt</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_layout_wavelength_spread</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing wavelength</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get the wavelength</span>
        <span class="n">wavelength_spread_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">get_wavelength_spread</span><span class="p">())</span>
        <span class="n">wavelength_spread_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="n">wavelength_spread_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Wavelength Spread: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_spread_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">wavelength_spread_hint</span> <span class="o">=</span> <span class="s">&quot;Wavelength  Spread of Neutrons&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_spread_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">wavelength_spread_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_spread_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">wavelength_spread_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_spread_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">wavelength_spread_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                               <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wavelength_spread_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                              <span class="p">(</span><span class="n">wavelength_spread_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>


    <span class="k">def</span> <span class="nf">_layout_source_aperture</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing source aperture size</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get the wavelength</span>
        <span class="n">source_aperture_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">source_aperture_size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">source_aperture_size</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">source_aperture_value</span> <span class="o">+=</span> <span class="s">&quot;, &quot;</span>
            <span class="n">source_aperture_value</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">source_aperture_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">source_aperture_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;[cm]&#39;</span><span class="p">)</span>
        <span class="n">source_aperture_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Source Aperture Size: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_aperture_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">source_aperture_hint</span> <span class="o">=</span> <span class="s">&quot;Source Aperture Size&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_aperture_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">source_aperture_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_aperture_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">source_aperture_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_aperture_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">source_aperture_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_aperture_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                            <span class="p">(</span><span class="n">source_aperture_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">_layout_sample_aperture</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing sample aperture size</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get the wavelength</span>
        <span class="n">sample_aperture_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sample_aperture_size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sample_aperture_size</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">sample_aperture_value</span> <span class="o">+=</span> <span class="s">&quot;, &quot;</span>
            <span class="n">sample_aperture_value</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sample_aperture_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">sample_aperture_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;[cm]&#39;</span><span class="p">)</span>
        <span class="n">sample_aperture_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Sample Aperture Size: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_aperture_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">sample_aperture_hint</span> <span class="o">=</span> <span class="s">&quot;Sample Aperture Size&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_aperture_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">sample_aperture_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_aperture_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">sample_aperture_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_aperture_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">sample_aperture_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample_aperture_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                            <span class="p">(</span><span class="n">sample_aperture_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">_layout_source2sample_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing souce2sample_distance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get the wavelength</span>
        <span class="n">source2sample_distance_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">source2sample_distance</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">source2sample_distance_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;[cm]&#39;</span><span class="p">)</span>
        <span class="n">source2sample_distance_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                                   <span class="s">&#39;Source to Sample Aperture Distance: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source2sample_distance_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">source2sample_distance_hint</span> <span class="o">=</span> <span class="s">&quot;Source to Sample Aperture Distance&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source2sample_distance_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">source2sample_distance_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source2sample_distance_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">source2sample_distance_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source2sample_distance_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">source2sample_distance_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                                   <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source2sample_distance_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                                   <span class="p">(</span><span class="n">source2sample_distance_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">_layout_sample2sample_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing sampleslit2sample_distance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get the distance</span>
        <span class="n">sample2sample_distance_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sample2sample_distance</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">sample2sample_distance_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;[cm]&#39;</span><span class="p">)</span>
        <span class="n">sample2sample_distance_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Sample Offset: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2sample_distance_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">sample2sample_distance_hint</span> <span class="o">=</span> <span class="s">&quot;Sample Aperture to Sample Distance&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2sample_distance_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">sample2sample_distance_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2sample_distance_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">sample2sample_distance_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2sample_distance_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">sample2sample_distance_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                                   <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample2sample_distance_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                                   <span class="p">(</span><span class="n">sample2sample_distance_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">_layout_sample2detector_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing sample2detector_distance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get the wavelength</span>
        <span class="n">sample2detector_distance_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sample2detector_distance</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">sample2detector_distance_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;[cm]&#39;</span><span class="p">)</span>
        <span class="n">sample2detector_distance_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                                     <span class="s">&#39;Sample Aperture to Detector Distance: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2detector_distance_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">sample2detector_distance_hint</span> <span class="o">=</span> <span class="s">&quot;Sample Aperture to Detector Distance&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2detector_distance_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">sample2detector_distance_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2detector_distance_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">sample2detector_distance_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2detector_distance_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([</span>\
                        <span class="p">(</span><span class="n">sample2detector_distance_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample2detector_distance_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">sample2detector_distance_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">_layout_detector_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing detector size</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get the wavelength</span>
        <span class="n">detector_size_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_size</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">detector_size_value</span> <span class="o">+=</span> <span class="s">&quot;, &quot;</span>
            <span class="n">detector_size_value</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">detector_size_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="n">detector_size_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Number of Pixels on Detector: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_size_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">detector_size_hint</span> <span class="o">=</span> <span class="s">&quot;Number of Pixels on Detector&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_size_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">detector_size_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_size_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">detector_size_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_size_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">detector_size_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                          <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detector_size_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                          <span class="p">(</span><span class="n">detector_size_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">_layout_detector_pix_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing detector pixel size</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get the detector_pix_size</span>
        <span class="n">detector_pix_size_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_pix_size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_pix_size</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">detector_pix_size_value</span> <span class="o">+=</span> <span class="s">&quot;, &quot;</span>
            <span class="n">detector_pix_size_value</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_pix_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">detector_pix_size_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;[cm]&#39;</span><span class="p">)</span>
        <span class="n">detector_pix_size_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Detector Pixel Size: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_pix_size_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">detector_pix_size_hint</span> <span class="o">=</span> <span class="s">&quot;Detector Pixel Size&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_pix_size_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">detector_pix_size_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_pix_size_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">detector_pix_size_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_pix_size_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">detector_pix_size_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detector_pix_size_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                              <span class="p">(</span><span class="n">detector_pix_size_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">_layout_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing inputs; qx, qy</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">q_title</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;[Q Location of the Estimation]:&quot;</span><span class="p">)</span>
        <span class="c"># sizers for inputs</span>
        <span class="n">inputQx_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="n">inputQy_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="c"># get the default dq</span>
        <span class="n">qx_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">_Q_DEFAULT</span><span class="p">)</span>
        <span class="n">qy_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">_Q_DEFAULT</span><span class="p">)</span>
        <span class="n">qx_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;[1/A]  &#39;</span><span class="p">)</span>
        <span class="n">qy_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;[1/A]  &#39;</span><span class="p">)</span>
        <span class="n">qx_name_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Qx: &#39;</span><span class="p">)</span>
        <span class="n">qy_name_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Qy: &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qx_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qy_tcl</span> <span class="o">=</span> <span class="n">InputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">qx_hint</span> <span class="o">=</span> <span class="s">&quot;Type the Qx value.&quot;</span>
        <span class="n">qy_hint</span> <span class="o">=</span> <span class="s">&quot;Type the Qy value.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qx_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">qx_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qy_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">qy_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qx_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">qx_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qy_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">qy_hint</span><span class="p">)</span>
        <span class="n">inputQx_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">qx_name_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                               <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qx_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">qx_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">)])</span>
        <span class="n">inputQy_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">qy_name_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                               <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qy_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">qy_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">q_title</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                  <span class="p">(</span><span class="n">inputQx_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                   <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                  <span class="p">(</span><span class="n">inputQy_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                   <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">_layout_output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing dQ|| and dQ+</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sigma_title</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="s">&quot;[Standard Deviation of the Resolution Distribution]:&quot;</span><span class="p">)</span>
        <span class="c"># sizers for inputs</span>
        <span class="n">outputQxy_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="n">outputQ_sizer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="n">sigma_unit</span> <span class="o">=</span> <span class="s">&#39;[&#39;</span> <span class="o">+</span> <span class="s">&#39;1/A&#39;</span> <span class="o">+</span> <span class="s">&#39;]&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_r_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Sigma_x:   &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_r_tcl</span> <span class="o">=</span> <span class="n">OutputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span> <span class="o">*</span> <span class="mf">0.8</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_phi_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Sigma_y:&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_phi_tcl</span> <span class="o">=</span> <span class="n">OutputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span> <span class="o">*</span> <span class="mf">0.8</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_lamd_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;Sigma_lamd:&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_lamd_tcl</span> <span class="o">=</span> <span class="n">OutputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span> <span class="o">*</span> <span class="mf">0.7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">sigma_1d_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;( 1D:   Sigma:&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_1d_tcl</span> <span class="o">=</span> <span class="n">OutputTextCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">_BOX_WIDTH</span> <span class="o">*</span> <span class="mf">0.7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">sigmax_hint</span> <span class="o">=</span> <span class="s">&quot; The x component of the geometric resolution,&quot;</span>
        <span class="n">sigmax_hint</span> <span class="o">+=</span> <span class="s">&quot; excluding sigma_lamda.&quot;</span>
        <span class="n">sigmay_hint</span> <span class="o">=</span> <span class="s">&quot; The y component of the geometric resolution,&quot;</span>
        <span class="n">sigmay_hint</span> <span class="o">+=</span> <span class="s">&quot; excluding sigma_lamda.&quot;</span>
        <span class="n">sigma_hint_lamd</span> <span class="o">=</span> <span class="s">&quot; The wavelength contribution in the radial direction&quot;</span>
        <span class="n">sigma_hint_lamd</span> <span class="o">+=</span> <span class="s">&quot;.</span><span class="se">\n</span><span class="s"> Note: The phi component is always zero.&quot;</span>
        <span class="n">sigma_hint_1d</span> <span class="o">=</span> <span class="s">&quot; Resolution in 1-dimension (for 1D data).&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_r_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">sigmax_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_phi_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">sigmay_hint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_lamd_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">sigma_hint_lamd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_1d_tcl</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">sigma_hint_1d</span><span class="p">)</span>
        <span class="n">sigma_r_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">sigma_unit</span><span class="p">)</span>
        <span class="n">sigma_phi_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">sigma_unit</span><span class="p">)</span>
        <span class="n">sigma_lamd_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">sigma_unit</span><span class="p">)</span>
        <span class="n">sigma_1d_unit_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">sigma_unit</span> <span class="o">+</span> <span class="s">&#39; )&#39;</span><span class="p">)</span>
        <span class="n">outputQxy_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma_r_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                 <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma_r_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                 <span class="p">(</span><span class="n">sigma_r_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                 <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma_phi_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                 <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma_phi_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                 <span class="p">(</span><span class="n">sigma_phi_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">)])</span>
        <span class="n">outputQ_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma_lamd_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                               <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma_lamd_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">sigma_lamd_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">sigma_1d_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                               <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma_1d_tcl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">sigma_1d_unit_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">sigma_title</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                   <span class="p">(</span><span class="n">outputQxy_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                    <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                   <span class="p">(</span><span class="n">outputQ_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                    <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">_layout_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fill the sizer containing hint</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hint_msg</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="c">#hint_msg += &quot;This tool is to approximately compute &quot;</span>
        <span class="c">#hint_msg += &quot;the instrumental resolution (dQ).&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">hint_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">hint_msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hint_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="bp">self</span><span class="o">.</span><span class="n">hint_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">)])</span>

    <span class="k">def</span> <span class="nf">_layout_button</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Do the layout for the button widgets</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="s">&quot;Reset&quot;</span><span class="p">)</span>
        <span class="n">hint_on_reset</span> <span class="o">=</span> <span class="s">&quot;...&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">hint_on_reset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_reset</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">wx_id</span><span class="p">)</span>
        <span class="c">#compute button</span>
        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compute_button</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="s">&quot;Compute&quot;</span><span class="p">)</span>
        <span class="n">hint_on_compute</span> <span class="o">=</span> <span class="s">&quot;Compute... Please wait until finished.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compute_button</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">hint_on_compute</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_compute</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">wx_id</span><span class="p">)</span>
        <span class="c">#help button</span>
        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">help_button</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="s">&quot;HELP&quot;</span><span class="p">)</span>
        <span class="n">hint_on_help</span> <span class="o">=</span> <span class="s">&quot;Help on using the Resolution Calculator&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">help_button</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">hint_on_help</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_help</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">wx_id</span><span class="p">)</span>
        <span class="c"># close button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_close</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_CANCEL</span><span class="p">,</span> <span class="s">&#39;Close&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_close</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_close</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bt_close</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="s">&quot;Close this window.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">button_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">((</span><span class="mi">110</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_button</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span>
                                   <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compute_button</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                   <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">help_button</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                   <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bt_close</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compute_button</span><span class="o">.</span><span class="n">SetFocus</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_layout_image</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Layout for image plot</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Contribution by James C.</span>
        <span class="c"># Instantiate a figure object that will contain our plots.</span>
        <span class="c"># Make the fig a little smaller than the default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">6.5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">&#39;white&#39;</span><span class="p">)</span>

        <span class="c"># Initialize the figure canvas, mapping the figure object to the plot</span>
        <span class="c"># engine backend.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">FigureCanvas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>

        <span class="c"># Wx-Pylab magic ...</span>
        <span class="c"># Make our canvas the active figure manager for pylab so that when</span>
        <span class="c"># pylab plotting statements are executed they will operate on our</span>
        <span class="c"># canvas and not create a new frame and canvas for display purposes.</span>
        <span class="c"># This technique allows this application to execute code that uses</span>
        <span class="c"># pylab stataments to generate plots and embed these plots in our</span>
        <span class="c"># application window(s).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fm</span> <span class="o">=</span> <span class="n">FigureManagerBase</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">_pylab_helpers</span><span class="o">.</span><span class="n">Gcf</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fm</span><span class="p">)</span>

        <span class="c"># Instantiate the matplotlib navigation toolbar and explicitly show it.</span>
        <span class="n">mpl_toolbar</span> <span class="o">=</span> <span class="n">Toolbar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
        <span class="c"># Diable pan</span>
        <span class="n">mpl_toolbar</span><span class="o">.</span><span class="n">DeleteToolByPos</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

        <span class="c"># Add a toolbar into the frame</span>
        <span class="n">mpl_toolbar</span><span class="o">.</span><span class="n">Realize</span><span class="p">()</span>

        <span class="c"># Compute before adding the canvas to the sizer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_compute</span><span class="p">()</span>

        <span class="c"># Fill up the sizer</span>
        <span class="k">if</span> <span class="n">IS_WIN</span><span class="p">:</span>
            <span class="n">gap</span> <span class="o">=</span> <span class="mi">27</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gap</span> <span class="o">=</span> <span class="mi">13</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_spacer</span><span class="o">.</span><span class="n">Add</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="n">gap</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_spacer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_spacer</span><span class="o">.</span><span class="n">Add</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="n">gap</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_spacer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">StaticLine</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_spacer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">mpl_toolbar</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_do_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Draw window layout</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c">#  Title of parameters</span>
        <span class="n">instrument_txt</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;[Instrumental Parameters]:&#39;</span><span class="p">)</span>
        <span class="c"># Build individual layouts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_define_structure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_mass</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_wavelength</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_wavelength_spread</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_source_aperture</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_sample_aperture</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_source2sample_distance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_sample2detector_distance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_sample2sample_distance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_detector_size</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_detector_pix_size</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_input</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_output</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_hint</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_button</span><span class="p">()</span>
        <span class="c"># Fill the sizers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">boxsizer_source</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="n">instrument_txt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mass_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wavelength_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wavelength_spread_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_aperture_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample_aperture_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source2sample_distance_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample2detector_distance_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample2sample_distance_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detector_size_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detector_pix_size_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">StaticLine</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">StaticLine</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                      <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                       <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_l_sizer</span><span class="o">.</span><span class="n">AddMany</span><span class="p">([(</span><span class="bp">self</span><span class="o">.</span><span class="n">boxsizer_source</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
                                       <span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">StaticLine</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                       <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">button_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                        <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">TOP</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertical_l_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="c"># Build image plot layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layout_image</span><span class="p">()</span>
        <span class="c"># Add a vertical static line</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">StaticLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                                          <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">PANEL_HEIGHT</span> <span class="o">*</span> <span class="mf">0.94</span><span class="p">),</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">LI_VERTICAL</span><span class="p">))</span>
        <span class="c"># Add the plot to main sizer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertical_r_spacer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_sizer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetAutoLayout</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<div class="viewcode-block" id="ResolutionCalculatorPanel.on_help"><a class="viewcode-back" href="../../../../dev/api/sas.perspectives.calculator.html#sas.perspectives.calculator.resolution_calculator_panel.ResolutionCalculatorPanel.on_help">[docs]</a>    <span class="k">def</span> <span class="nf">on_help</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Bring up the Resolution calculator Documentation whenever</span>
<span class="sd">        the HELP button is clicked.</span>

<span class="sd">        Calls DocumentationWindow with the path of the location within the</span>
<span class="sd">        documentation tree (after /doc/ ....&quot;.  Note that when using old</span>
<span class="sd">        versions of Wx (before 2.9) and thus not the release version of</span>
<span class="sd">        installers, the help comes up at the top level of the file as</span>
<span class="sd">        webbrowser does not pass anything past the # to the browser when it is</span>
<span class="sd">        running &quot;file:///....&quot;</span>

<span class="sd">    :param evt: Triggers on clicking the help button</span>
<span class="sd">    &quot;&quot;&quot;</span>

        <span class="n">_TreeLocation</span> <span class="o">=</span> <span class="s">&quot;user/perspectives/calculator/resolution_calculator_help.html&quot;</span>
        <span class="n">_doc_viewer</span> <span class="o">=</span> <span class="n">DocumentationWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">_TreeLocation</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
                                          <span class="s">&quot;Resolution Calculator Help&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResolutionCalculatorPanel.on_close"><a class="viewcode-back" href="../../../../dev/api/sas.perspectives.calculator.html#sas.perspectives.calculator.resolution_calculator_panel.ResolutionCalculatorPanel.on_close">[docs]</a>    <span class="k">def</span> <span class="nf">on_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        close the window containing this panel</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get ready for other events</span>
        <span class="k">if</span> <span class="n">event</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="c"># Clear the plot</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
            <span class="c"># reset image</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c"># Close panel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">OnClose</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResolutionCalculatorPanel.on_compute"><a class="viewcode-back" href="../../../../dev/api/sas.perspectives.calculator.html#sas.perspectives.calculator.resolution_calculator_panel.ResolutionCalculatorPanel.on_compute">[docs]</a>    <span class="k">def</span> <span class="nf">on_compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute the computation of resolution</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_compute_call</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResolutionCalculatorPanel.on_compute_call"><a class="viewcode-back" href="../../../../dev/api/sas.perspectives.calculator.html#sas.perspectives.calculator.resolution_calculator_panel.ResolutionCalculatorPanel.on_compute_call">[docs]</a>    <span class="k">def</span> <span class="nf">on_compute_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute the computation of resolution</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Skip event for next event</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Please Check your input values &quot;</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot;before starting the computation...&quot;</span>

        <span class="c"># message</span>
        <span class="n">status_type</span> <span class="o">=</span> <span class="s">&#39;progress&#39;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;Calculating...&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">status_type</span><span class="p">)</span>

        <span class="n">status_type</span> <span class="o">=</span> <span class="s">&#39;stop&#39;</span>
        <span class="c"># Q min max list default</span>
        <span class="n">qx_min</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">qx_max</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">qy_min</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">qy_max</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c"># possible max qrange</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qxmin_limit</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qxmax_limit</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qymin_limit</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qymax_limit</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c"># q min and max of the detector</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># Get all the values at set to compute</span>
            <span class="c"># default num bin of wave list</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_wave</span> <span class="o">=</span> <span class="mi">10</span>
            <span class="n">wavelength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_str2longlist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wavelength_tcl</span><span class="o">.</span><span class="n">GetValue</span><span class="p">())</span>
            <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_cb</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
            <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_mass</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">source</span><span class="p">)]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_neutron_mass</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">mass</span><span class="p">))</span>
            <span class="n">wavelength_spread</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_str2longlist</span><span class="p">(</span>\
                        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_spread_tcl</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;;&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
            <span class="c"># Validate the wave inputs</span>
            <span class="n">wave_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_q_input</span><span class="p">(</span><span class="n">wavelength</span><span class="p">,</span> <span class="n">wavelength_spread</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">wave_input</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">wavelength</span><span class="p">,</span> <span class="n">wavelength_spread</span> <span class="o">=</span> <span class="n">wave_input</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_wave</span><span class="p">(</span><span class="n">wavelength</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_wave_spread</span><span class="p">(</span><span class="n">wavelength_spread</span><span class="p">)</span>
            <span class="n">source_aperture_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_aperture_tcl</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
            <span class="n">source_aperture_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_string2list</span><span class="p">(</span><span class="n">source_aperture_size</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_source_aperture_size</span><span class="p">(</span><span class="n">source_aperture_size</span><span class="p">)</span>
            <span class="n">sample_aperture_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_aperture_tcl</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
            <span class="n">sample_aperture_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_string2list</span><span class="p">(</span><span class="n">sample_aperture_size</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_sample_aperture_size</span><span class="p">(</span><span class="n">sample_aperture_size</span><span class="p">)</span>
            <span class="n">source2sample_distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source2sample_distance_tcl</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
            <span class="n">source2sample_distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_string2list</span><span class="p">(</span><span class="n">source2sample_distance</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_source2sample_distance</span><span class="p">(</span><span class="n">source2sample_distance</span><span class="p">)</span>
            <span class="n">sample2sample_distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample2sample_distance_tcl</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
            <span class="n">sample2sample_distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_string2list</span><span class="p">(</span><span class="n">sample2sample_distance</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_sample2sample_distance</span><span class="p">(</span><span class="n">sample2sample_distance</span><span class="p">)</span>
            <span class="n">sample2detector_distance</span> <span class="o">=</span> \
                                <span class="bp">self</span><span class="o">.</span><span class="n">sample2detector_distance_tcl</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
            <span class="n">sample2detector_distance</span> <span class="o">=</span> \
                                <span class="bp">self</span><span class="o">.</span><span class="n">_string2list</span><span class="p">(</span><span class="n">sample2detector_distance</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_sample2detector_distance</span><span class="p">(</span>\
                                                    <span class="n">sample2detector_distance</span><span class="p">)</span>
            <span class="n">detector_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector_size_tcl</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
            <span class="n">detector_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_string2list</span><span class="p">(</span><span class="n">detector_size</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_detector_size</span><span class="p">(</span><span class="n">detector_size</span><span class="p">)</span>
            <span class="n">detector_pix_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">detector_pix_size_tcl</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
            <span class="n">detector_pix_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_string2list</span><span class="p">(</span><span class="n">detector_pix_size</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_detector_pix_size</span><span class="p">(</span><span class="n">detector_pix_size</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">qx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_string2inputlist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qx_tcl</span><span class="o">.</span><span class="n">GetValue</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">qy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_string2inputlist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qy_tcl</span><span class="o">.</span><span class="n">GetValue</span><span class="p">())</span>

            <span class="c"># Find min max of qs</span>
            <span class="n">xmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qx</span><span class="p">)</span>
            <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qx</span><span class="p">)</span>
            <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qy</span><span class="p">)</span>
            <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qy</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_q_input</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy</span><span class="p">):</span>
                <span class="k">raise</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;An error occured during the resolution computation.&quot;</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot;Please check your inputs...&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status_info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">status_type</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">MessageBox</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;Warning&#39;</span><span class="p">)</span>
            <span class="k">return</span>
            <span class="c">#raise ValueError, &quot;Invalid Q Input...&quot;</span>

        <span class="c"># Validate the q inputs</span>
        <span class="n">q_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_q_input</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">q_input</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">qx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">qy</span> <span class="o">=</span> <span class="n">q_input</span>

        <span class="c"># Make list of q min max for mapping</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qx</span><span class="p">)):</span>
            <span class="n">qx_min</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xmin</span><span class="p">)</span>
            <span class="n">qx_max</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qy</span><span class="p">)):</span>
            <span class="n">qy_min</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ymin</span><span class="p">)</span>
            <span class="n">qy_max</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span>

        <span class="c"># Compute the resolution</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c">#_pylab_helpers.Gcf.set_active(self.fm)</span>
            <span class="n">_pylab_helpers</span><span class="o">.</span><span class="n">Gcf</span><span class="o">.</span><span class="n">figs</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c"># Clear the image before redraw</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>
            <span class="c"># reset the image</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">reset_image</span><span class="p">()</span>

        <span class="c"># Compute and get the image plot</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">sas.perspectives.calculator.resolcal_thread</span> <span class="kn">import</span> <span class="n">CalcRes</span> <span class="k">as</span> <span class="n">thread</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sigma_strings</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Resolution: Computation is finished. </span><span class="se">\n</span><span class="s">&#39;</span>
            <span class="n">cal_res</span> <span class="o">=</span> <span class="n">thread</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_map_func</span><span class="p">,</span>
                             <span class="n">qx</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qx</span><span class="p">,</span>
                             <span class="n">qy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">qy</span><span class="p">,</span>
                             <span class="n">qx_min</span><span class="o">=</span><span class="n">qx_min</span><span class="p">,</span>
                             <span class="n">qx_max</span><span class="o">=</span><span class="n">qx_max</span><span class="p">,</span>
                             <span class="n">qy_min</span><span class="o">=</span><span class="n">qy_min</span><span class="p">,</span>
                             <span class="n">qy_max</span><span class="o">=</span><span class="n">qy_max</span><span class="p">,</span>
                             <span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span>
                             <span class="n">completefn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">complete</span><span class="p">)</span>
            <span class="n">cal_res</span><span class="o">.</span><span class="n">queue</span><span class="p">()</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Computation is in progress...&quot;</span>
            <span class="n">status_type</span> <span class="o">=</span> <span class="s">&#39;progress&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_status_info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">status_type</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span>
</div>
<div class="viewcode-block" id="ResolutionCalculatorPanel.complete"><a class="viewcode-back" href="../../../../dev/api/sas.perspectives.calculator.html#sas.perspectives.calculator.resolution_calculator_panel.ResolutionCalculatorPanel.complete">[docs]</a>    <span class="k">def</span> <span class="nf">complete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">elapsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Callafter complete: wx call after needed for stable output</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">complete_cal</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">elapsed</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResolutionCalculatorPanel.complete_cal"><a class="viewcode-back" href="../../../../dev/api/sas.perspectives.calculator.html#sas.perspectives.calculator.resolution_calculator_panel.ResolutionCalculatorPanel.complete_cal">[docs]</a>    <span class="k">def</span> <span class="nf">complete_cal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">elapsed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Complete computation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">image</span>
        <span class="c"># Draw lines in image before drawing</span>
        <span class="n">wave_list</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">get_wave_list</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">wave_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">wave_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="nb">max</span><span class="p">(</span><span class="n">wave_list</span><span class="p">):</span>
            <span class="c"># draw a green rectangle(limit for the longest wavelength</span>
            <span class="c"># to be involved) for tof inputs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_lines</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_draw_lines</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
        <span class="c"># Draw image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="c"># Get and format the sigmas</span>
        <span class="n">sigma_r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sigma_1</span><span class="p">)</span>
        <span class="n">sigma_phi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sigma_2</span><span class="p">)</span>
        <span class="n">sigma_lamd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sigma_lamd</span><span class="p">)</span>
        <span class="n">sigma_1d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sigma_1d</span><span class="p">)</span>

        <span class="c"># Set output values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_r_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">sigma_r</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_phi_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">sigma_phi</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_lamd_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">sigma_lamd</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_1d_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">sigma_1d</span><span class="p">))</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma_strings</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="n">status_type</span> <span class="o">=</span> <span class="s">&#39;stop&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">status_type</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_draw_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw lines in image if applicable</span>
<span class="sd">        : Param image: pylab object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">image</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">color</span> <span class="o">==</span> <span class="s">&#39;g&#39;</span><span class="p">:</span>
            <span class="c"># Get the params from resolution</span>
            <span class="c"># ploting range for largest wavelength</span>
            <span class="n">qx_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qx_min</span>
            <span class="n">qx_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qx_max</span>
            <span class="n">qy_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qy_min</span>
            <span class="n">qy_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qy_max</span>
            <span class="c"># detector range</span>
            <span class="n">detector_qx_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_qx_min</span>
            <span class="n">detector_qx_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_qx_max</span>
            <span class="n">detector_qy_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_qy_min</span>
            <span class="n">detector_qy_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_qy_max</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">qx_min</span><span class="p">,</span> <span class="n">qx_max</span><span class="p">,</span> <span class="n">qy_min</span><span class="p">,</span> <span class="n">qy_max</span> <span class="o">=</span> \
                                <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">get_detector_qrange</span><span class="p">()</span>
            <span class="c"># detector range</span>
            <span class="n">detector_qx_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qxmin_limit</span>
            <span class="n">detector_qx_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qxmax_limit</span>
            <span class="n">detector_qy_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qymin_limit</span>
            <span class="n">detector_qy_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">qymax_limit</span>

        <span class="c"># Draw zero axis lines</span>
        <span class="k">if</span> <span class="n">qy_min</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">qy_max</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">image</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">qx_min</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">qx_max</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">image</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c"># Find x and y ratio values to draw the detector outline</span>
        <span class="n">x_min</span> <span class="o">=</span> <span class="n">fabs</span><span class="p">(</span><span class="n">detector_qx_min</span> <span class="o">-</span> <span class="n">qx_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">qx_max</span> <span class="o">-</span> <span class="n">qx_min</span><span class="p">)</span>
        <span class="n">x_max</span> <span class="o">=</span> <span class="n">fabs</span><span class="p">(</span><span class="n">detector_qx_max</span> <span class="o">-</span> <span class="n">qx_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">qx_max</span> <span class="o">-</span> <span class="n">qx_min</span><span class="p">)</span>
        <span class="n">y_min</span> <span class="o">=</span> <span class="n">fabs</span><span class="p">(</span><span class="n">detector_qy_min</span> <span class="o">-</span> <span class="n">qy_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">qy_max</span> <span class="o">-</span> <span class="n">qy_min</span><span class="p">)</span>
        <span class="n">y_max</span> <span class="o">=</span> <span class="n">fabs</span><span class="p">(</span><span class="n">detector_qy_max</span> <span class="o">-</span> <span class="n">qy_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">qy_max</span> <span class="o">-</span> <span class="n">qy_min</span><span class="p">)</span>

        <span class="c"># Draw Detector outline</span>
        <span class="k">if</span> <span class="n">detector_qy_min</span> <span class="o">&gt;=</span> <span class="n">qy_min</span><span class="p">:</span>
            <span class="n">image</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">detector_qy_min</span> <span class="o">+</span> <span class="mf">0.0002</span><span class="p">,</span>
                          <span class="n">xmin</span><span class="o">=</span><span class="n">x_min</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">x_max</span><span class="p">,</span>
                          <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">detector_qy_max</span> <span class="o">&lt;=</span> <span class="n">qy_max</span><span class="p">:</span>
            <span class="n">image</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">detector_qy_max</span> <span class="o">-</span> <span class="mf">0.0002</span><span class="p">,</span>
                          <span class="n">xmin</span><span class="o">=</span><span class="n">x_min</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">x_max</span><span class="p">,</span>
                          <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">detector_qx_min</span> <span class="o">&gt;=</span> <span class="n">qx_min</span><span class="p">:</span>
            <span class="n">image</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">detector_qx_min</span> <span class="o">+</span> <span class="mf">0.0002</span><span class="p">,</span>
                          <span class="n">ymin</span><span class="o">=</span><span class="n">y_min</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="n">y_max</span><span class="p">,</span>
                          <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">detector_qx_max</span> <span class="o">&lt;=</span> <span class="n">qx_max</span><span class="p">:</span>
            <span class="n">image</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">detector_qx_max</span> <span class="o">-</span> <span class="mf">0.0002</span><span class="p">,</span>
                          <span class="n">ymin</span><span class="o">=</span><span class="n">y_min</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="n">y_max</span><span class="p">,</span>
                          <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
        <span class="n">xmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qx</span><span class="p">)</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qx</span><span class="p">)</span>
        <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qy</span><span class="p">)</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qy</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">color</span> <span class="o">!=</span> <span class="s">&#39;g&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">xmin</span> <span class="o">&lt;</span> <span class="n">detector_qx_min</span> <span class="ow">or</span> <span class="n">xmax</span> <span class="o">&gt;</span> <span class="n">detector_qx_max</span> <span class="ow">or</span> \
                        <span class="n">ymin</span> <span class="o">&lt;</span> <span class="n">detector_qy_min</span> <span class="ow">or</span> <span class="n">ymax</span> <span class="o">&gt;</span> <span class="n">detector_qy_max</span><span class="p">:</span>
                <span class="c"># message</span>
                <span class="n">status_type</span> <span class="o">=</span> <span class="s">&#39;stop&#39;</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;At least one q value located out side of</span><span class="se">\n</span><span class="s">&#39;</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot; the detector range (</span><span class="si">%s</span><span class="s"> &lt; qx &lt; </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s"> &lt; qy &lt; </span><span class="si">%s</span><span class="s">),</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> \
                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="n">detector_qx_min</span><span class="p">),</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="n">detector_qx_max</span><span class="p">),</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="n">detector_qy_min</span><span class="p">),</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="n">detector_qy_max</span><span class="p">))</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot; is ignored in computation.</span><span class="se">\n</span><span class="s">&quot;</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_status_info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">status_type</span><span class="p">)</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">MessageBox</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;Warning&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_map_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qx</span><span class="p">,</span> <span class="n">qy</span><span class="p">,</span> <span class="n">qx_min</span><span class="p">,</span> <span class="n">qx_max</span><span class="p">,</span> <span class="n">qy_min</span><span class="p">,</span> <span class="n">qy_max</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prepare the Mapping for the computation</span>
<span class="sd">        : params qx, qy, qx_min, qx_max, qy_min, qy_max:</span>

<span class="sd">        : return: image (pylab)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">qx_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">qx</span><span class="p">)</span>
            <span class="n">qy_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">qy</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="c"># calculate 2D resolution distribution image</span>
        <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">compute_and_plot</span><span class="p">(</span><span class="n">qx_value</span><span class="p">,</span> <span class="n">qy_value</span><span class="p">,</span>
                                                 <span class="n">qx_min</span><span class="p">,</span> <span class="n">qx_max</span><span class="p">,</span> <span class="n">qy_min</span><span class="p">,</span> <span class="n">qy_max</span><span class="p">,</span>
                                                 <span class="bp">self</span><span class="o">.</span><span class="n">det_coordinate</span><span class="p">)</span>
        <span class="c"># record sigmas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_strings</span> <span class="o">+=</span> <span class="s">&quot; At Qx = </span><span class="si">%s</span><span class="s">, Qy = </span><span class="si">%s</span><span class="s">; </span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">qx_value</span><span class="p">,</span> <span class="n">qy_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sigma_strings</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">image</span>

    <span class="k">def</span> <span class="nf">_sigma_strings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Recode sigmas as strins</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sigma_r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sigma_1</span><span class="p">)</span>
        <span class="n">sigma_phi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sigma_2</span><span class="p">)</span>
        <span class="n">sigma_lamd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sigma_lamd</span><span class="p">)</span>
        <span class="n">sigma_1d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_number</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sigma_1d</span><span class="p">)</span>
        <span class="c"># Set output values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_strings</span> <span class="o">+=</span> <span class="s">&quot;   sigma_x = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">sigma_r</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_strings</span> <span class="o">+=</span> <span class="s">&quot;   sigma_y = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">sigma_phi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_strings</span> <span class="o">+=</span> <span class="s">&quot;   sigma_lamd = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">sigma_lamd</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_strings</span> <span class="o">+=</span> <span class="s">&quot;   sigma_1D = </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">sigma_1d</span>

    <span class="k">def</span> <span class="nf">_validate_q_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qx</span><span class="p">,</span> <span class="n">qy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if q inputs are valid</span>
<span class="sd">        : params qx:  qx as a list</span>
<span class="sd">        : params qy:  qy as a list</span>

<span class="sd">        : return: True/False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># check qualifications</span>
        <span class="k">if</span> <span class="n">qx</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span> <span class="o">!=</span> <span class="s">&#39;list&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">qy</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span> <span class="o">!=</span> <span class="s">&#39;list&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qx</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qy</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="c"># allow one input</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qx</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">qy</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">qx</span> <span class="o">=</span> <span class="p">[</span><span class="n">qx</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">qy</span><span class="p">))]</span>
            <span class="c">#self.qx = qx</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qy</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">qx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">qy</span> <span class="o">=</span> <span class="p">[</span><span class="n">qy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">qx</span><span class="p">))]</span>
            <span class="c">#self.qy = qy</span>
        <span class="c"># check length</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qx</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">qy</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">qx</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">qy</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">return</span> <span class="n">qx</span><span class="p">,</span> <span class="n">qy</span>

<div class="viewcode-block" id="ResolutionCalculatorPanel.on_reset"><a class="viewcode-back" href="../../../../dev/api/sas.perspectives.calculator.html#sas.perspectives.calculator.resolution_calculator_panel.ResolutionCalculatorPanel.on_reset">[docs]</a>    <span class="k">def</span> <span class="nf">on_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute the reset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># skip for another event</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="c"># init resolution_calculator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span> <span class="o">=</span> <span class="n">ResolutionCalculator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">get_all_instrument_params</span><span class="p">()</span>
        <span class="c"># reset all param values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_cb</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">&#39;Neutron&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_on_source_selection</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wave_color_cb</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">&#39;Monochromatic&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_on_source_color</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="c">#self.intensity_tcl.SetValue(str(self.resolution.intensity))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="mf">6.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_spread_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="mf">0.125</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_spectrum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spectrum_dic</span><span class="p">[</span><span class="s">&#39;Flat&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_txt</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">source_aperture_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">source_aperture_size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">source_aperture_size</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">source_aperture_value</span> <span class="o">+=</span> <span class="s">&quot;, &quot;</span>
            <span class="n">source_aperture_value</span> <span class="o">+=</span> \
                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">source_aperture_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source_aperture_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">source_aperture_value</span><span class="p">))</span>
        <span class="n">sample_aperture_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sample_aperture_size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sample_aperture_size</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">sample_aperture_value</span> <span class="o">+=</span> <span class="s">&quot;, &quot;</span>
            <span class="n">sample_aperture_value</span> <span class="o">+=</span> \
                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sample_aperture_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_aperture_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">sample_aperture_value</span><span class="p">)</span>
        <span class="n">source2sample_distance_value</span> <span class="o">=</span> \
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">source2sample_distance</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">source2sample_distance_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">source2sample_distance_value</span><span class="p">)</span>
        <span class="n">sample2sample_distance_value</span> <span class="o">=</span> \
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sample2sample_distance</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2sample_distance_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">sample2sample_distance_value</span><span class="p">)</span>
        <span class="n">sample2detector_distance_value</span> <span class="o">=</span> \
            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">sample2detector_distance</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample2detector_distance_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span>\
                                            <span class="n">sample2detector_distance_value</span><span class="p">)</span>
        <span class="n">detector_size_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_size</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">detector_size_value</span> <span class="o">+=</span> <span class="s">&quot;, &quot;</span>
            <span class="n">detector_size_value</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_size_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">detector_size_value</span><span class="p">)</span>
        <span class="n">detector_pix_size_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_pix_size</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_pix_size</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">detector_pix_size_value</span> <span class="o">+=</span> <span class="s">&quot;, &quot;</span>
            <span class="n">detector_pix_size_value</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">detector_pix_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">detector_pix_size_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">detector_pix_size_value</span><span class="p">)</span>
        <span class="c">#layout attribute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hint_sizer</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c"># reset q inputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qx_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">_Q_DEFAULT</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qy_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">_Q_DEFAULT</span><span class="p">))</span>
        <span class="c"># reset sigma outputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_r_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_phi_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_1d_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="c"># reset radio button</span>
        <span class="c">#self.r_phi_rb.SetValue(True)</span>
        <span class="c"># Finally re-compute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_compute</span><span class="p">()</span>
        <span class="c"># msg on info</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot; Finished the resetting...&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status_info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;stop&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ResolutionCalculatorPanel.format_number"><a class="viewcode-back" href="../../../../dev/api/sas.perspectives.calculator.html#sas.perspectives.calculator.resolution_calculator_panel.ResolutionCalculatorPanel.format_number">[docs]</a>    <span class="k">def</span> <span class="nf">format_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a float in a standardized, human-readable formatted string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">return</span> <span class="n">output</span>

        <span class="n">output</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%-7.4g</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">output</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_string2list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change NNN, NNN to list,ie. [NNN, NNN] where NNN is a number</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_string</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c"># check the number of floats</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">strg</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
            <span class="n">new_string</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">strg</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">string_split</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">string_split</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">str_1</span> <span class="o">=</span> <span class="n">string_split</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">str_2</span> <span class="o">=</span> <span class="n">string_split</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">new_string</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">str_1</span><span class="p">))</span>
                <span class="n">new_string</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">str_2</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">string_split</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">str_1</span> <span class="o">=</span> <span class="n">string_split</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">new_string</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">str_1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;The numbers must be one or two (separated by &#39;,&#39;)...&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_status_info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;stop&#39;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">,</span> <span class="n">msg</span>

        <span class="k">return</span> <span class="n">new_string</span>

    <span class="k">def</span> <span class="nf">_string2inputlist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change NNN, NNN,... to list,ie. [NNN, NNN,...] where NNN is a number</span>

<span class="sd">        : return new_string: string like list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_string</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">string_split</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">string_split</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">string_split</span><span class="p">[</span><span class="n">ind</span><span class="p">])</span>
                <span class="n">new_string</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_value</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">new_string</span>

    <span class="k">def</span> <span class="nf">_str2longlist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change NNN, NNN,... to list, NNN - NNN ; NNN to list, or float to list</span>

<span class="sd">        : return new_string: string like list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;Wrong format of intputs.&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># is float</span>
            <span class="n">out</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="p">)]</span>
            <span class="k">return</span> <span class="n">out</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wave_color</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;mono&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">MessageBox</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;Warning&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c"># has a &#39;-&#39;</span>
                    <span class="k">if</span> <span class="n">string</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;;&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="c"># has a &#39;;&#39;</span>
                            <span class="n">last_list</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;;&#39;</span><span class="p">)</span>
                            <span class="n">num</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">last_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                            <span class="n">max_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">last_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">num_wave</span> <span class="o">=</span> <span class="n">num</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="c"># default num</span>
                            <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wave</span>
                            <span class="n">max_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">min_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                        <span class="c"># make a list</span>
                        <span class="n">bin_size</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">max_value</span> <span class="o">-</span> <span class="n">min_value</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">num</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="p">[</span><span class="n">min_value</span> <span class="o">+</span> <span class="n">bin_size</span> <span class="o">*</span> <span class="n">bnum</span> <span class="k">for</span> <span class="n">bnum</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">)]</span>
                        <span class="k">return</span> <span class="n">out</span>
                    <span class="k">if</span> <span class="n">string</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_string2inputlist</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
                        <span class="k">return</span> <span class="n">out</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_on_xy_coordinate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the detector coordinate for sigmas to x-y coordinate</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="c"># Set the coordinate in Cartesian</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">det_coordinate</span> <span class="o">=</span> <span class="s">&#39;cartesian&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_r_txt</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="s">&#39;Sigma_x:&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_phi_txt</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="s">&#39;Sigma_y:&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_onparamEnter</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_on_rp_coordinate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the detector coordinate for sigmas to polar coordinate</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="c"># Set the coordinate in polar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">det_coordinate</span> <span class="o">=</span> <span class="s">&#39;polar&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_r_txt</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="s">&#39;Sigma_r:   &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_phi_txt</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="s">&#39;Sigma_phi:&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_onparamEnter</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_status_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&quot;update&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Status msg</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s">&quot;stop&quot;</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Compute&quot;</span>
            <span class="n">able</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Wait...&quot;</span>
            <span class="n">able</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compute_button</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">able</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compute_button</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compute_button</span><span class="o">.</span><span class="n">SetToolTipString</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span>
                         <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">_onparamEnter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        On Text_enter_callback, perform compute</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_compute</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_on_source_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        On source combobox selection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">combo</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventObject</span><span class="p">()</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">combo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_cb</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="n">combo</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
        <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">source_mass</span><span class="p">[</span><span class="n">selection</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_neutron_mass</span><span class="p">(</span><span class="n">mass</span><span class="p">)</span>
        <span class="n">source_hint</span> <span class="o">=</span> <span class="s">&quot;Source Selection: Affect on&quot;</span>
        <span class="n">source_hint</span> <span class="o">+=</span> <span class="s">&quot; the gravitational contribution.</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="n">source_hint</span> <span class="o">+=</span> <span class="s">&quot;Mass of </span><span class="si">%s</span><span class="s">: m = </span><span class="si">%s</span><span class="s"> [g]&quot;</span> <span class="o">%</span> \
                            <span class="p">(</span><span class="n">selection</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">get_neutron_mass</span><span class="p">()))</span>
        <span class="c">#source_tip.SetTip(source_hint)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mass_txt</span><span class="o">.</span><span class="n">ToolTip</span><span class="o">.</span><span class="n">SetTip</span><span class="p">(</span><span class="n">source_hint</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_on_source_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        On source color combobox selection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c">#combo = event.GetEventObject()</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="c">#else:</span>
        <span class="n">combo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wave_color_cb</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="n">combo</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wave_color</span> <span class="o">=</span> <span class="n">selection</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wave_color</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;tof&#39;</span><span class="p">:</span>
            <span class="nb">list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">get_wave_list</span><span class="p">()</span>
            <span class="n">minw</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">maxw</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">minw</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">maxw</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> - </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">minw</span><span class="p">,</span> <span class="n">maxw</span><span class="p">))</span>
            <span class="n">minw</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">maxw</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_spread_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> - </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">minw</span><span class="p">,</span> <span class="n">maxw</span><span class="p">))</span>
            <span class="n">spectrum_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_spectrum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spectrum_dic</span><span class="p">[</span><span class="n">spectrum_val</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_txt</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">wavelength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">get_wavelength</span><span class="p">()</span>
            <span class="n">wavelength_spread</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">get_wavelength_spread</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">wavelength</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_spread_tcl</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">wavelength_spread</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_spectrum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spectrum_dic</span><span class="p">[</span><span class="s">&#39;Flat&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_txt</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wavelength_sizer</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_on_spectrum_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        On spectrum ComboBox event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c">#combo = event.GetEventObject()</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">selection</span> <span class="o">==</span> <span class="s">&#39;Add new&#39;</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selectDlg</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">path</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="s">&#39;Flat&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_spectrum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spectrum_dic</span><span class="p">[</span><span class="s">&#39;Flat&#39;</span><span class="p">])</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;No file has been chosen.&quot;</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">MessageBox</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="s">&#39;Info&#39;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">basename</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_dic</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_dic</span><span class="p">[</span><span class="n">basename</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spectrum_cb</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_spectrum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spectrum_dic</span><span class="p">[</span><span class="n">basename</span><span class="p">])</span>
                <span class="k">return</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="o">.</span><span class="n">set_spectrum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spectrum_dic</span><span class="p">[</span><span class="n">selection</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_selectDlg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        open a dialog file to select a customized spectrum</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                            <span class="s">&quot;Choose a wavelength spectrum file: Intensity vs. wavelength&quot;</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">get_save_location</span><span class="p">()</span> <span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;*.*&quot;</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">OPEN</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">GetPath</span><span class="p">()</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">path</span>

    <span class="k">def</span> <span class="nf">_read_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read two columns file as tuples of numpy array</span>

<span class="sd">        :param path: the path to the file to read</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">path</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span>\
                            <span class="s">&quot; Selected Distribution was not loaded: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">))</span>
                <span class="k">return</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span>
            <span class="n">input_f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
            <span class="n">buff</span> <span class="o">=</span> <span class="n">input_f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">buff</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>

            <span class="n">wavelength</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">intensity</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                <span class="n">toks</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">wave</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">toks</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">intens</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">toks</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">wavelength</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wave</span><span class="p">)</span>
                    <span class="n">intensity</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">intens</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="c"># Skip non-data lines</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_value</span><span class="p">)</span>

            <span class="k">return</span> <span class="p">[</span><span class="n">wavelength</span><span class="p">,</span> <span class="n">intensity</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span>
</div>
<div class="viewcode-block" id="ResolutionWindow"><a class="viewcode-back" href="../../../../dev/api/sas.perspectives.calculator.html#sas.perspectives.calculator.resolution_calculator_panel.ResolutionWindow">[docs]</a><span class="k">class</span> <span class="nc">ResolutionWindow</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="n">CHILD_FRAME</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Resolution Window</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">manager</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">title</span><span class="o">=</span><span class="s">&quot;SAS Resolution Estimator&quot;</span><span class="p">,</span>
                 <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">PANEL_WIDTH</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">PANEL_HEIGHT</span><span class="p">),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">title</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">size</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">CHILD_FRAME</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span> <span class="o">=</span> <span class="n">manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panel</span> <span class="o">=</span> <span class="n">ResolutionCalculatorPanel</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_CLOSE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnClose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">((</span><span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">PANEL_TOP</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<div class="viewcode-block" id="ResolutionWindow.OnClose"><a class="viewcode-back" href="../../../../dev/api/sas.perspectives.calculator.html#sas.perspectives.calculator.resolution_calculator_panel.ResolutionWindow.OnClose">[docs]</a>    <span class="k">def</span> <span class="nf">OnClose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        On close event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_pylab_helpers</span><span class="o">.</span><span class="n">Gcf</span><span class="o">.</span><span class="n">figs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">cal_res_frame</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

</div></div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">PySimpleApp</span><span class="p">()</span>
    <span class="n">widget</span><span class="o">.</span><span class="n">CHILD_FRAME</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Frame</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">ResolutionWindow</span><span class="p">()</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">Show</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">MainLoop</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">SasView 3.1.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../calculator.html" >sas.perspectives.calculator</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, The SasView Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>