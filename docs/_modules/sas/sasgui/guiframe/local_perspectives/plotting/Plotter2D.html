
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D &#8212; SasView 4.1.1 documentation</title>
    
    <link rel="stylesheet" href="../../../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../../../',
        VERSION:     '4.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../../../index.html">SasView 4.1.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../../guiframe.html" accesskey="U">sas.sasgui.guiframe</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D</h1><div class="highlight"><pre>
<span></span>
<span class="c1">################################################################################</span>
<span class="c1">#This software was developed by the University of Tennessee as part of the</span>
<span class="c1">#Distributed Data Analysis of Neutron Scattering Experiments (DANSE)</span>
<span class="c1">#project funded by the US National Science Foundation.</span>
<span class="c1">#</span>
<span class="c1">#See the license text in license.txt</span>
<span class="c1">#</span>
<span class="c1">#copyright 2008, University of Tennessee</span>
<span class="c1">################################################################################</span>


<span class="kn">import</span> <span class="nn">wx</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">sas.sasgui.plottools.PlotPanel</span> <span class="k">import</span> <span class="n">PlotPanel</span>
<span class="kn">from</span> <span class="nn">sas.sasgui.plottools.plottables</span> <span class="k">import</span> <span class="n">Graph</span>
<span class="kn">from</span> <span class="nn">sas.sasgui.plottools.TextDialog</span> <span class="k">import</span> <span class="n">TextDialog</span>
<span class="kn">from</span> <span class="nn">sas.sasgui.guiframe.events</span> <span class="k">import</span> <span class="n">StatusEvent</span>
<span class="kn">from</span> <span class="nn">sas.sasgui.guiframe.events</span> <span class="k">import</span> <span class="n">NewPlotEvent</span>
<span class="kn">from</span> <span class="nn">sas.sasgui.guiframe.events</span> <span class="k">import</span> <span class="n">PanelOnFocusEvent</span>
<span class="kn">from</span> <span class="nn">sas.sasgui.guiframe.events</span> <span class="k">import</span> <span class="n">SlicerEvent</span>
<span class="kn">from</span> <span class="nn">sas.sasgui.guiframe.utils</span> <span class="k">import</span> <span class="n">PanelMenu</span>
<span class="kn">from</span>  <span class="nn">sas.sasgui.guiframe.local_perspectives.plotting.binder</span> <span class="k">import</span> <span class="n">BindArtist</span>
<span class="kn">from</span> <span class="nn">Plotter1D</span> <span class="k">import</span> <span class="n">ModelPanel1D</span>
<span class="kn">from</span> <span class="nn">sas.sasgui.plottools.toolbar</span> <span class="k">import</span> <span class="n">NavigationToolBar</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="k">import</span> <span class="n">FontProperties</span>
<span class="kn">from</span> <span class="nn">graphAppearance</span> <span class="k">import</span> <span class="n">graphAppearance</span>
<span class="p">(</span><span class="n">InternalEvent</span><span class="p">,</span> <span class="n">EVT_INTERNAL</span><span class="p">)</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">newevent</span><span class="o">.</span><span class="n">NewEvent</span><span class="p">()</span>

<span class="n">DEFAULT_QMAX</span> <span class="o">=</span> <span class="mf">0.05</span>
<span class="n">DEFAULT_QSTEP</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="n">DEFAULT_BEAM</span> <span class="o">=</span> <span class="mf">0.005</span>
<span class="n">BIN_WIDTH</span> <span class="o">=</span> <span class="mf">1.0</span>


<div class="viewcode-block" id="find_key"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.find_key">[docs]</a><span class="k">def</span> <span class="nf">find_key</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return the key of dictionary dic given the value&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">dic</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="n">val</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span></div>


<div class="viewcode-block" id="NavigationToolBar2D"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.NavigationToolBar2D">[docs]</a><span class="k">class</span> <span class="nc">NavigationToolBar2D</span><span class="p">(</span><span class="n">NavigationToolBar</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">NavigationToolBar</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">canvas</span><span class="o">=</span><span class="n">canvas</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>

<div class="viewcode-block" id="NavigationToolBar2D.delete_option"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.NavigationToolBar2D.delete_option">[docs]</a>    <span class="k">def</span> <span class="nf">delete_option</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        remove default toolbar item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#delete reset button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DeleteToolByPos</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1">#delete dragging</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DeleteToolByPos</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="c1">#delete unwanted button that configures subplot parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">DeleteToolByPos</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span></div>

<div class="viewcode-block" id="NavigationToolBar2D.add_option"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.NavigationToolBar2D.add_option">[docs]</a>    <span class="k">def</span> <span class="nf">add_option</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        add item to the toolbar</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#add button</span>
        <span class="n">id_context</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">context_tip</span> <span class="o">=</span> <span class="s1">&#39;Graph Menu&#39;</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ArtProvider</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ART_LIST_VIEW</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ART_TOOLBAR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">InsertSimpleTool</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">id_context</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">context_tip</span><span class="p">,</span> <span class="n">context_tip</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_TOOL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_context</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">onToolContextMenu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">InsertSeparator</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1">#add print button</span>
        <span class="n">id_print</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">NewId</span><span class="p">()</span>
        <span class="n">print_bmp</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ArtProvider</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ART_PRINT</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ART_TOOLBAR</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AddSimpleTool</span><span class="p">(</span><span class="n">id_print</span><span class="p">,</span> <span class="n">print_bmp</span><span class="p">,</span> <span class="s1">&#39;Print&#39;</span><span class="p">,</span> <span class="s1">&#39;Activate printing&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_TOOL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_print</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_print</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ModelPanel2D"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D">[docs]</a><span class="k">class</span> <span class="nc">ModelPanel2D</span><span class="p">(</span><span class="n">ModelPanel1D</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot panel for use with the GUI manager</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">## Internal name for the AUI manager</span>
    <span class="n">window_name</span> <span class="o">=</span> <span class="s2">&quot;plotpanel&quot;</span>
    <span class="c1">## Title to appear on top of the window</span>
    <span class="n">window_caption</span> <span class="o">=</span> <span class="s2">&quot;Plot Panel&quot;</span>
    <span class="c1">## Flag to tell the GUI manager that this panel is not</span>
    <span class="c1">#  tied to any perspective</span>
    <span class="n">ALWAYS_ON</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="c1">## Group ID</span>
    <span class="n">group_id</span> <span class="o">=</span> <span class="kc">None</span>


    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">data2d</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">dpi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">NO_FULL_REPAINT_ON_RESIZE</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the panel</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ModelPanel1D</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="c1">## Reference to the parent window</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;parent&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span>
        <span class="c1">## Dictionary containing Plottables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plots</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1">## Save reference of the current plotted</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span> <span class="o">=</span> <span class="n">data2d</span>
        <span class="c1">## Unique ID (from gui_manager)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uid</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">## Action IDs for internal call-backs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">action_ids</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1">## Create Artist and bind it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span> <span class="o">=</span> <span class="n">BindArtist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
        <span class="c1">## Beam stop</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beamstop_radius</span> <span class="o">=</span> <span class="n">DEFAULT_BEAM</span>
        <span class="c1">## to set the order of lines drawn first.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slicer_z</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="c1">## Reference to the current slicer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">## event to send slicer info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_INTERNAL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onEVT_INTERNAL</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">axes_frozen</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">## panel that contains result from slicer motion (ex: Boxsum info)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panel_slicer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title_label</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title_font</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title_color</span> <span class="o">=</span> <span class="s1">&#39;black&#39;</span>
        <span class="c1">## Graph</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">rm</span><span class="si">{Q}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;A^{-1}&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">rm</span><span class="si">{Intensity}</span><span class="s2"> &quot;</span><span class="p">,</span> <span class="s2">&quot;cm^{-1}&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1">## store default value of zmin and zmax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_zmin_ctl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_zmax_ctl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span>

<div class="viewcode-block" id="ModelPanel2D.on_plot_qrange"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.on_plot_qrange">[docs]</a>    <span class="k">def</span> <span class="nf">on_plot_qrange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        On Qmin Qmax vertical line event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Not implemented</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span></div>

<div class="viewcode-block" id="ModelPanel2D.onLeftDown"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onLeftDown">[docs]</a>    <span class="k">def</span> <span class="nf">onLeftDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        left button down and ready to drag</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check that the LEFT button was pressed</span>
        <span class="n">PlotPanel</span><span class="o">.</span><span class="n">onLeftDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># data coordinate position</span>
            <span class="n">pos_x</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%8.3g</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span>
            <span class="n">pos_y</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%8.3g</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span>
            <span class="n">position</span> <span class="o">=</span> <span class="s2">&quot;x: </span><span class="si">%s</span><span class="s2">    y: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">position</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plottable_selected</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_manager</span><span class="o">.</span><span class="n">set_panel_on_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">PanelOnFocusEvent</span><span class="p">(</span><span class="n">panel</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="ModelPanel2D.add_toolbar"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.add_toolbar">[docs]</a>    <span class="k">def</span> <span class="nf">add_toolbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        add toolbar</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_toolbar</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span> <span class="o">=</span> <span class="n">NavigationToolBar2D</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">canvas</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">Realize</span><span class="p">()</span>
        <span class="c1"># On Windows platform, default window size is incorrect, so set</span>
        <span class="c1"># toolbar width to figure width.</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">th</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">GetSizeTuple</span><span class="p">()</span>
        <span class="n">fw</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">GetSizeTuple</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="n">fw</span><span class="p">,</span> <span class="n">th</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">LEFT</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span><span class="p">)</span>
        <span class="c1"># update the axes menu on the toolbar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="ModelPanel2D.plot_data"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.plot_data">[docs]</a>    <span class="k">def</span> <span class="nf">plot_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Data is ready to be displayed</span>

<span class="sd">        :TODO: this name should be changed to something more appropriate</span>
<span class="sd">             Don&#39;t forget that changing this name will mean changing code</span>
<span class="sd">             in plotting.py</span>

<span class="sd">        :param event: data event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xlo</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">xhi</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ylo</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">yhi</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;Data1D&#39;</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="c1">## Update self.data2d with the current plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="c1">#replace</span>
            <span class="n">xlo</span><span class="p">,</span> <span class="n">xhi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
            <span class="n">ylo</span><span class="p">,</span> <span class="n">yhi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">id</span><span class="p">])</span>
            <span class="c1"># update qmax with the new xmax of data plotted</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">qmax</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">xmax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Check axis labels</span>
        <span class="c1">#TODO: Should re-factor this</span>
        <span class="c1">## render the graph with its new content</span>
        <span class="c1">#data2D: put &#39;Pixel (Number)&#39; for axis title and unit in case of having no detector info and none in _units</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">detector</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">_xunit</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">_yunit</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">data</span><span class="o">.</span><span class="n">_xaxis</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">rm</span><span class="si">{x}</span><span class="s1">&#39;</span>
                <span class="n">data</span><span class="o">.</span><span class="n">_yaxis</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">rm</span><span class="si">{y}</span><span class="s1">&#39;</span>
                <span class="n">data</span><span class="o">.</span><span class="n">_xunit</span> <span class="o">=</span> <span class="s1">&#39;pixel&#39;</span>
                <span class="n">data</span><span class="o">.</span><span class="n">_yunit</span> <span class="o">=</span> <span class="s1">&#39;pixel&#39;</span>
        <span class="c1"># graph properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">_xaxis</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">_xunit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">_yaxis</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">_yunit</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_changed_legend_label</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title_label</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">label</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">title_font</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="c1"># Set the axis labels on subplot</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_axis_labels</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_plot</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_plot</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
                                   <span class="n">fontproperties</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">title_font</span><span class="p">,</span>
                                   <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">title_color</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
        <span class="c1">## store default value of zmin and zmax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_zmin_ctl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_zmax_ctl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_zoomed</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="c1"># Recover the x,y limits</span>
        <span class="k">if</span> <span class="n">xlo</span> <span class="ow">and</span> <span class="n">xhi</span> <span class="ow">and</span> <span class="n">ylo</span> <span class="ow">and</span> <span class="n">yhi</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">xlo</span> <span class="o">&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">xmin</span> <span class="ow">and</span> <span class="n">xhi</span> <span class="o">&lt;</span> <span class="n">data</span><span class="o">.</span><span class="n">xmax</span> <span class="ow">and</span> \
                        <span class="n">ylo</span> <span class="o">&gt;</span> <span class="n">data</span><span class="o">.</span><span class="n">ymin</span> <span class="ow">and</span> <span class="n">yhi</span> <span class="o">&lt;</span> <span class="n">data</span><span class="o">.</span><span class="n">ymax</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">((</span><span class="n">xlo</span><span class="p">,</span> <span class="n">xhi</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">((</span><span class="n">ylo</span><span class="p">,</span> <span class="n">yhi</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">is_zoomed</span> <span class="o">=</span> <span class="kc">False</span></div>

    <span class="k">def</span> <span class="nf">_set_axis_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set axis labels</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span>
        <span class="c1"># control axis labels from the panel itself</span>
        <span class="n">yname</span><span class="p">,</span> <span class="n">yunits</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">yname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span>
            <span class="n">yunits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_unit</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span> <span class="o">=</span> <span class="n">yname</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_unit</span> <span class="o">=</span> <span class="n">yunits</span>
        <span class="n">xname</span><span class="p">,</span> <span class="n">xunits</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span>
            <span class="n">xunits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span> <span class="o">=</span> <span class="n">xname</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span> <span class="o">=</span> <span class="n">xunits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">(</span><span class="n">xname</span><span class="p">,</span> <span class="n">xunits</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_font</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_tick</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="n">yname</span><span class="p">,</span> <span class="n">yunits</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_font</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_color</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_tick</span><span class="p">)</span>

<div class="viewcode-block" id="ModelPanel2D.onContextMenu"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onContextMenu">[docs]</a>    <span class="k">def</span> <span class="nf">onContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        2D plot context menu</span>

<span class="sd">        :param event: wx context event</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_menu_ids</span><span class="p">)</span>
        <span class="n">slicerpop</span> <span class="o">=</span> <span class="n">PanelMenu</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">set_plots</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">)</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">set_graph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">)</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Save Image&#39;</span><span class="p">,</span> <span class="s1">&#39;Save image as png&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onSaveImage</span><span class="p">)</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Print Image&#39;</span><span class="p">,</span> <span class="s1">&#39;Print image&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onPrint</span><span class="p">)</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Copy to Clipboard&#39;</span><span class="p">,</span> <span class="s1">&#39;Copy to the clipboard&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnCopyFigureMenu</span><span class="p">)</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>
        <span class="c1"># saving data</span>
        <span class="n">plot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span>
        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s2">&quot;&amp;Data Info&quot;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onDataShow</span><span class="p">)</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s2">&quot;&amp;Save as a File (DAT)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">action_ids</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">wx_id</span><span class="p">)]</span> <span class="o">=</span> <span class="n">plot</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onSave</span><span class="p">)</span>

        <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">detector</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">item_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">get_current_context_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">item_list</span> <span class="o">==</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">item_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span>\
                <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Residuals&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">wx_id</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">item_list</span><span class="p">,</span> <span class="p">[</span><span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">item_list</span><span class="p">))]):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;ModelPanel1D.onContextMenu: &quot;</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;bad menu item  </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_value</span>
                        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">msg</span><span class="p">))</span>
                <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>

            <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
            <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Perform Circular Average&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onCircular</span><span class="p">)</span> \
            <span class="c1"># For Masked Data</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">plot</span><span class="o">.</span><span class="n">mask</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
                <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Masked Circular Average&#39;</span><span class="p">)</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onMaskedCircular</span><span class="p">)</span>
            <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
            <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Sector [Q View]&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onSectorQ</span><span class="p">)</span>
            <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
            <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Annulus [Phi View ]&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onSectorPhi</span><span class="p">)</span>
            <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
            <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Box Sum&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onBoxSum</span><span class="p">)</span>
            <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
            <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Box Averaging in Qx&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onBoxavgX</span><span class="p">)</span>
            <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
            <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Box Averaging in Qy&#39;</span><span class="p">)</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onBoxavgY</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
                <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Clear Slicer&#39;</span><span class="p">)</span>
                <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onClearSlicer</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">!=</span> <span class="s2">&quot;BoxSum&quot;</span><span class="p">:</span>
                    <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
                    <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Edit Slicer Parameters&#39;</span><span class="p">)</span>
                    <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onEditSlicer</span><span class="p">)</span>
            <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Edit Graph Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Edit Graph Label&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onEditLabels</span><span class="p">)</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>

        <span class="c1"># ILL mod here</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Modify graph appearance&#39;</span><span class="p">,</span> <span class="s1">&#39;Modify graph appearance&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">modifyGraphAppearance</span><span class="p">)</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;2D Color Map&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onEditDetector</span><span class="p">)</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>

        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Toggle Linear/Log Scale&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_onToggleScale</span><span class="p">)</span>

        <span class="n">slicerpop</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>
        <span class="n">wx_id</span> <span class="o">=</span> <span class="n">ids</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
        <span class="n">slicerpop</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">wx_id</span><span class="p">,</span> <span class="s1">&#39;&amp;Window Title&#39;</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">EVT_MENU</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wx_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onChangeCaption</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">pos_evt</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPosition</span><span class="p">()</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ScreenToClient</span><span class="p">(</span><span class="n">pos_evt</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolbar</span><span class="o">.</span><span class="n">GetPositionTuple</span><span class="p">()</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PopupMenu</span><span class="p">(</span><span class="n">slicerpop</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span></div>

<div class="viewcode-block" id="ModelPanel2D.onEditLabels"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onEditLabels">[docs]</a>    <span class="k">def</span> <span class="nf">onEditLabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Edit legend label</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">selected_plot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">selected_plottable</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">selected_plot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">selected_plot</span><span class="o">.</span><span class="n">label</span>
        <span class="n">dial</span> <span class="o">=</span> <span class="n">TextDialog</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Change Label&#39;</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dial</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">FONT</span> <span class="o">=</span> <span class="n">FontProperties</span><span class="p">()</span>
                <span class="n">newlabel</span> <span class="o">=</span> <span class="n">dial</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
                <span class="n">font</span> <span class="o">=</span> <span class="n">FONT</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="n">dial</span><span class="o">.</span><span class="n">getSize</span><span class="p">())</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_family</span><span class="p">(</span><span class="n">dial</span><span class="o">.</span><span class="n">getFamily</span><span class="p">())</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="n">dial</span><span class="o">.</span><span class="n">getStyle</span><span class="p">())</span>
                <span class="n">font</span><span class="o">.</span><span class="n">set_weight</span><span class="p">(</span><span class="n">dial</span><span class="o">.</span><span class="n">getWeight</span><span class="p">())</span>
                <span class="n">colour</span> <span class="o">=</span> <span class="n">dial</span><span class="o">.</span><span class="n">getColor</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">newlabel</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># update Label</span>
                    <span class="n">selected_plot</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">newlabel</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">newlabel</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">title_label</span> <span class="o">=</span> <span class="n">selected_plot</span><span class="o">.</span><span class="n">label</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">title_font</span> <span class="o">=</span> <span class="n">font</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">title_color</span> <span class="o">=</span> <span class="n">colour</span>
                    <span class="c1">## render the graph</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">title_label</span><span class="p">,</span>
                                           <span class="n">fontproperties</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">title_font</span><span class="p">,</span>
                                           <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">title_color</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_is_changed_legend_label</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Add Text: Error. Check your property values...&quot;</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">msg</span><span class="p">))</span>
        <span class="n">dial</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_onEditDetector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allow to view and edits  detector parameters</span>

<span class="sd">        :param event: wx.menu event</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">detector_dialog</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">detector_dialog</span><span class="o">.</span><span class="n">DetectorDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span>
                                                <span class="n">reset_zmin_ctl</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">default_zmin_ctl</span><span class="p">,</span>
                                                <span class="n">reset_zmax_ctl</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">default_zmax_ctl</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cmap</span><span class="p">)</span>
        <span class="c1">## info of current detector and data2D</span>
        <span class="n">xnpts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">x_bins</span><span class="p">)</span>
        <span class="n">ynpts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">y_bins</span><span class="p">)</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">xmax</span><span class="p">)</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">ymax</span><span class="p">)</span>
        <span class="n">qmax</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">ymax</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="c1">## set dialog window content</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">setContent</span><span class="p">(</span><span class="n">xnpts</span><span class="o">=</span><span class="n">xnpts</span><span class="p">,</span> <span class="n">ynpts</span><span class="o">=</span><span class="n">ynpts</span><span class="p">,</span> <span class="n">qmax</span><span class="o">=</span><span class="n">qmax</span><span class="p">,</span>
                          <span class="n">beam</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span>
                          <span class="n">zmin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span><span class="p">,</span>
                          <span class="n">zmax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="n">evt</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">getContent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">zmin</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">zmax</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">cmap</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
        <span class="c1">## Redraw the current image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                   <span class="n">qx_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">qx_data</span><span class="p">,</span>
                   <span class="n">qy_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">qy_data</span><span class="p">,</span>
                   <span class="n">xmin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span>
                   <span class="n">xmax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">xmax</span><span class="p">,</span>
                   <span class="n">ymin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span>
                   <span class="n">ymax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">ymax</span><span class="p">,</span>
                   <span class="n">zmin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">zmin_2D</span><span class="p">,</span>
                   <span class="n">zmax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">zmax_2D</span><span class="p">,</span>
                   <span class="n">cmap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cmap</span><span class="p">,</span>
                   <span class="n">color</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw_idle</span><span class="p">()</span>

<div class="viewcode-block" id="ModelPanel2D.freeze_axes"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.freeze_axes">[docs]</a>    <span class="k">def</span> <span class="nf">freeze_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_frozen</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="ModelPanel2D.thaw_axes"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.thaw_axes">[docs]</a>    <span class="k">def</span> <span class="nf">thaw_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes_frozen</span> <span class="o">=</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ModelPanel2D.onMouseMotion"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onMouseMotion">[docs]</a>    <span class="k">def</span> <span class="nf">onMouseMotion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="ModelPanel2D.onWheel"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onWheel">[docs]</a>    <span class="k">def</span> <span class="nf">onWheel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="ModelPanel2D.update"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">draw</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Respond to changes in the model by recalculating the</span>
<span class="sd">        profiles and resetting the widgets.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_plot</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_getEmptySlicerEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create an empty slicervent</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">SlicerEvent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">obj_class</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onEVT_INTERNAL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw the slicer</span>

<span class="sd">        :param event: wx.lib.newevent (SlicerEvent) containing slicer</span>
<span class="sd">            parameter</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setSlicer</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">slicer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setSlicer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slicer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clear the previous slicer and create a new one.Post an internal</span>
<span class="sd">        event.</span>

<span class="sd">        :param slicer: slicer class to create</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">## Clear current slicer</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="c1">## Create a new slicer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slicer_z</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span> <span class="o">=</span> <span class="n">slicer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">slicer_z</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">ymax</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">xmax</span><span class="p">)</span>
        <span class="c1">## Draw slicer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Plotter2D._setSlicer  </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">StatusEvent</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">msg</span><span class="p">))</span>
        <span class="c1"># Post slicer event</span>
        <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEmptySlicerEvent</span><span class="p">()</span>
        <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">event</span><span class="o">.</span><span class="n">obj_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="n">event</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="n">get_params</span><span class="p">()</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

<div class="viewcode-block" id="ModelPanel2D.onMaskedCircular"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onMaskedCircular">[docs]</a>    <span class="k">def</span> <span class="nf">onMaskedCircular</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        perform circular averaging on Data2D with mask if it exists</span>

<span class="sd">        :param event: wx.menu event</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onCircular</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ModelPanel2D.onCircular"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onCircular">[docs]</a>    <span class="k">def</span> <span class="nf">onCircular</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">ismask</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        perform circular averaging on Data2D</span>

<span class="sd">        :param event: wx.menu event</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Find the best number of bins</span>
        <span class="n">npt</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">data</span><span class="p">)]))</span>
        <span class="n">npt</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">npt</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">sas.sascalc.dataloader.manipulations</span> <span class="k">import</span> <span class="n">CircularAverage</span>
        <span class="c1">## compute the maximum radius of data2D</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">xmax</span><span class="p">),</span>
                        <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">xmin</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">ymax</span><span class="p">),</span>
                        <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">ymin</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qmax</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ymax</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="c1">##Compute beam width</span>
        <span class="n">bin_width</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qmax</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">qmax</span><span class="p">)</span> <span class="o">/</span> <span class="n">npt</span>
        <span class="c1">## Create data1D circular average of data2D</span>
        <span class="n">Circle</span> <span class="o">=</span> <span class="n">CircularAverage</span><span class="p">(</span><span class="n">r_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r_max</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span>
                                 <span class="n">bin_width</span><span class="o">=</span><span class="n">bin_width</span><span class="p">)</span>
        <span class="n">circ</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="p">,</span> <span class="n">ismask</span><span class="o">=</span><span class="n">ismask</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">sas.sasgui.guiframe.dataFitting</span> <span class="k">import</span> <span class="n">Data1D</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">circ</span><span class="p">,</span> <span class="s2">&quot;dxl&quot;</span><span class="p">):</span>
            <span class="n">dxl</span> <span class="o">=</span> <span class="n">circ</span><span class="o">.</span><span class="n">dxl</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dxl</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">circ</span><span class="p">,</span> <span class="s2">&quot;dxw&quot;</span><span class="p">):</span>
            <span class="n">dxw</span> <span class="o">=</span> <span class="n">circ</span><span class="o">.</span><span class="n">dxw</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dxw</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">new_plot</span> <span class="o">=</span> <span class="n">Data1D</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">circ</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">circ</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span><span class="n">circ</span><span class="o">.</span><span class="n">dy</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="n">circ</span><span class="o">.</span><span class="n">dx</span><span class="p">)</span>
        <span class="n">new_plot</span><span class="o">.</span><span class="n">dxl</span> <span class="o">=</span> <span class="n">dxl</span>
        <span class="n">new_plot</span><span class="o">.</span><span class="n">dxw</span> <span class="o">=</span> <span class="n">dxw</span>
        <span class="n">new_plot</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Circ avg &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">name</span>
        <span class="n">new_plot</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">source</span>
        <span class="c1">#new_plot.info = self.data2D.info</span>
        <span class="n">new_plot</span><span class="o">.</span><span class="n">interactive</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">new_plot</span><span class="o">.</span><span class="n">detector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">detector</span>

        <span class="c1">## If the data file does not tell us what the axes are, just assume...</span>
        <span class="n">new_plot</span><span class="o">.</span><span class="n">xaxis</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">rm</span><span class="si">{Q}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;A^{-1}&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="p">,</span> <span class="s2">&quot;scale&quot;</span><span class="p">)</span> <span class="ow">and</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">scale</span> <span class="o">==</span> <span class="s1">&#39;linear&#39;</span><span class="p">:</span>
            <span class="n">new_plot</span><span class="o">.</span><span class="n">ytransform</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>
            <span class="n">new_plot</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">rm</span><span class="si">{Residuals}</span><span class="s2"> &quot;</span><span class="p">,</span> <span class="s2">&quot;normalized&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_plot</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">rm</span><span class="si">{Intensity}</span><span class="s2"> &quot;</span><span class="p">,</span> <span class="s2">&quot;cm^{-1}&quot;</span><span class="p">)</span>

        <span class="n">new_plot</span><span class="o">.</span><span class="n">group_id</span> <span class="o">=</span> <span class="s2">&quot;2daverage&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">name</span>
        <span class="n">new_plot</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="s2">&quot;Circ avg &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">name</span>
        <span class="n">new_plot</span><span class="o">.</span><span class="n">is_data</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">update_theory</span><span class="p">(</span><span class="n">data_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> \
                                       <span class="n">theory</span><span class="o">=</span><span class="n">new_plot</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span>
                     <span class="n">NewPlotEvent</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="n">new_plot</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">new_plot</span><span class="o">.</span><span class="n">name</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">_onEditSlicer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is available only when a slicer is drawn.Create a dialog</span>
<span class="sd">        window where the user can enter value to reset slicer</span>
<span class="sd">        parameters.</span>

<span class="sd">        :param event: wx.menu event</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">SlicerParameters</span> <span class="k">import</span> <span class="n">SlicerParameterPanel</span>
            <span class="n">dialog</span> <span class="o">=</span> <span class="n">SlicerParameterPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Slicer Parameters&quot;</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">set_slicer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="n">get_params</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
                <span class="n">dialog</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

<div class="viewcode-block" id="ModelPanel2D.onSectorQ"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onSectorQ">[docs]</a>    <span class="k">def</span> <span class="nf">onSectorQ</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform sector averaging on Q and draw sector slicer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">SectorSlicer</span> <span class="k">import</span> <span class="n">SectorInteractor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onClearSlicer</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">InternalEvent</span><span class="p">(</span><span class="n">slicer</span><span class="o">=</span><span class="n">SectorInteractor</span><span class="p">))</span></div>

<div class="viewcode-block" id="ModelPanel2D.onSectorPhi"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onSectorPhi">[docs]</a>    <span class="k">def</span> <span class="nf">onSectorPhi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform sector averaging on Phi and draw annulus slicer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">AnnulusSlicer</span> <span class="k">import</span> <span class="n">AnnulusInteractor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onClearSlicer</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">InternalEvent</span><span class="p">(</span><span class="n">slicer</span><span class="o">=</span><span class="n">AnnulusInteractor</span><span class="p">))</span></div>

<div class="viewcode-block" id="ModelPanel2D.onBoxSum"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onBoxSum">[docs]</a>    <span class="k">def</span> <span class="nf">onBoxSum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">sas.sasgui.guiframe.gui_manager</span> <span class="k">import</span> <span class="n">MDIFrame</span>
        <span class="kn">from</span> <span class="nn">boxSum</span> <span class="k">import</span> <span class="n">BoxSum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onClearSlicer</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slicer_z</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span> <span class="o">=</span> <span class="n">BoxSum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">slicer_z</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">ymin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">ymax</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">xmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">xmax</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="c1">## Value used to initially set the slicer panel</span>
        <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="n">get_params</span><span class="p">()</span>
        <span class="c1">## Create a new panel to display results of summation of Data2D</span>
        <span class="kn">from</span> <span class="nn">slicerpanel</span> <span class="k">import</span> <span class="n">SlicerPanel</span>
        <span class="n">win</span> <span class="o">=</span> <span class="n">MDIFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;None&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
        <span class="n">new_panel</span> <span class="o">=</span> <span class="n">SlicerPanel</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">win</span><span class="p">,</span> <span class="nb">id</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
                                <span class="n">base</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                                <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">RAISED_BORDER</span><span class="p">)</span>

        <span class="n">new_panel</span><span class="o">.</span><span class="n">window_caption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> \
                                    <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">new_panel</span><span class="o">.</span><span class="n">window_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> \
                                    <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="c1">## Store a reference of the new created panel</span>

        <span class="c1">## save the window_caption of the new panel in the current slicer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="n">set_panel_name</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">new_panel</span><span class="o">.</span><span class="n">window_caption</span><span class="p">)</span>
        <span class="c1">## post slicer panel to guiframe to display it</span>
        <span class="kn">from</span> <span class="nn">sas.sasgui.guiframe.events</span> <span class="k">import</span> <span class="n">SlicerPanelEvent</span>

        <span class="n">win</span><span class="o">.</span><span class="n">set_panel</span><span class="p">(</span><span class="n">new_panel</span><span class="p">)</span>
        <span class="n">new_panel</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">win</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">SlicerPanelEvent</span><span class="p">(</span><span class="n">panel</span><span class="o">=</span><span class="n">new_panel</span><span class="p">,</span>
                                                   <span class="n">main_panel</span><span class="o">=</span><span class="bp">self</span><span class="p">))</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="n">new_panel</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">Show</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panel_slicer</span> <span class="o">=</span> <span class="n">new_panel</span></div>

<div class="viewcode-block" id="ModelPanel2D.onBoxavgX"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onBoxavgX">[docs]</a>    <span class="k">def</span> <span class="nf">onBoxavgX</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform 2D data averaging on Qx</span>
<span class="sd">        Create a new slicer .</span>

<span class="sd">        :param event: wx.menu event</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">boxSlicer</span> <span class="k">import</span> <span class="n">BoxInteractorX</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onClearSlicer</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">InternalEvent</span><span class="p">(</span><span class="n">slicer</span><span class="o">=</span><span class="n">BoxInteractorX</span><span class="p">))</span></div>

<div class="viewcode-block" id="ModelPanel2D.onBoxavgY"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onBoxavgY">[docs]</a>    <span class="k">def</span> <span class="nf">onBoxavgY</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform 2D data averaging on Qy</span>
<span class="sd">        Create a new slicer .</span>

<span class="sd">        :param event: wx.menu event</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">boxSlicer</span> <span class="k">import</span> <span class="n">BoxInteractorY</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onClearSlicer</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">InternalEvent</span><span class="p">(</span><span class="n">slicer</span><span class="o">=</span><span class="n">BoxInteractorY</span><span class="p">))</span></div>

<div class="viewcode-block" id="ModelPanel2D.onClearSlicer"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.onClearSlicer">[docs]</a>    <span class="k">def</span> <span class="nf">onClearSlicer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clear the slicer on the plot</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subplot</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">slicer</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="c1"># Post slicer None event</span>
            <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getEmptySlicerEvent</span><span class="p">()</span>
            <span class="n">wx</span><span class="o">.</span><span class="n">PostEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_onSave</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save a data set to a dat(text) file</span>

<span class="sd">        :param evt: Menu event</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">evt</span><span class="o">.</span><span class="n">GetId</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_default_save_location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_default_save_location</span>
        <span class="n">default_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">selected_plottable</span><span class="p">]</span><span class="o">.</span><span class="n">label</span>
        <span class="k">if</span> <span class="n">default_name</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">default_name</span> <span class="o">=</span> <span class="n">default_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">default_name</span> <span class="o">+=</span> <span class="s2">&quot;_out&quot;</span>
        <span class="k">if</span> <span class="n">event_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_ids</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">save_data2d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data2D</span><span class="p">,</span> <span class="n">default_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onDataShow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show the data set in text</span>

<span class="sd">        :param evt: Menu event</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetEventObject</span><span class="p">()</span>
        <span class="n">event_id</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_selected_from_menu</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span> <span class="n">event_id</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plots</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">selected_plottable</span><span class="p">]</span>
        <span class="n">default_name</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">label</span>
        <span class="k">if</span> <span class="n">default_name</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">default_name</span> <span class="o">=</span> <span class="n">default_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1">#default_name += &quot;_out&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">show_data2d</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">default_name</span><span class="p">)</span>

<div class="viewcode-block" id="ModelPanel2D.modifyGraphAppearance"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.modifyGraphAppearance">[docs]</a>    <span class="k">def</span> <span class="nf">modifyGraphAppearance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span> <span class="o">=</span> <span class="n">graphAppearance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Modify graph appearance&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">setDefaults</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid_on</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend_on</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_unit</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_font</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_font</span><span class="p">,</span>
                                  <span class="n">find_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_loc_label</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">legendLoc</span><span class="p">),</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">xcolor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ycolor</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">is_xtick</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_ytick</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_CLOSE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_graphApp_close</span><span class="p">)</span></div>

<div class="viewcode-block" id="ModelPanel2D.on_graphApp_close"><a class="viewcode-back" href="../../../../../../dev/api/sas.sasgui.guiframe.local_perspectives.plotting.html#sas.sasgui.guiframe.local_perspectives.plotting.Plotter2D.ModelPanel2D.on_graphApp_close">[docs]</a>    <span class="k">def</span> <span class="nf">on_graphApp_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Gets values from graph appearance dialog and sends them off</span>
<span class="sd">            to modify the plot</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onGridOnOff</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_togglegrid</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_xlab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_ylab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_xunit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_yunit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_xfont</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_font</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_yfont</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_xtick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_xtick_check</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_ytick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_ytick_check</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_xtick</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_tick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_font</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_ytick</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_tick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_font</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_unit</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_xfont</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_xcolor</span><span class="p">(),</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_tick</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis_label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_unit</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_yfont</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">get_ycolor</span><span class="p">(),</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_tick</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">graphApp</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../../../index.html">SasView 4.1.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../../guiframe.html" >sas.sasgui.guiframe</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, The SasView Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.2.
    </div>
  </body>
</html>