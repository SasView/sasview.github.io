<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Fitting Perspective &mdash; SasView 3.1.2 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '3.1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="SasView 3.1.2 documentation" href="../../../index.html" />
    <link rel="up" title="Fitting Documentation" href="fitting.html" />
    <link rel="next" title="Assessing Fit Quality" href="residuals_help.html" />
    <link rel="prev" title="Fitting Documentation" href="fitting.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="residuals_help.html" title="Assessing Fit Quality"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="fitting.html" title="Fitting Documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">SasView 3.1.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../user.html" >SasView User Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="fitting.html" accesskey="U">Fitting Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="fitting-perspective">
<h1>Fitting Perspective</h1>
<div class="section" id="preparing-to-fit-data">
<h2>Preparing to fit data</h2>
<p>To fit some data you must first load some data, activate one or more data sets,
send those data sets to the fitting perspective, and select a model to fit to
each data set.</p>
<p>Instructions on how to load and activate data are in the section <a class="reference internal" href="../../guiframe/data_explorer_help.html#loading-data"><span>Loading Data</span></a>.</p>
<p>SasView can fit data in one of three ways:</p>
<ul class="simple">
<li>in <em>Single</em> fit mode - individual data sets are fitted independently one-by-one</li>
<li>in <em>Simultaneous</em> fit mode - multiple data sets are fitted simultaneously to the <em>same</em> model with/without constrained parameters (this might be useful, for example, if you have measured the same sample at different contrasts)</li>
<li>in <em>Batch</em> fit mode - multiple data sets are fitted sequentially to the <em>same</em> model (this might be useful, for example, if you have performed a kinetic or time-resolved experiment and have <em>lots</em> of data sets!)</li>
</ul>
</div>
<div class="section" id="selecting-a-model">
<h2>Selecting a model</h2>
<p>By default, the models in SasView are grouped into five categories</p>
<ul class="simple">
<li><em>Shapes</em> - models describing &#8216;objects&#8217; (spheres, cylinders, etc)</li>
<li><em>Shape-Independent</em> - models describing structure in terms of density correlation functions, fractals, peaks, power laws, etc</li>
<li><em>Customized Models</em> - SasView- or User-created (non-library) Python models</li>
<li><em>Uncategorised</em> - other models (for reflectivity, etc)</li>
<li><em>Structure Factor</em> - S(Q) models</li>
</ul>
<p>Use the <em>Category</em> drop-down menu to chose a category of model, then select
a model from the drop-down menu beneath. A graph of the chosen model, calculated
using default parameter values, will appear. The graph will update dynamically
as the parameter values are changed.</p>
<p>You can decide your own model categorizations using the <a class="reference internal" href="#category-manager"><span>Category Manager</span></a>.</p>
<p>Once you have selected a model you can read its help documentation by clicking
on the <em>Description</em> button to the right.</p>
<div class="section" id="show-1d-2d">
<h3>Show 1D/2D</h3>
<p>Models are normally fitted to 1D (ie, I(Q) vs Q) data sets, but some models in
SasView can also be fitted to 2D (ie, I(Qx,Qy) vs Qx vs Qy) data sets.</p>
<p><em>NB: Magnetic scattering can only be fitted in SasView in 2D.</em></p>
<p>To activate 2D fitting mode, click the <em>Show 2D</em> button on the <em>Fit Page</em>. To
return to 1D fitting model, click the same button (which will now say <em>Show 1D</em>).</p>
</div>
</div>
<div class="section" id="category-manager">
<span id="id1"></span><h2>Category Manager</h2>
<p>To change the model categorizations, either choose <em>Category Manager</em> from the
<em>View</em> option on the menubar, or click on the <em>Modify</em> button on the <em>Fit Page</em>.</p>
<img alt="../../../_images/cat_fig0.bmp" src="../../../_images/cat_fig0.bmp" />
<p>The categorization of all models except the customized models can be reassigned,
added to, and removed using <em>Category Manager</em>. Models can also be hidden from view
in the drop-down menus.</p>
<img alt="../../../_images/cat_fig1.bmp" src="../../../_images/cat_fig1.bmp" />
<div class="section" id="changing-category">
<h3>Changing category</h3>
<p>To change category, highlight a model in the list by left-clicking on its entry and
then click the <em>Modify</em> button. Use the <em>Change Category</em> panel that appears to make
the required changes.</p>
<img alt="../../../_images/cat_fig2.bmp" src="../../../_images/cat_fig2.bmp" />
<p>To create a category for the selected model, click the <em>Add</em> button. In order
to delete a category, select the category name and click the <em>Remove Selected</em>
button. Then click <em>Done</em>.</p>
</div>
<div class="section" id="showing-hiding-models">
<h3>Showing/hiding models</h3>
<p>Use the <em>Enable All / Disable All</em> buttons and the check boxes beside each model to
select the models to show/hide. To apply the selection, click <em>Ok</em>. Otherwise click
<em>Cancel</em>.</p>
<p><em>NB: It may be necessary to change to a different category and then back again</em>
<em>before any changes take effect.</em></p>
</div>
</div>
<div class="section" id="model-functions">
<h2>Model Functions</h2>
<p>For a complete list of all the library models available in SasView, see the section
<a class="reference internal" href="../../models/model_functions.html#sasview-model-functions"><span>SasView Model Functions</span></a>.</p>
<p>It is also possible to add your own models.</p>
</div>
<div class="section" id="adding-your-own-models">
<span id="id2"></span><h2>Adding your own models</h2>
<p>There are currently two ways to add your own models to SasView:</p>
<ul class="simple">
<li>Using the <a class="reference internal" href="#custom-model-editor"><span>Custom Model Editor</span></a></li>
<li>By <a class="reference internal" href="#writing-a-plugin"><span>Writing a Plugin</span></a></li>
</ul>
<p><em>NB: Because of the way these options are implemented, it is not possible for them</em>
<em>to use the polydispersity algorithms in SasView. Only models in the model library</em>
<em>can do this. At the time of writing (Release 3.1.0) work is in hand to make it</em>
<em>easier to add new models to the model library.</em></p>
</div>
<div class="section" id="custom-model-editor">
<span id="id3"></span><h2>Custom Model Editor</h2>
<p>From the <em>Fitting</em> option in the menu bar, select <em>Edit Custom Model</em>.</p>
<img alt="../../../_images/edit_model_menu.bmp" src="../../../_images/edit_model_menu.bmp" />
<p>and then one of the options</p>
<ul class="simple">
<li><em>New</em> - to create a new custom model template</li>
<li><em>Sum|Multi(p1,p2)</em> - to create a new model by summing/multiplying existing models in the model library</li>
<li><em>Advanced</em> - to edit a new custom model</li>
<li><em>Delete</em> - to delete a custom model</li>
</ul>
<div class="section" id="new">
<h3>New</h3>
<img alt="../../../_images/new_model.bmp" src="../../../_images/new_model.bmp" />
<p>A model template generated by this option can be viewed and further modified using
the <a class="reference internal" href="#advanced"><span>Advanced</span></a> option.</p>
</div>
<div class="section" id="sum-multi-p1-p2">
<h3>Sum|Multi(p1,p2)</h3>
<img alt="../../../_images/sum_model.bmp" src="../../../_images/sum_model.bmp" />
<p>This option creates a custom model of the form</p>
<p>Custom Model = scale_factor * (model1 +/* model2)</p>
<p>In the <em>Easy Sum/Multi Editor</em> give the new custom model a function name and brief
description (to appear under the <em>Details</em> button on the <em>Fit Page</em>). Then select
two existing models, as p1 and p2, and the required operator, &#8216;+&#8217; or &#8216;*&#8217; between
them. Finally, click the <em>Apply</em> button to generate the model and then click <em>Close</em>.</p>
<p><em>NB: Any changes to a custom model generated in this way only become effective after</em>
<em>it is re-selected from the model drop-down menu on the Fit Page.</em></p>
</div>
<div class="section" id="advanced">
<span id="id4"></span><h3>Advanced</h3>
<p>Selecting this option shows all the custom models in the plugin model folder</p>
<blockquote>
<div><em>C:\Users\[username]\.sasview\plugin_models</em> - (on Windows)</div></blockquote>
<p>You can edit, modify, and save the Python code in any of these models using the
<em>Advanced Custom Model Editor</em>.</p>
<p><em>NB: Unless you are confident about what you are doing, it is recommended that you</em>
<em>only modify lines denoted with the ## &lt;&#8212;&#8211; comments!</em></p>
<p>When editing is complete, select <em>Run -&gt; Compile</em> from the <em>Model Editor</em> menu bar. An
<em>Info</em> box will appear with the results of the compilation and model unit tests. The
model will only be usable if the tests &#8216;pass&#8217;.</p>
<p>To use the model, go to the relevant <em>Fit Page</em>, select the <em>Customized Models</em>
category and then select the model from the drop-down menu.</p>
<p><em>NB: Any changes to a custom model generated in this way only become effective after</em>
<em>it is re-selected from the model drop-down menu on the Fit Page.</em></p>
</div>
<div class="section" id="delete">
<h3>Delete</h3>
<p>Simply highlight the custom model to be removed. This operation is final!</p>
<p><em>NB: Custom models shipped with SasView cannot be removed in this way.</em></p>
</div>
</div>
<div class="section" id="writing-a-plugin">
<span id="id5"></span><h2>Writing a Plugin</h2>
<p>Advanced users can write their own model in Python and save it to the the SasView
<em>plugin_models</em> folder</p>
<blockquote>
<div><em>C:\Users\[username]\.sasview\plugin_models</em> - (on Windows)</div></blockquote>
<p>in .py format. The next time SasView is started it will compile the plugin and add
it to the list of <em>Customized Models</em>.</p>
<p>It is recommended that existing plugin models be used as templates.</p>
</div>
<div class="section" id="fitting-options">
<span id="id6"></span><h2>Fitting Options</h2>
<p>It is possible to specify which optimiser SasView should use to fit the data, and
to modify some of the configurational parameters for each optimiser.</p>
<p>From <em>Fitting</em> in the menu bar select <em>Fit Options</em>, then select one of the following
optimisers:</p>
<ul class="simple">
<li>DREAM</li>
<li>Levenberg-Marquardt</li>
<li>Quasi-Newton BFGS</li>
<li>Differential Evolution</li>
<li>Nelder-Mead Simplex</li>
</ul>
<p>The DREAM optimiser is the most sophisticated, but may not necessarily be the best
option for fitting simple models. If uncertain, try the Levenberg-Marquardt optimiser
initially.</p>
<p>These optimisers form the <em>Bumps</em> package written by P Kienzle. For more information
on each optimiser, see the <a class="reference internal" href="fitting.html#fitting-documentation"><span>Fitting Documentation</span></a>.</p>
</div>
<div class="section" id="fitting-limits">
<h2>Fitting Limits</h2>
<p>By default, <em>SasView</em> will attempt to model fit the full range of the data; ie,
across all <em>Q</em> values. If necessary, however, it is possible to specify only a
sub-region of the data for fitting.</p>
<p>In a <em>FitPage</em> or <em>BatchPage</em> change the <em>Q</em> values in the <em>Min</em> and/or <em>Max</em>
text boxes. Vertical coloured bars will appear on the graph with the data and
&#8216;theory&#8217; indicating the current <em>Q</em> limits (red = <em>Qmin</em>, purple = <em>Qmax</em>).</p>
<p>To return to including all data in the fit, click the <em>Reset</em> button.</p>
</div>
<div class="section" id="shortcuts">
<h2>Shortcuts</h2>
<div class="section" id="copy-paste-parameters">
<h3>Copy/Paste Parameters</h3>
<p>It is possible to copy the parameters from one <em>Fit Page</em> and to paste them into
another <em>Fit Page</em> using the same model.</p>
<p>To <em>copy</em> parameters, either:</p>
<ul class="simple">
<li>Select <em>Edit -&gt; Copy Params</em> from the menu bar, or</li>
<li>Use Ctrl(Cmd on Mac) + Left Mouse Click on the <em>Fit Page</em>.</li>
</ul>
<p>To <em>paste</em> parameters, either:</p>
<ul class="simple">
<li>Select <em>Edit -&gt; Paste Params</em> from the menu bar, or</li>
<li>Use Ctrl(Cmd on Mac) + Shift + Left-click on the <em>Fit Page</em>.</li>
</ul>
<p>If either operation is successful a message will appear in the info line at the
bottom of the SasView window.</p>
</div>
<div class="section" id="bookmark">
<h3>Bookmark</h3>
<p>To <em>Bookmark</em> a <em>Fit Page</em> either:</p>
<ul class="simple">
<li>Select a <em>Fit Page</em> and then click on <em>Bookmark</em> in the tool bar, or</li>
<li>Right-click and select the <em>Bookmark</em> in the popup menu.</li>
</ul>
</div>
</div>
<div class="section" id="status-bar-console">
<span id="status-bar"></span><h2>Status Bar &amp; Console</h2>
<p>The status bar is located at the bottom of the SasView window and displays
messages, hints, warnings and errors.</p>
<p>At the right-hand side of the status bar is a button marked <em>Console</em>. The <em>Console</em>
displays available message history and some run-time traceback information.</p>
<p>During a long task the <em>Console</em> can also be used to monitor the progress.</p>
</div>
<div class="section" id="single-fit-mode">
<span id="id7"></span><h2>Single Fit Mode</h2>
<p><em>NB: Before proceeding, ensure that the Single Mode radio button at the bottom of</em>
<em>the Data Explorer is checked (see the section</em> <a class="reference internal" href="../../guiframe/data_explorer_help.html#loading-data"><span>Loading Data</span></a> <em>).</em></p>
<p>This mode fits one data set.</p>
<p>When data is sent to the fitting perspective it is plotted in a graph window as
markers.</p>
<p>If a graph does not appear, or a graph window appears but is empty, then the data
has not loaded correctly. Check to see if there is a message in the <a class="reference internal" href="#status-bar"><span>Status Bar &amp; Console</span></a>
or in the <em>Console</em> window.</p>
<p>Assuming the data has loaded correctly, when a model is selected a green model
calculation (or what SasView calls a &#8216;Theory&#8217;) line will appear in the earlier graph
window, and a second graph window will appear displaying the residuals (the
difference between the experimental data and the theory) at the same X-data values.
See <a class="reference internal" href="residuals_help.html#assessing-fit-quality"><span>Assessing Fit Quality</span></a>.</p>
<p>The objective of model-fitting is to find a <em>physically-plausible</em> model, and set
of model parameters, that generate a theory that reproduces the experimental data
and gives residual values as close to zero as possible.</p>
<p>Change the default values of the model parameters by hand until the theory line
starts to represent the experimental data. Then uncheck the tick boxes alongside
all parameters <em>except</em> the &#8216;background&#8217; and the &#8216;scale&#8217;. Click the <em>Fit</em> button.
SasView will optimise the values of the &#8216;background&#8217; and &#8216;scale&#8217; and also display
the corresponding uncertainties on the optimised values.</p>
<p><em>NB: If no uncertainty is shown it generally means that the model is not very</em>
<em>dependent on the corresponding parameter (or that one or more parameters are</em>
<em>&#8216;correlated&#8217;).</em></p>
<p>In the bottom left corner of the <em>Fit Page</em> is a box displaying the normalised value
of the statistical χ <sup>2</sup> parameter returned by the optimiser.</p>
<p>Now check the box for another model parameter and click <em>Fit</em> again. Repeat this
process until most or all parameters are checked and have been optimised. As the
fit of the theory to the experimental data improves the value of &#8216;chi2/Npts&#8217; will
decrease. A good model fit should easily produce values of &#8216;chi2/Npts&#8217; that are
close to zero, and certainly &lt;100. See <a class="reference internal" href="residuals_help.html#assessing-fit-quality"><span>Assessing Fit Quality</span></a>.</p>
<p>SasView has a number of different optimisers (see the section <a class="reference internal" href="#fitting-options"><span>Fitting Options</span></a>).
The DREAM optimiser is the most sophisticated, but may not necessarily be the best
option for fitting simple models. If uncertain, try the Levenberg-Marquardt optimiser
initially.</p>
</div>
<div class="section" id="simultaneous-fit-mode">
<h2>Simultaneous Fit Mode</h2>
<p><em>NB: Before proceeding, ensure that the Single Mode radio button at the bottom of</em>
<em>the Data Explorer is checked (see the section</em> <a class="reference internal" href="../../guiframe/data_explorer_help.html#loading-data"><span>Loading Data</span></a> <em>).</em></p>
<p>This mode is an extension of the <a class="reference internal" href="#single-fit-mode"><span>Single Fit Mode</span></a> that fits two or more data
sets <em>to the same model</em> simultaneously. If necessary it is possible to constrain
fit parameters between data sets (eg, to fix a background level, or radius, etc).</p>
<p>If the data to be fit are in multiple files, load each file, then select each file
in the <em>Data Explorer</em>, and <em>Send To Fitting</em>. If multiple data sets are in one file,
load that file, <em>Unselect All Data</em>, select just those data sets to be fitted, and
<em>Send To Fitting</em>. Either way, the result should be that for <em>n</em> data sets you have
2<em>n</em> graphs (<em>n</em> of the data and model fit, and <em>n</em> of the resulting residuals). But
it may be helpful to minimise the residuals plots for clarity. Also see
<a class="reference internal" href="residuals_help.html#assessing-fit-quality"><span>Assessing Fit Quality</span></a>.</p>
<p><em>NB: If you need to use a customized model, you must ensure that model is available</em>
<em>first (see</em> <a class="reference internal" href="#adding-your-own-models"><span>Adding your own models</span></a> <em>).</em></p>
<div class="section" id="method">
<h3>Method</h3>
<p>Now go to each <em>FitPage</em> in turn and:</p>
<blockquote>
<div><p>Select the required category and model;</p>
<p>Unselect all the model parameters;</p>
<p>Enter some starting guesses for the parameters;</p>
<p>Enter any parameter limits (recommended);</p>
<p>Select which parameters will refine (selecting all is generally a bad idea...);</p>
</div></blockquote>
<p>When done, select <em>Constrained or Simultaneous Fit</em> under <em>Fitting</em> in the menu bar.</p>
<p>In the <em>Const &amp; Simul Fit</em> page that appears, select which data sets are to be
simultaneously fitted (this will probably be all of them or you would not have loaded
them in the first place!).</p>
<p>To tie parameters between the data sets with constraints, check the &#8216;yes&#8217; radio button
next to <em>Add Constraint?</em> in the <em>Fit Constraints</em> box.</p>
<p><em>NB: You can only constrain parameters that are set to refine.</em></p>
<p>When ready, click the <em>Fit</em> button on the <em>Const &amp; Simul Fit</em> page, NOT the <em>Fit</em>
button on the individual <em>FitPage</em>&#8216;s.</p>
</div>
<div class="section" id="simultaneous-fits-without-constraints">
<h3>Simultaneous Fits without Constraints</h3>
<p>The results of the model-fitting will be returned to each of the individual
<em>FitPage</em>&#8216;s.</p>
<p>Note that the chi2/Npts value returned is the SUM of the chi2/Npts of each fit. To
see the chi2/Npts value for a specific <em>FitPage</em>, click the <em>Compute</em> button at the
bottom of that <em>FitPage</em> to recalculate. Also see <a class="reference internal" href="residuals_help.html#assessing-fit-quality"><span>Assessing Fit Quality</span></a>.</p>
</div>
<div class="section" id="simultaneous-fits-with-constraints">
<h3>Simultaneous Fits with Constraints</h3>
<p>Use the <em>Easy Setup</em> drop-down buttons in the <em>Const &amp; Simul Fit</em> page to set
up constraints between <em>FitPage</em>&#8216;s.</p>
<p>Constraints will generally be of the form</p>
<blockquote>
<div>Mi Parameter1 = Mj.Parameter1</div></blockquote>
<p>however the text box after the &#8216;=&#8217; sign can be used to adjust this
relationship; for example</p>
<blockquote>
<div>Mi Parameter1 = scalar * Mj.Parameter1</div></blockquote>
<p>A &#8216;free-form&#8217; constraint box is also provided.</p>
<p>Many constraints can be entered for a single fit.</p>
<p>The results of the model-fitting will be returned to each of the individual
<em>FitPage</em>&#8216;s.</p>
<p>Note that the chi2/Npts value returned is the SUM of the chi2/Npts of each fit. To
see the chi2/Npts value for a specific <em>FitPage</em>, click the <em>Compute</em> button at the
bottom of that <em>FitPage</em> to recalculate. Also see <a class="reference internal" href="residuals_help.html#assessing-fit-quality"><span>Assessing Fit Quality</span></a>.</p>
</div>
</div>
<div class="section" id="batch-fit-mode">
<h2>Batch Fit Mode</h2>
<p><em>NB: Before proceeding, ensure that the Single Mode radio button at the bottom of</em>
<em>the Data Explorer is checked (see the section</em> <a class="reference internal" href="../../guiframe/data_explorer_help.html#loading-data"><span>Loading Data</span></a> <em>). The Batch</em>
<em>Mode button will be used later on!</em></p>
<p>This mode <em>sequentially</em> fits two or more data sets <em>to the same model</em>. Unlike in
simultaneous fitting, in batch fitting it is not possible to constrain fit parameters
between data sets.</p>
<p>If the data to be fit are in multiple files, load each file in the <em>Data Explorer</em>.
If multiple data sets are in one file, load just that file. <em>Unselect All Data</em>, then
select a single initial data set to be fitted. Fit that selected data set as described
above under <a class="reference internal" href="#single-fit-mode"><span>Single Fit Mode</span></a> .</p>
<p><em>NB: If you need to use a customized model, you must ensure that model is available</em>
<em>first (see</em> <a class="reference internal" href="#adding-your-own-models"><span>Adding your own models</span></a> <em>).</em></p>
<div class="section" id="id8">
<h3>Method</h3>
<p>Now <em>Select All Data</em> in the <em>Data Explorer</em>, check the <em>Batch Mode</em> radio button
at the bottom of that panel and <em>Send To Fitting</em>. A <em>BatchPage</em> will be created.</p>
<img alt="../../../_images/batch_button_area.bmp" src="../../../_images/batch_button_area.bmp" />
<p><em>NB: The Batch Page can also be created by checking the Batch Mode radio button</em>
<em>and selecting New Fit Page under Fitting in the menu bar.</em></p>
<p>Using the drop-down menus in the <em>BatchPage</em>, now set up the <em>same</em> data set
with the <em>same</em> model that you just fitted in single fit mode. A quick way to
set the model parameter values is to just copy them from the earlier Single
Fit. To do this, go back to the Single Fit <em>FitPage</em>, select <em>Copy Params</em>
under <em>Edit</em> in the menu bar, then go back to the <em>BatchPage</em> and <em>Paste Params</em>.</p>
<p>When ready, use the <em>Fit</em> button on the <em>BatchPage</em> to perform the fitting, NOT
the <em>Fit</em> button on the individual <em>FitPage</em>&#8216;s.</p>
<p>Unlike in single fit mode, the results of batch fits are not returned to
the <em>BatchPage</em>. Instead, a spreadsheet-like <a class="reference internal" href="#grid-window"><span>Grid Window</span></a> will appear.</p>
<p>If you want to visually check a graph of a particular fit, click on the name of
a <em>Data set</em> in the <em>Grid Window</em> and then click the <em>View Fits</em> button. The
data and the model fit will be displayed. If you select mutliple data sets they
will all appear on one graph.</p>
<img alt="../../../_images/view_button.bmp" src="../../../_images/view_button.bmp" />
<p><em>NB: In theory, returning to the BatchPage and changing the name of the I(Q)</em>
<em>data source should also work, but at the moment whilst this does change the</em>
<em>data set displayed it always superimposes the &#8216;theory&#8217; corresponding to the</em>
<em>starting parameters.</em></p>
<p>If you select a &#8216;Chi2&#8217; value and click the <em>View Fits</em> button a graph of the
residuals for that data set is displayed. Again, if you select multiple &#8216;Chi2&#8217;
values then all the residuals data will appear on one graph. Also see
<a class="reference internal" href="residuals_help.html#assessing-fit-quality"><span>Assessing Fit Quality</span></a>.</p>
</div>
<div class="section" id="chain-fitting">
<h3>Chain Fitting</h3>
<p>By default, the <em>same</em> parameter values copied from the initial single fit into
the <em>BatchPage</em> will be used as the starting parameters for all batch fits. It
is, however, possible to get <em>SasView</em> to use the results of a fit to a preceding
data set as the starting parameters for the next fit in the sequence. This
variation of batch fitting is called <em>Chain Fitting</em>, and will considerably speed
up model-fitting if you have lots of very similar data sets where a few parameters
are gradually changing. Do not use chain fitting on disparate data sets.</p>
<p>To use chain fitting, select <em>Chain Fitting</em> under <em>Fitting</em> in the menu bar. It
toggles on/off, so selecting it again will switch back to normal batch fitting.</p>
</div>
<div class="section" id="grid-window">
<span id="id9"></span><h3>Grid Window</h3>
<p>The <em>Grid Window</em> provides an easy way to view the results from batch fitting.
It will be displayed automatically when a batch fit completes, but may be
opened at any time by selecting <em>Show Grid Window</em> under <em>View</em> in the menu
bar.</p>
<img alt="../../../_images/restore_batch_window.bmp" src="../../../_images/restore_batch_window.bmp" />
<p>Once a batch fit is completed, all model parameters are displayed but <em>not</em>
their uncertainties. To view the uncertainties, click on a given column then
go to <em>Edit</em> in the menu bar, select <em>Insert Column Before</em> and choose the
required data from the list. An empty column can be inserted in the same way.</p>
<p>To remove a column from the grid, click on the column header and choose
<em>Remove Column</em> under <em>Edit</em> in the menu bar. The same functionality also
allows you to re-order columns.</p>
<p><em>NB: You cannot insert/remove/re-order the rows in the Grid Window.</em></p>
<p>All of the above functions are also available by right-clicking on a column
label.</p>
<img alt="../../../_images/edit_menu.bmp" src="../../../_images/edit_menu.bmp" />
<p><em>NB: If there is an existing Grid Window and another batch fit is performed,</em>
<em>an additional &#8216;Table&#8217; tab will be added to the Grid Window.</em></p>
<p>The parameter values in the <em>currently selected</em> table of the <em>Grid Window</em>
can be output to a CSV file by choosing <em>Save As</em> under <em>File</em> in the (<em>Grid</em>
<em>Window</em>) menu bar. The default filename includes the date and time that the
batch fit was performed.</p>
<p>Saved CSV files can be reloaded by choosing <em>Open</em> under <em>File</em> in the <em>Grid</em>
<em>Window</em> menu bar. The loaded parameters will appear in a new table tab.</p>
<img alt="../../../_images/file_menu.bmp" src="../../../_images/file_menu.bmp" />
<p><em>NB: Saving the Grid Window does not save any experimental data, residuals</em>
<em>or actual model fits. Consequently if you reload a saved CSV file the</em>
<em>ability to View Fits will be lost.</em></p>
</div>
<div class="section" id="parameter-plots">
<h3>Parameter Plots</h3>
<p>Any column of <em>numeric</em> parameter values can be plotted against another using
the <em>Grid Window</em>. Simply select one column at the time and click the <em>Add</em>
button next to the required <em>X/Y-axis Selection Range</em> text box. When both
the X and Y axis boxes have been completed, click the <em>Plot</em> button.</p>
<p>When the <em>Add</em> button is clicked, <em>SasView</em> also automatically completes the
<em>X/Y-axis Label</em> text box with the heading from Row 1 of the selected table,
but different labels and units can be entered manually.</p>
<img alt="../../../_images/plot_button.bmp" src="../../../_images/plot_button.bmp" />
<p>The <em>X/Y-axis Selection Range</em> can be edited manually. The text control box
recognises the operators +, -, *, /, or &#8216;pow&#8217;, and allows the following
types of expression :</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">if an axis label range is a function of 1 or more <em>columns</em>, write
this type of expression</p>
<p>constant1 * column_name1 [minimum row index :  maximum  row index]
operator constant2 * column_name2 [minimum row index :  maximum  row index]</p>
<p>Example: radius [2 : 5] -3 * scale [2 : 5]</p>
</li>
<li><p class="first">if only some <em>values</em> of a given column are needed but the range between
the first row and the last row used is not continuous, write this type of
expression</p>
<p>column_name1 [minimum row index1 :  maximum  row index1] , column_name1
[minimum row index2 :  maximum  row index2]</p>
<p>Example: radius [2 : 5] , radius [10 : 25]</p>
</li>
</ol>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This help document was last changed by Steve King, 04Jun2015</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Fitting Perspective</a><ul>
<li><a class="reference internal" href="#preparing-to-fit-data">Preparing to fit data</a></li>
<li><a class="reference internal" href="#selecting-a-model">Selecting a model</a><ul>
<li><a class="reference internal" href="#show-1d-2d">Show 1D/2D</a></li>
</ul>
</li>
<li><a class="reference internal" href="#category-manager">Category Manager</a><ul>
<li><a class="reference internal" href="#changing-category">Changing category</a></li>
<li><a class="reference internal" href="#showing-hiding-models">Showing/hiding models</a></li>
</ul>
</li>
<li><a class="reference internal" href="#model-functions">Model Functions</a></li>
<li><a class="reference internal" href="#adding-your-own-models">Adding your own models</a></li>
<li><a class="reference internal" href="#custom-model-editor">Custom Model Editor</a><ul>
<li><a class="reference internal" href="#new">New</a></li>
<li><a class="reference internal" href="#sum-multi-p1-p2">Sum|Multi(p1,p2)</a></li>
<li><a class="reference internal" href="#advanced">Advanced</a></li>
<li><a class="reference internal" href="#delete">Delete</a></li>
</ul>
</li>
<li><a class="reference internal" href="#writing-a-plugin">Writing a Plugin</a></li>
<li><a class="reference internal" href="#fitting-options">Fitting Options</a></li>
<li><a class="reference internal" href="#fitting-limits">Fitting Limits</a></li>
<li><a class="reference internal" href="#shortcuts">Shortcuts</a><ul>
<li><a class="reference internal" href="#copy-paste-parameters">Copy/Paste Parameters</a></li>
<li><a class="reference internal" href="#bookmark">Bookmark</a></li>
</ul>
</li>
<li><a class="reference internal" href="#status-bar-console">Status Bar &amp; Console</a></li>
<li><a class="reference internal" href="#single-fit-mode">Single Fit Mode</a></li>
<li><a class="reference internal" href="#simultaneous-fit-mode">Simultaneous Fit Mode</a><ul>
<li><a class="reference internal" href="#method">Method</a></li>
<li><a class="reference internal" href="#simultaneous-fits-without-constraints">Simultaneous Fits without Constraints</a></li>
<li><a class="reference internal" href="#simultaneous-fits-with-constraints">Simultaneous Fits with Constraints</a></li>
</ul>
</li>
<li><a class="reference internal" href="#batch-fit-mode">Batch Fit Mode</a><ul>
<li><a class="reference internal" href="#id8">Method</a></li>
<li><a class="reference internal" href="#chain-fitting">Chain Fitting</a></li>
<li><a class="reference internal" href="#grid-window">Grid Window</a></li>
<li><a class="reference internal" href="#parameter-plots">Parameter Plots</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="fitting.html"
                        title="previous chapter">Fitting Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="residuals_help.html"
                        title="next chapter">Assessing Fit Quality</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/user/perspectives/fitting/fitting_help.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="residuals_help.html" title="Assessing Fit Quality"
             >next</a> |</li>
        <li class="right" >
          <a href="fitting.html" title="Fitting Documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">SasView 3.1.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../user.html" >SasView User Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="fitting.html" >Fitting Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, The SasView Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>