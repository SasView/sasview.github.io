<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>multilayer_vesicle &mdash; SasView 4.1.2 documentation</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '4.1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <link rel="top" title="SasView 4.1.2 documentation" href="../../index.html" />
    <link rel="up" title="Sphere Functions" href="../shape-sphere.html" />
    <link rel="next" title="onion" href="onion.html" />
    <link rel="prev" title="linear_pearls" href="linear_pearls.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="onion.html" title="onion"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="linear_pearls.html" title="linear_pearls"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">SasView 4.1.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../user.html" >SasView User Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >Model Functions</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="../shape-sphere.html" accesskey="U">Sphere Functions</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="multilayer-vesicle">
<span id="id1"></span><h1>multilayer_vesicle</h1>
<p>P(Q) for a Multi-lamellar vesicle</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="51%" />
<col width="15%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
<th class="head">Units</th>
<th class="head">Default value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>scale</td>
<td>Source intensity</td>
<td>None</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>background</td>
<td>Source background</td>
<td>cm<sup>-1</sup></td>
<td>0.001</td>
</tr>
<tr class="row-even"><td>volfraction</td>
<td>volume fraction of vesicles</td>
<td>None</td>
<td>0.05</td>
</tr>
<tr class="row-odd"><td>radius</td>
<td>radius of solvent filled core</td>
<td>Å</td>
<td>60</td>
</tr>
<tr class="row-even"><td>thick_shell</td>
<td>thickness of one shell</td>
<td>Å</td>
<td>10</td>
</tr>
<tr class="row-odd"><td>thick_solvent</td>
<td>solvent thickness between shells</td>
<td>Å</td>
<td>10</td>
</tr>
<tr class="row-even"><td>sld_solvent</td>
<td>solvent scattering length density</td>
<td>10<sup>-6</sup>Å<sup>-2</sup></td>
<td>6.4</td>
</tr>
<tr class="row-odd"><td>sld</td>
<td>Shell scattering length density</td>
<td>10<sup>-6</sup>Å<sup>-2</sup></td>
<td>0.4</td>
</tr>
<tr class="row-even"><td>n_shells</td>
<td>Number of shell plus solvent layer pairs</td>
<td>None</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>The returned value is scaled to units of cm<sup>-1</sup> sr<sup>-1</sup>, absolute scale.</p>
<p><strong>Definition</strong></p>
<p>This model is a trivial extension of the core_shell_sphere function where the
core is filled with solvent and is surrounded by <span class="math">\(N\)</span> shells of material
(such as lipids) interleaved with <span class="math">\(N - 1\)</span> layers of solvent. For <span class="math">\(N = 1\)</span>, this
returns the same as the vesicle model, except for the normalisation, which here
is to outermost volume. The shell thicknesses and SLD are constant for all
shells as expected for a multilayer vesicle.</p>
<div class="figure" id="id3">
<img alt="../../_images/multi_shell_geometry.jpg" src="../../_images/multi_shell_geometry.jpg" />
<p class="caption"><span class="caption-number">Fig. 69 </span><span class="caption-text">Geometry of the multilayer_vesicle model.</span></p>
</div>
<p>See the <a class="reference internal" href="core_shell_sphere.html#core-shell-sphere"><span class="std std-ref">core_shell_sphere</span></a> model for more documentation.</p>
<p>The 1D scattering intensity is calculated in the following way (Guinier, 1955)</p>
<div class="math">
\[P(q) = \text{scale} \cdot \frac{\phi}{V(R_N)} F^2(q) + \text{background}\]</div>
<p>where</p>
<div class="math">
\[F(q) = (\rho_\text{shell}-\rho_\text{solv}) \sum_{i=1}^{N} \left[
3V(r_i)\frac{\sin(qr_i) - qr_i\cos(qr_i)}{(qr_i)^3}
- 3V(R_i)\frac{\sin(qR_i) - qR_i\cos(qR_i)}{(qR_i)^3}
\right]\]</div>
<p>for</p>
<div class="math">
\[\begin{split}r_i &amp;= r_c + (i-1)(t_s + t_w) &amp;&amp; \text{ solvent radius before shell } i \\
R_i &amp;= r_i + t_s &amp;&amp; \text{ shell radius for shell } i\end{split}\]</div>
<p><span class="math">\(\phi\)</span> is the volume fraction of particles, <span class="math">\(V(r)\)</span> is the volume of a sphere
of radius <span class="math">\(r\)</span>, <span class="math">\(r_c\)</span> is the radius of the core, <span class="math">\(t_s\)</span> is the thickness of
the shell, <span class="math">\(t_w\)</span> is the thickness of the solvent layer between the shells,
<span class="math">\(\rho_\text{shell}\)</span> is the scattering length density of a shell, and
<span class="math">\(\rho_\text{solv}\)</span> is the scattering length density of the solvent.</p>
<p>USAGE NOTES</p>
<ul>
<li><p class="first">The outer-most shell radius <span class="math">\(R_N\)</span> is used as the effective radius
for <span class="math">\(P(Q)\)</span> when <span class="math">\(P(Q) * S(Q)\)</span> is applied.
calculations rather slow.</p>
</li>
<li><p class="first">The number of shells is always rounded to an integer value as a non interger
number of layers is not physical.</p>
</li>
<li><p class="first">Thus Polydispersity should only be applied to number of shells <strong>VERY
CAREFULLY</strong>.  A possible legitimate use would be for mixed systems in which
some vesicles have 1 shell, some have 2, etc. A polydispersity on <span class="math">\(N\)</span> can be
used to model the data by using the &#8220;array distriubtion&#8221; feature. First
create a file such as <em>shell_dist.txt</em> containing the relative portion
of each vesicle size:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">20</span>
<span class="mi">2</span>  <span class="mi">4</span>
<span class="mi">3</span>  <span class="mi">1</span>
</pre></div>
</div>
<p>Turn on polydispersity and select an array distribution for the <em>n_shells</em>
parameter.  Choose the above <em>shell_dist.txt</em> file, and the model will be
computed with 80% 1-shell vesicles, 16% 2-shell vesicles and 4%
3-shell vesicles.</p>
</li>
<li><p class="first">This is a highly non-linear, highly oscillatory (especially around the
q-values that correspond to the repeat distance of the layers), model
function complicated by the fact that the number of water/shell pairs must
physically be an integer value, although the optimization treats it as a
floating point value. Thus it may be that the resolution interpolation is not
sufficiently fine grained in certain cases. Please report any such occurences
to the SasView team. Generally, for the best possible experience:</p>
</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Start with the best possible guess</li>
<li>Using a priori knowledge, hold as many parameters fixed as possible</li>
<li>if N=1, tw (water thickness) must by definition be zero. Both N and tw should
be fixed during fitting.</li>
<li>If N&gt;1, use constraints to keep N &gt; 1</li>
<li>Because N only really moves in integer steps, it may get &#8220;stuck&#8221; if the
optimizer step size is too small so care should be taken
If you experience problems with this please contact the SasView team and let
them know the issue preferably with example data and model which fail to
converge.</li>
</ul>
</div></blockquote>
<p>The 2D scattering intensity is the same as 1D, regardless of the orientation
of the q vector which is defined as:</p>
<div class="math">
\[q = \sqrt{q_x^2 + q_y^2}\]</div>
<p>For information about polarised and magnetic scattering, see
the <a class="reference internal" href="../magnetism.html#magnetism"><span class="std std-ref">Polarisation/Magnetic Scattering</span></a> documentation.</p>
<div class="figure" id="id4">
<img alt="../../_images/multilayer_vesicle_autogenfig.png" src="../../_images/multilayer_vesicle_autogenfig.png" />
<p class="caption"><span class="caption-number">Fig. 70 </span><span class="caption-text">1D plot corresponding to the default parameters of the model.</span></p>
</div>
<p><strong>References</strong></p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>B Cabane, <em>Small Angle Scattering Methods</em>, in <em>Surfactant Solutions:
New Methods of Investigation</em>, Ch.2, Surfactant Science Series Vol. 22, Ed.
R Zana and M Dekker, New York, (1987).</td></tr>
</tbody>
</table>
<p><strong>Authorship and Verification</strong></p>
<ul class="simple">
<li><strong>Author:</strong> NIST IGOR/DANSE <strong>Date:</strong> pre 2010</li>
<li><strong>Converted to sasmodels by:</strong> Piotr Rozyczko <strong>Date:</strong> Feb 24, 2016</li>
<li><strong>Last Modified by:</strong> Paul Kienzle <strong>Date:</strong> Feb 7, 2017</li>
<li><strong>Last Reviewed by:</strong> Paul Butler <strong>Date:</strong> March 12, 2017</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="linear_pearls.html"
                        title="previous chapter">linear_pearls</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="onion.html"
                        title="next chapter">onion</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/user/models/multilayer_vesicle.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="onion.html" title="onion"
             >next</a> |</li>
        <li class="right" >
          <a href="linear_pearls.html" title="linear_pearls"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">SasView 4.1.2 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../user.html" >SasView User Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >Model Functions</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="../shape-sphere.html" >Sphere Functions</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2017, The SasView Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>